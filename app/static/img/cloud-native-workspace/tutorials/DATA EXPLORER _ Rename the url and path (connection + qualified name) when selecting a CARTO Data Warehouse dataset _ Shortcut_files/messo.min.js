(function(w,d,r,index){var j=0;var l=r.elusive;var S=r.Snippet;var ssAKey='chmln:_account';var ssDKey='chmln:_debug';if(r.root){return;}else if(S&&!(S.mode==='user'&&r.mode==='admin')){return;}else if(/user/.test(l)){return(r.isDisabled=true);}S=S||(r.Snippet={});S.version={git:'d405d1193',when:"2021-08-18T23:51:26.627Z"};return _afs()?admin():user();function admin(){if(/admin/.test(l)){return(r.isDisabled=true);}r.isEditing=true;r.mode=S.mode='admin';return load('edit/admin/'+r.accountToken+'/territory.js',{cors:true},data);function data(){var t=r.territory,u=t&&t.user,d=_dfs(),vc=t&&t.assets.chmln,ve=t&&t.assets.editor;r._data(t);if(u&&u.id){vc&&load('assets'+d+'/chmln/'+vc+'/chmln.js',loaded);ve&&load('assets'+d+'/editor/'+ve+'/editor.js',loaded);}else{w.postMessage({code:404,kind:'chmln:error:account'},'*');return(r.isEditing=false);}}function loaded(){if(++j===2){start();edit(0);}}function edit(t){var r=w.chmln,E=r._Editor;if(!r.Builder){t > 6?build410(w,r):setTimeout(edit.bind(this,++t),75+(t*25));}else if(E){r._Editor=null;E();r.Editor.start();w.postMessage({code:200,kind:'chmln:building'},'*');}}}function user(){var l;r.mode=S.mode='user';r.identify=function(){r.identify_a.push(arguments);r.mode==='user'&&lt();};r.identify_a.length&&lt();function lt(){if(!l){l=true;load('edit/user/'+r.accountToken+'/territory.js',data);}}function data(){var t=r.territory,a=t&&t.account,d=_dfs(),v=t&&t.assets&&t.assets.chmln;if(!(a&&a.id)||(t&&t.env.url_enabled==='off')){return(r.isDisabled=true);}r._data(t);v&&load('assets'+d+'/chmln/'+v+'/chmln.js',{defer:true},start);}}function start(){var c=w.chmln;c._(Object.keys(r)).each(function(key){if(r.hasOwnProperty(key)&&typeof c[key]==='undefined'){c[key]=r[key];}});c.location||(c.location=w.location.href.toString());c.now||(c.now=new Date());c.start();}function load(p,o,l){var c=w.chmln;var s=d.createElement('script');var sd=c.accountEnv?['fast',c.accountEnv].join('-'):'fast';s.crossOrigin=o.cors?'use-credentials':'anonymous';s.src='https://'+sd+'.trychameleon.com/'+p;s.onload=function(){d.head.removeChild(s);(l||o).apply(this,arguments)};(o.defer&&d.readyState !=='complete')?w.addEventListener('load',function(){d.head.appendChild(s);}):d.head.appendChild(s);}function build410(w,r){w.sessionStorage.removeItem(ssAKey);w.postMessage({code:410,kind:'chmln:error:extension'},'*');r.mode=null;r.clear&&r.clear();}function _afs(){var a;if((a=w.sessionStorage.getItem(ssAKey))){try{a=JSON.parse(a);}catch(e){}if(a&&a.token){if(_id62(a.token)===_id62(r.accountToken)){return a;}else{w.postMessage({code:409,kind:'chmln:error:account'},'*');}}return null;}}function _dfs(){return w.sessionStorage.getItem(ssDKey)?'/debug':'';}function _id62(t){return t&&(t=t.split('-'))&&t[t.length-1];}})(window,document,window.chmln);