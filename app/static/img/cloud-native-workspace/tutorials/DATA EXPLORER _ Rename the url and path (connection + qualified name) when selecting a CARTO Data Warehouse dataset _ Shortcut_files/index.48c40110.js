!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports.CommandBarLib=t():e.CommandBarLib=t()}(this,(function(){return(this.webpackChunkLoaderCommandBar=this.webpackChunkLoaderCommandBar||[]).push([[826],{94820:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABNEAAABECAAAAACKI/xBAAAAAnRSTlMAAHaTzTgAAAoOSURBVHgB7J1bdqS4FkSDu7gPTYSh2AOATw1Pn6kBVA2FieiTrlesq6po8lgt0pj02b06E58HlRhXOCQBBcdxHMdxHOfDMeA7BfcIOI4VwISDKQhvK0O4H9iAobeFZSx8WIK0dqz4ztQRg1XdECNfX/CTGUDmNjJDP6MzuMnKKsQ0Y+Amyxnirurmx1KghAvWXoARAErEPUpAB/KzvK6YcAIl8lD2AtsCbENPS1XGwqMTSnvHhNOYgBV3mKlklKDqPUshMUIzsuzlOXFGW9AQS0C/lv/QMWrahOMoiKZL41HyUCRAdcKyDR0tVRkLD0+oV7Q7yLofm6w6rKbdrmNUL6NOyapMtGcUuixZ2WSHbsl+M97BoUX8TrpyrfGbJJ+saBQ0W9I6jnxF/ZO+4nqo66GQneo325keUjth7bFpX38MO6lbM+ZMaeOYETISzYzN9Wiy7shuyj4dI96JSQXuOMSlWcqkgQ2DSlVdUSIbWbVs2vJ41CvadDs0jTE63Y9NWO26r3x9MU3AzDGk1mQWZu2Bht6VaPzEXrl21gjyZRXNPnKFI8+TJnRKLEED24JNpaqqKBGx/C5oWLSlBR0+Pp4J5yM27YVydp8sX4p+SUGe661TuWE5Y78dtcDSX3u+oqWINjLmRm+wTsBUJWpK06pKaXZpJdbmhoH/LcByq6Rq+LMC+7Dl+OFjvzj2ObRJY/tOa1r/uUvDy9d9QaPz4utMP6ZDysxsPeScf3yly6bOfRbcemtPYESvpAn20GSS0efVKOGc4aNQgojj1ZnzvTEnkxqzOVfGllP3y9qnZ0S3pM2mK5jMwQcpiMb1ZVqdkBANl1aCFbBbdOR6Pvwgtjiu9vkx60jrXNpq15E8ywhz/2tbzGQQwQ4b59Zfe7aipVrSEhCP8mZG1UlzZ20tOgw9Hw6hrzCLZiyObqCkVauZFC0OPL8nqUrk/zHN1gopOfkzngH3fv8SQau20jtMQ09VUSmxQUS1OsZSDAWSwKNFq5SylzA6PhFf+Oo4x3m0pEuYKXb4s5WLAAaT1lwfc3Kr6CDZ6JD6hrUCWVhmjHFrzNk17pxWjdGl/Yi9AuBrBqAbusmvGNNCyWpbhvPU82j1aDMi9Q04p8aLaQtiw7plXZ0A7TwDSojO/GsCiAnE6qAGhg45/eAu7csrunGcEUpEN5NsXYDlUY6Mie67UGPTPiiO1xl0vgLYvXt83glmvkux7ke6WdGzz7mKmiSQM2ufmPEoQUv9d2fu3jEazGqc79JUQjRxghoZT9FoiJnjzvbYtDJGOXOcoxUt4hMybAucE3nloJPOSJh5v6cm8gwFWrnn72aj1txnvR+5RrzoXy8kBOAStWBtw/foGvd1NnyX+h2a+LXQUH2XKAFT0uLpi9byzXg2vrzy9Z6eAZmqIUnHoaJ9PlIofwaAYQMWu6XituAE6vWBgifhla/Xp3ClqjpFESRdt5Z+WCIkQ68vHNBAXysZH3CmuufhInRurCagvLk6QNXpbwMDNvouu+Vn/fLeVo3rA084PzAYiwDtzB1jIB3Jmvuc0YqzQRk6W0d8LhIQ9gPkNhSpEGjr2HKW4XyOuznthx/M+8V/W5+7/vRZ9yARQ4L5a18IIBetJbN18/oGYNjRHwyHt6qiJSj9R25zZ55M7Uiq6u3qglDF2KmBCqqTVqhNO0bQSp+gxRJkV9fi68uP/z8TzgYd3tyw9bQOqBUtpmdd9wwlGoGKGzDstMR7LR1EtENp582d1z5jL3yGrc79y83pSsbBZHquNluXZd5DfteKbbhaLc+Ongp1tUslUUvDve1drSPuSFoE2o/8AIL6rspChrbqZkkb0N5yhNa2E3B95Bm2vN+8m/me3lE9WaGp3LbPPDc/u9VZoJFbZ+uoCvaMhAJEDTS2xOO/Tdzp+Xs6C3mG7fXhnXlR4gnx4rXU7dma/FTl0YS29beOjztTx6NOUF2aVrNEe/bZa4m6+nmuEJUAbnFP15xH+/7fHU/FYG6LG+SmVL5bmnFZ/Ho0J4WP4NK4KMCtS7u0p/Bo9ngnXbfWXnVu/DcNdGf9rRgfeab6sWfR1KXZ1Z0kY7+l3rIToQCImiD2U9y4FepFaHm44jpJjDTGlOmfxVbGHMc92nkEW/PrrRSKJiqjF4CiHaqBNqEuLPxDLsGL/+xcvFavbLph6W89TdHCw5wZCW2zXggfe4Sqcc2oBhYYSAc+EY4zGhM5/teid0osBSaaBC3F/vPAjvpxsdDx5Dp1jjsnI7Y+95hT5z+erpZkzB/dpY2wJS0FPfLH0/wsj/AhJS0FJuTaWOPbHWFbN/9VdCUSwtPW5g81j2aMZULDkbtLE+GSBKOCdGiCURtVTXFpp7KCuEtzl3braVVFQ+g/8n6eQil/X24MmjAIe+oYJNqwK2M8uU5mXc8652rXOY6vdZ6NvdyoiXZ1jBqNcC7o0tKVaw2XlltdGs0VUwsYGTpbxwPO1JXcU7gTGLYfrx0tx6tjsW/PsjHd14p2l+YOzXGPdirBDAwdLe9sAf54IEh86zLA2qQj64SGYp9EM674Dk9Rqy4tY58B2MRqVRZOIr2t44FnymfRzlyJSOHBLg2rOzSnn5vxjI3O1hHXxyVNb8zqt2mNi6OrGzR9egPfH1QLREQgFSDs17Ky/zOoS+O7wVJNfN1axjh108L93G8dH3umelx7gGMTCuLbbfJEQZEYha6KGTbN9l2r+zNn2xkwLnzorNWqsLVP0eaGXMZ74pLWDNXLL0N7+GRnAmdqwgNqE4O7tQkREQmp+zMoudWlATcMaIRN28ErA5nv9pF/6PtEnak/1r8H53lRR6bcfuYe0DrCcZxL3vdk19PHBZQz73u6AT0ODZWGbTAY33Ud0nEcZ3hg64gmZjiO81YiCkK1dXytBauO/wwzsmxBqc3VIhP6DVNw5FhFywDS24/cKeHRCdLfoTiO3zMw58+uYUX/HYD2BLETinY4Z5Bk6+jaFo79DFm3LG4Q+pr6r97I5pH7pRsllgiQUEJ7QsSRCdN2aYfjuEczNDnollPLSKm/7EhQ6pgQ2yUKpx3OaQTZOra2gf7P0M/Q3+ScTJlLX6KgECb49h02lFLudPzVzn0lNQwEURQdrfGuc9anX34AIzk21c/xHjLYCo/JU2W1kLTm/7BeP7kkSZIkZbj0JhHZgDdAg5UeAA6f9f8Ar//eMZqUxs8ggs7BhAEarPQAsPm+hwFus4SnG6Mx3pI0xwEX/syoMMDteO0x17QlCd5m/CbX0STs9m3RDggXBLpKWv5S83eSF787y1Wd5apuCcXDHFu0HL1wPGbhz6lL2WL2VYrtE6NPZW7usXAEy1WZ5epGInCMMLhTBsCQ5erTyhXVlAASQROIjO0FvHBFh+evzparEMvVsp8XMGZ5HuHL3cZGzpu884kxZtN/1HLVynL1uiRJkvQFUg1OaKSaqSkAAAAASUVORK5CYII="},61506:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAACYkAAACCBAMAAAD7gMi8AAAAIVBMVEUAAAD39/fa2tr///+5ublTU1P29vbv7+/+/v74+Pjw8PCjSky4AAAAAXRSTlMAQObYZgAADDlJREFUeAHs3StsLEmWh/Gvy2WuJBe3gs9r3RwFV7+Ss36h4cgcLZnXchbkcgVc6GqZg9TlJJpb7odDLh0pFBN2ONPOqvT/J3U568Q5OTs7M+WTJ6PSrEZEREREPgMYaEksxQETyxpIz8oitQNXcJhVYlmWt+hCqbvC8WCaEWP2GSZK/uYXHlx+CXcfj4f5aARykBGyYIkjx9UcsljOy4fFWcY/XnJuwM73qoZKLG0g99TsOGciIntg8LTERI92H+AcE29u8BBTK3DlgMOcEsuyvOUXSp0VE6uZwLE8EfaInIDxLjBefnm8Pswh8sXk5RgIx7e2Sn6bjRAsxmi1X37EzoIJx6tW2YL9k60YPs6/jHZMZBOOBQ14Iuk5PYqPqRqwvspxmFFiWZa3/EI5nmtXGEfBYlMrz4Lt8abFrO9q523fAPgiFs8+14zF+/Ce5mIOkaMPfHfNHCJ7a8U6mrHOj24HE+dsSEXg6sA6bDzXb3qV3Ak3ZzT2Z36+AUaAkK/7uPv4pf1uH6G8bxnGx9CI3Xu0ise3+VSvQnSPcgKR7MN33wHf5deXEtmf/yeXTca6eioLXHGoNVmWMZTd6JUrSt6MjefalpuKucagsxGbcE/n/Tkf/MxW+fp/WTeRO1YiYdOfYt0XmCK2mzUfPfxTXj2S7z3ataVdeYYRxsejvJrZkagX6/joPh2VnioHrly1ybKMweNj0Yq5sqTfAGn7F/LN0VgEDze/sGETbtXz9ueCm5+7+V5swjnyTxC5/jtLEvVi0dMlMC62sWIAUld2VweYe6pUBpwDN2FN1qHMoMVKlr/Z2N/WLTUVm4pYczI2uZdPxoj+JkKdfReSu2BXj+UNyJxzXP2SkEvvPl5++ZAbHt8/5uWMFnFM83O33ou5CaZ8wPJERL0Y0S/+yb4pQ1rnZmNpSGVbd4rEncB5nab7C5vKe5UituEVM9qdyMq+1vzScmfDDkveItkzsxkbn/r8n3q+EwmR1JUd8e3J2JCagXpJx33O9e+3tts614hNz8wzfXvGXDPvJMnUm7u+vR7VIiKb6cWiNWP5jd/CPKy+R6yvpHHTch2V+61t08lvoAqXX47Ys1kvR+zeYgjjcV+rsVh9dbQH9RSLxb+GzJu36VmvzvGOyYdrexWZ34tFO/L24602iw/4Wdk2GWv3TmXgyZLlN3ENpI6KTfvz/9rrC4nsV7+4EO3bf3i9C9htSDuwQxOKmB0VZynOZxmBTdKnWLSgt55MlnsQmC1EUkeFdW/9jWDtq16OR1PfHcr+u5STq+ZNuMdYjJBfRU5sLuYc7pnDv8mxFNGzXkVXlHZvEjyRtzPgG/OtdjZF5ToGSLW9+dUFHzGNCluJaUYjeKLsWa+nRjQXc0xMTzZaIh++ZILvfuH/EFnyU8xrk8yyUzBb6D+VdW9p4S9prs+e9bp98cxy1YtN5ZHI00Z7yk4RrweDPdm1OImdpyZXZWHWOS0eWJXsl2nF4iJTMXtvUjt7/SfNtpsfW1ijj3I8mCox+mPtu5R9scnl2Aae9Srau4/INXOI7N/9VOyAYx1iz3otruNMjufH9pTGP+JUBNrsynGs/iv2nNPOQ/mg4qHyP6uYM84hF8t9pqBeTPQ9SpHXnu73fMzPmooV7yKpI7vF1wOtZsyf1Nf5B5K+RylyUr2YyPXj6/gl4SOUHuPh48NB6XIEENnzrsQ0lAE4AK5dsvr3pood/APbsJnvUQ54YnGl4jmKZ50LI6GMVOdhF38FuL+ln5WqFxMR9WLzf9X0i5jac8PApI7sRCGmauDAlc262iXZwVIdb6L4/qVnm2yD68yTQKCP3ffsPOeI9HddhfvbWaU7zoKIiOZiEVIzkE2HoZVh3RjOSlhDTDAk5MQUVyomnWNuZ/u5+/zXTxdXuUOqdk55YfHSPesR+fDT///xz7X9CREojRQsuZof6GUn5HKsniH0XwLLSr1YnP2rpl9ZFyuzLhOB1JGdLGSFRaBoxVoZ5sDVIq3YMK8V8zHZqc5zw9gX2i72nlxcPXRdACb3YC8vvb/dsSKRf/Id14gs0ov5uMUnjaXoG4HCBAfqJb5Z8mKeXtaSFn+U0nOOIvx8EyHUv9Vo31UESneBZd2FnitEuwgN5Q3y2gVCxJxf7kigfoFfXoLvnDVXRef0sEBpidIdaxH58N13wHf5VWReL1ZvxjzdH93zpcqsy2Z2qS+7txk7QH/J/CaxX+KM6FmvYqzLsoj79dOs0j1rErGructx2WfGNi4Dcw6hthS6zpkvQkeLr0H2GM8WpQi+Eugr8WR++Yndemda39ae9eqJ+bUU8WefOxLyaylUYjtHjS3cfbRJ5wKlO9Yj8gH45zUziOwX/VWzvPbszSZjjezEgKkFSpWSMHgexXQSLdSQ7Ch6ztSfb7644Yb69Z0F70JHvMGqOpYsVIsH5F0/X0zkOv8zg8iePhLTSUzGBh+THZ3vZCx6YmQzPHVxA7kjdQHz62T3ERvsRs4ipTvOmYjIfvlfNcsrd4u1J2OWvbzYPu1QHrUXUgS8LXTI2/btKEXsVGbCAW4qY6YrVjG9LObIMRHNxUR/jlJkTw9JNPjyKKahuhATWYKhWlHv3hqSJR4PYuIcxMg7kDaca+4PF3+18VZf6W13qdmBiIh6scRriM88fyJSRk5BTB1xW6l3bwPPYxWIaC4mInLydqQ4e4eUpFgJxmQLHa1YrC/0sIppApwDk2OZq8TKvKanqlw9zzmLbURKMW41F0J4/mTsll+nT/Sy0vfXi4mI7J/eQh6T7cl6S5G04lxu/j78mCoLEWi3YgmraIzLzqZ/lkjabG7QXGw2EZE9kOKsPieSkBR9peUqFixq2hW2YNE2q8A4Jk6FY5PscmV7uRAYl98z9uunhUp3nDsRUS9Gmv/R3W9rHV6K9T9kaQstRYXHpGq0JT33O5JuejJvznco3VN5IpqLiYjskYUkYOhaaPd1vjF6k7OZjMVN5NYnY6FnMmYDrePSzh0j97ezSnecMxGR/exfNWczskqNwMFe+0uWR4Kh8beZOrQnXo7OyZimYv1EczEREc3F0pOBw/ySN5AYbEaGB/JLTDzJdXVAriMXp81izccOpw3k1iZjobFnjIu/luMt7Eliv5aRmaU7zpmIyH6BXzXr7hbTdwViet3JGE5TMZkn77XffZ5/LF+6YzUiIpqLqRmLkDBLjcbcs1OdhmKVP5RvP5fPBY+HOEBq5UZY+P+GwGg/m3L7ZBu8Ho7M/YEWK8pHO/dwYKXqxUREvVj50b28pKnYs6SIf/ZYcgJcPeZgauXloOuZieHaebJ1F3+t/Y0jcl91cXV/21OaWal6sXdLRL3Y2NipP67z+EdJA70cTHqs2Bvs6IskrFdeNncgHoNVOQOPJy74f4MJzclY0T6RB1z3t/SwootftXdfRNSLlf1V5aM7sLSELI9p4Vj/GWTz7NkUlPh1ymu3M0rVi4mI7lGuTUR/9aidb5Ox/HONv3pk7dOMqdixM6vet1QvJiLqxSKJHiKiWdn8UvViIqJebAQiItLkiSQ7Wjz3aZa19P8NI6E4arRPj/v1L/omY7bVrKReTET0xOrwBwDvhwHsSCqGJRd6DbxLok8xERHtFxsD79aQBuyNj+mlC8YWOljFGiTa0eK5/Zb9vyHYUceuMTOrSL2YiOiZFqH50a0HWgw+enuXYnr5gjVptjAkKhoVZ0BEczERkc94DZqLpZcvFE1aTMdQyj+OsSHlNzHVKt4nUS8mIqJeTKxx6l6oN2l5weZiOZ4eCwZI/73i9/buAjdyIIgCaC34fBv6lwyfL8zJBhYslQda7wkz2F1Tir+5EchiADhw/9+PO3AfWQwAAADso4TUg8vzaqCAswpruxgAkNS9KTvVQAFnFFYWAwCSVAljbQWcUVhZDABI6sWUvtCggL2FlcUAvlVqRHBUb6adevP5UKfUPyngvwu7CkcDZDEAIEmtaesOtosBOI8Spp3tvnUXshggi2XhBVgalpANQ22byQAaZqevGuirMbMYQJJUn3z+/GqVzBnBZ1liKPOHlKRhH9uyb01VJTM+QV+1iL4aKosBkO7PWF6yohokqU2nr/SVLAaQuf/fk2TZ7QBJGieXjBBRks0PIvqqgb4aNIsB9k4mq9vrlEHLudzvkw1f3kZfLURf9WcxAAAAuAMrmVNBFPg6WAAAAABJRU5ErkJggg=="},91182:(e,t,n)=>{"use strict";n.d(t,{Z:()=>cs});var i=n(25458),o=n(21014),a=(n(54760),n(23143)),r=n(93295),s=n(16884),c=n.n(s),l=n(97910),d=n(3538),u=n(8962);const h=()=>{const e=(0,d.Kb)()[u._4];if(void 0===e)throw new Error("invariant violation: unreachable code");return e};var m=n(66046);const p=e=>{let t=i.useRef(null);const n=h();i.useEffect(()=>{t&&e.children&&!i.isValidElement(e.children)&&(e.children instanceof Element||e.children instanceof Node?t.appendChild(e.children):n.exception(m.j.DASHBOARD))},[e.children]);const o=t=>{"Escape"===t.key&&e.onClose()},a=t=>{const n=document.getElementById("commandbar-dashboard");if(n&&t.target instanceof Element){!n.contains(t.target)&&e.onClose()}};return i.useEffect(()=>(e.children&&(document.addEventListener("keydown",o,!0),document.addEventListener("click",a)),()=>{document.removeEventListener("keydown",o,!0),document.removeEventListener("click",a)}),[e.children]),void 0===e.children?null:(0,l.tZ)("div",{id:"commandbar-dashboard",ref:e=>{t=e},css:e=>({textAlign:"center",padding:"30px 50px",backgroundColor:e.theme.main.background,borderRadius:e.theme.main.borderRadius,fontFamily:e.theme.main.fontFamily,color:e.theme.main.color})},i.isValidElement(e.children)&&e.children)};var g=n(94644),f=n(25276);const v={"Choose a command to perform on this resource..":{spanish:"Elija un comando para realizar en este recurso"},"Type text and press enter":{spanish:"Escribe y presiona enter"},"Hit enter to select. Hit tab to continue.":{spanish:"Presiona enter para seleccionar. Presiona tab para continuar."},"What do you want to do?":{spanish:"¿Que quieres encontrar o hacer?"},"Detail (optional)":{spanish:"Detalles"},"Enter test mode":{spanish:"Entre el modo de examinar"},"Exit test mode":{spanish:"Exita al modo de examinar"},"Type Ctrl+K to open and close":{spanish:"Usa Ctrl+K para abrir y cerar"},"Suggest a new option":{spanish:"Sugiera a un comando"},"Can't find what you're looking for?":{spanish:"¿No puedes encontrar lo que buscas?"},"...or blow off some steam":{spanish:"o toma un descanso!"},"Thanks for the suggestion!":{spanish:"Gracias por la sugerencia"},Submit:{spanish:"Enviar"},"to start and jump":{spanish:"para empezar y saltar"},"to close":{spanish:"cerar"},"Powered by CommandBar":{spanish:"Desarrollado por CommandBar"},Title:{spanish:"Titulo"},Cancel:{spanish:"Cancelar"}},b=e=>"spanish"===f.Z.get("language","")&&e in v?v[e].spanish:e;const y=new class{constructor(){this.organization=void 0}getOrganization(){return this.organization}setOrganization(e){this.organization=e}};class x{constructor(e){this.completed=void 0,this.type=void 0,this.setCompleted=e=>(this.completed=e,this),this.undo=()=>(this.selected=null,this),this.placeholder=()=>{var e;return b((null===(e=y.getOrganization())||void 0===e?void 0:e.custom_call_to_action)||"What do you want to do?")},this.selected=void 0,this.completed=!1,this.type=e}}var S=n(28987),C=n.n(S),E=n(49178);class w extends Error{constructor(e,t){super(e),this.name="InternalError",null!==t&&void 0!==t&&t.simulation||E.m.get().exception(m.j.UNKNOWN,this,{message:e})}}const k=/{{([^{{]+)}}+/g,T=/{{context.([^{{]+)}}+/g,I=(e,t,n,i)=>{if(void 0!==e&&null!==e)switch(typeof e){case"string":case"number":return e;case"object":if(Array.isArray(e))return e.toString();if(t){const o=C()(e,t);if(void 0===o&&n)throw new w(`Cannot interpolate ${t} from context`,i);return o}return""}},D=(e,t,n)=>{let i=0,o=0;if(""===e)return[""];let a=t;a=new RegExp(a,"gi");const r=e.split(a);for(let s=1,c=r.length;s<c;s+=2)o=r[s].length,i+=r[s-1].length,r[s]=n(r[s],s,i),i+=o;return r},A=(e,t,n,i,o)=>{let a=e;return n&&(a=D(e,T,e=>{const n=I(t.context,e,o,t);return I(n,"value",o,t)}).join("")),i&&(a=D(a,k,e=>{const n=e.split(".")[0],i=e.split(".").slice(1).join("."),o=hi.selections(t);return o.hasOwnProperty(n)?I(o[n],i||"value"):""}).join("")),a},_=e=>"//"===e.substring(0,2)?"xpath":"css",P=(e,t)=>{if("string"!==typeof e||0===e.length)return null;try{return document.querySelector(e)}catch(n){return t&&t(e),null}},O=(e,t)=>{if("string"!==typeof e||0===e.length)return null;try{const t=document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null);return t.singleNodeValue?t.singleNodeValue:null}catch(n){return t&&t(e),null}};const R=e=>{let t;return t="xpath"===_(e)?O(e):P(e),!!t};var L=n(83894);const N=e=>"context"===e.type,M=e=>"function"===e.type;var B;!function(e){e[e.MAC=0]="MAC",e[e.IOS=1]="IOS",e[e.WINDOWS=2]="WINDOWS",e[e.ANDROID=3]="ANDROID",e[e.LINUX=4]="LINUX"}(B||(B={}));const H=()=>{const e=window.navigator.userAgent,t=window.navigator.platform;let n=B.MAC;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)?n=B.MAC:-1!==["iPhone","iPad","iPod"].indexOf(t)?n=B.IOS:-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)?n=B.WINDOWS:/Android/.test(e)?n=B.ANDROID:!n&&/Linux/.test(t)&&(n=B.LINUX),n},z=e=>[B.WINDOWS,B.ANDROID,B.LINUX].includes(H())?e.ctrlKey:e.metaKey,F=e=>[B.WINDOWS,B.ANDROID,B.LINUX].includes(H())?e?"Ctrl-"+e:"Ctrl":e?"⌘"+e:"⌘";var Z=n(52344);const U={onboarding:()=>[{title:["You can use this command bar to get stuff done."],text:["We'll quickly show you how to use it."],nextBtnText:"Next",hideBarAtStart:!0,instructionText:["Hit ",nn.OS_CTRL_KEY,"+k to continue"],canShowNext:(e,t,n)=>!0,emptyContent:i.createElement("div",{style:{textAlign:"center",marginTop:-50},className:"commandbar-scale-entry-animation"},i.createElement("img",{alt:"dark mode skeleton",src:"https://staticassets.commandbar.com/editor-assets/Dark_mode_skeleton_new.png",width:600,height:364}))},{title:["You can hit ",nn.OS_CTRL_KEY,"+k to pull up the bar."],text:["Let's give it a try!"],nextBtnText:void 0,hideBarAtStart:!0,instructionText:["Hit ",nn.OS_CTRL_KEY,"+k to continue"],canShowNext:(e,t,n)=>{switch(t){case"CMDK":return!0;default:return!1}}},{title:["Searching"],text:["You can use the bar to search for things. Try executing the ",nn.COMMAND_NAME," command."],nextBtnText:void 0,hideBarAtStart:!1,instructionText:["Type ",nn.COMMAND_NAME," and hit enter"],canShowNext:(e,t,n)=>{var i,o;switch(t){case"Execution":return(null===n||void 0===n||null===(i=n.command)||void 0===i?void 0:i.id)===(null===(o=e.activeCommand)||void 0===o?void 0:o.id)||!e.activeCommand;default:return!1}}},{title:["Browsing commands"],text:["Great! You can use the mouse or arrow keys to browse through commands to learn what you can do."],nextBtnText:"Continue",hideBarAtStart:!1,instructionText:["Press arrow down or scroll to continue"],canShowNext:(e,t,n)=>{switch(t){case"Scroll":case"ArrowPress":return!0;default:return!1}}},{title:["Good job!"],text:["If you're stuck, try using this to find what you're looking for."],hideBarAtStart:!0,instructionText:[""],nextBtnText:"Finish",canShowNext:(e,t,n)=>!0,emptyContent:i.createElement("div",{className:"commandbar-scale-entry-animation",style:{textAlign:"center",marginTop:30}},i.createElement(Z.mny,{style:{fontSize:200,opacity:1}}))}],guides:e=>[{title:[e.nudge],text:[e.guidance],instructionText:[],nextBtnText:void 0,hideBarAtStart:!1,canShowNext:(e,t,n)=>{switch(t){case"Execution":case"Closed":return!0}return!1},allowExecution:!0}]};class W{constructor(e,t,n,i,o){this.type=void 0,this.label=void 0,this.value=void 0,this.optionDisabled=void 0,this.fuseMatches=void 0,this.fuseScore=void 0,this.setMatches=(e,t)=>(this.fuseMatches=e,this.fuseScore=t,this),this._isDisabled=e=>{const t=e=>({isDisabled:!0,isDisabledReason:e}),{isValid:n,isValidReason:i}=this.isValid(e);if(!n)return this.optionDisabled=t(i),this.optionDisabled;const{isAvailable:o,isAvailableReason:a}=this.isAvailable(e);if(!o)return this.optionDisabled=t(a),this.optionDisabled;const{isExecutable:r,isExecutableReason:s}=this.isExecutable(e);return r?{isDisabled:!1,isDisabledReason:""}:(this.optionDisabled=t(s),this.optionDisabled)},this.iconColorBase=(e,t)=>{let n=t?e.optionSelected.iconColor:e.option.iconColor;const i=!n;i&&(n=e.base.fontColor);return{color:n,opacity:t?e.optionSelected.iconOpacity:e.option.iconOpacity,useDefaultSVGColor:i}},this.type=t,this.label=n,this.value=i,this.optionDisabled={isDisabled:!1,isDisabledReason:""},this.fuseMatches=[],this.fuseScore=void 0}}W.highlight=(e,t,n,o,a,r)=>{if("string"!==typeof t)return t;if(!n[0]||n[0].key!==e)return t;const s=e=>e[1]-e[0]+1,c={color:"inherit",textDecoration:a.textSearchMatch.textDecoration,textUnderlinePosition:r?a.textSearchMatch.emphasisTextUnderlinePosition:a.textSearchMatch.textUnderlinePosition,fontWeight:r?a.textSearchMatch.emphasisFontWeight:a.textSearchMatch.fontWeight},l=[];if(t.length<100){let e=0;const o=2;for(const a of n[0].indices)s(a)>=o&&(l.push(t.substring(e,a[0])),l.push(i.createElement("span",{style:c},t.substring(a[0],a[1]+1))),e=a[1]+1);l.push(t.substring(e,t.length))}else{const e=(e=>{let t=void 0;for(const n of e)n.length>0&&(t||(t=n),s(n)>s(t)&&(t=n));return t?{start:t[0],end:t[1]}:null})(n[0].indices);if(!e)return t;const o=e.start>20?e.start-10:0;l.push(o>0&&"..."),l.push(t.substring(o,e.start)),l.push(i.createElement("span",{style:c},t.substring(e.start,e.end))),l.push(t.substring(e.end,t.length))}return i.createElement("span",{style:{color:"inherit"}},l)};var j=n(59394),K=n.n(j),G=n(30618);const V=e=>{var t,n,o,a;const{htmlstring:r,style:s,useDefaultSVGColor:c,...l}=e,d=K().sanitize,u=i.useMemo(()=>d(r,{ADD_TAGS:["use"]}),[r]);let h={};if(u.includes("data-commandbar")){const e=null===(n=null===(t=(new DOMParser).parseFromString(u,"text/html").querySelector("svg"))||void 0===t?void 0:t.dataset)||void 0===n?void 0:n.commandbar;h={borderRadius:(null===e||void 0===e?void 0:e.includes("round"))?"50%":void 0}}return i.createElement(G.Z,Object.assign({key:"svg-"+(null!==(a=null===(o=null===e||void 0===e?void 0:e.style)||void 0===o?void 0:o.color)&&void 0!==a?a:""),src:u,preProcessor:e=>c?e:e.replace(/fill=".*?"/g,'fill="currentColor"'),style:{...s,...h}},l))};var X=n(59955);const Y={rightsquare:X.hHr,pluscircle:X.OzW,minuscircle:X.n6z,clockcircle:X.Gtc,closecircle:X.LHV,edit:X.QML,copy:X.$OG,crown:X.Xrf,delete:X.YK6,fund:X.CoP,funnel:X.CZb,alert:X.AhU,api:X.U9v,appstore:X.sF$,accountbook:X.jfS,bank:X.ZY4,bell:X.fu8,bulb:X.GYJ,calculator:X.zjO,calendar:X.ow5,cloud:X.y9X,dashboard:X.sfH,fileadd:X.QZL,filter:X.ezc,fire:X.o$9,flag:X.qk2,folderopen:X.y6u,gift:X.WYw,heart:X.M_L,home:X.V9Z,hourglass:X.CO6,idcard:X.XZ,link:X.uFt,mail:X.Uh$,maccommand:X.iFD,message:X.Zs0,notification:X.pMA,play:X.sT9,phone:X.rJP,pushpin:X.N0Z,redo:X.EXI,rocket:X.i$5,save:X.gg_,signal:X.tD$,sound:X.dfw,star:X.pHD,tag:X.s8$,tool:X.Dp5,thunderbolt:X.nDU,undo:X.OwP,usergroupadd:X.Zev,usergroupdelete:X.IXM,useradd:X.vM4,userdelete:X.Psi,userswitch:X.jkm,user:X.nf1,search:X.RB5,book:X.SRW,lock:X.YfK,swap:X.t4O,bug:X.zax,camera:X.hOO,videocamera:X.uep,build:X.Tyv,caretdown:X.i0B,caretup:X.Vs3,caretright:X.rYR,caretleft:X.FtK,checkcircle:X.mny,checksquare:X.nrL,compass:X.ATb,contacts:X.b4C,like:X.L7p,dislike:X.Ov5,file:X.xNt,filedone:X.x0b,moneycollect:X.NIJ,qrcode:X.E2A,mobile:X.Lrr,zoomin:X.SxL,zoomout:X.aAQ,audio:X.aRZ,backward:X.IaS,boxplot:X.tL4,car:X.q2x,carryout:X.$e1,codesandbox:X.D$s,code:X._8T,codepencircle:X.fkW,container:X.oOT,control:X.yLO,creditcard:X.dx5,customerservice:X.den,database:X.wg8,diff:X.DxT},J=e=>{let t;switch(e.template.type){case"admin":t="thunderbolt";break;case"link":t="link";break;case"clickBySelector":case"clickByXpath":case"callback":case"click":t="bulb";break;default:t="folderopen"}return t},q=(e,t,n)=>{const o=Y[e];return o?i.createElement(o,{style:t}):i.createElement("div",null)},$=e=>{let t={fontSize:18,...e.style};const n=((e,t)=>{const n=e&&e.includes("#")?e.split("#")[0]:e;return n&&Object.keys(Y).includes(n.toLowerCase())?"user-defined":(null===e||void 0===e?void 0:e.startsWith("https://"))?"url":(null===e||void 0===e?void 0:e.startsWith("<svg"))?"svg":e?"emoji":t&&"string"===typeof t?"default-string":t?"default-element":"none"})(e.icon,e.default);switch("svg"===n&&e.useDefaultSVGColor&&(t={...t,color:void 0}),n){case"user-defined":const n=e.icon&&e.icon.includes("#")?e.icon.split("#")[0]:e.icon,o=e.icon&&e.icon.includes("#")?"#"+e.icon.split("#")[1]:"";return o&&(t={...t,color:o}),q(n.toLowerCase(),t,e.fill);case"url":const a=e.icon;if(a){const e=new URL(a);return new URLSearchParams(e.search).get("round")&&(t={...t,borderRadius:"50%"}),i.createElement("img",{src:a,width:18,height:18,alt:"",style:{...t}})}return i.createElement("div",{style:{minWidth:18}});case"svg":return i.createElement(V,{style:{...t},height:"18px",width:"18px",htmlstring:e.icon,useDefaultSVGColor:e.useDefaultSVGColor});case"emoji":return i.createElement("span",{style:{fontSize:18,...e.style}},e.icon);case"default-string":return q(e.default,t,e.fill);case"default-element":return i.createElement("span",null,e.default);default:return i.createElement("div",null)}},Q=e=>i.createElement("div",{style:{display:"flex",width:"100%",fontWeight:400,justifyContent:"space-between",alignItems:"center"},className:"commandbar-option commandbar-option-"+e.type},"none"===e.theme.option.iconDisplay?null:e.icon,i.createElement("div",{style:{width:e.theme.option.spaceBetweenIconAndLabel}}),i.createElement("div",{style:{color:e.color,maxWidth:"90%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:1.6}},e.breadcrumbs&&i.createElement("div",{style:{fontSize:e.theme.option.breadcrumbsFontSize,color:e.isFocused?e.theme.optionSelected.breadcrumbsColor:e.theme.option.breadcrumbsColor,marginBottom:e.theme.option.breadcrumbsMarginBottom,fontWeight:e.theme.option.breadcrumbsFontWeight}},e.breadcrumbs),e.draft,i.createElement("span",{style:{fontWeight:e.theme.option.labelFontWeight}},e.label),!!e.description&&i.createElement("div",{style:{fontSize:e.theme.option.descriptionFontSize,marginTop:e.theme.option.descriptionMarginTop,color:e.isFocused?e.theme.optionSelected.descriptionColor:e.theme.option.descriptionColor,maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e.description),!!e.extra&&i.createElement("div",null,e.extra)),i.createElement("div",{style:{flexGrow:1}}),i.createElement("div",{style:{display:"flex",alignItems:"center",marginLeft:5}},e.shortcut,e.goForward));var ee=n(27419);const te=e=>{var t;const n=e.backgroundColor?e.backgroundColor:e.color.alpha(.2).css(),o=e.borderColor?e.borderColor:"transparent";return i.createElement("span",{id:e.id,style:{display:"inline-flex",backgroundColor:n,borderRadius:null!==(t=e.borderRadius)&&void 0!==t?t:"2px",border:"1px solid transparent",borderColor:o,fontSize:e.fontSize?e.fontSize:"12px",padding:"4px 7px",transition:"all 0.3s",color:e.color.css(),minWidth:24,height:24,textAlign:"center",alignItems:"center",justifyContent:"space-around",...e.style||{}},onClick:e.onClick||void 0},e.children)},ne=e=>{const{theme:t}=(0,ee.Fg)(),n=i.useMemo(H,[]);if(0===e.keys.length)return null;if(![B.MAC,B.WINDOWS,B.LINUX].includes(n))return null;let o;try{o=c()(t.keyboardShortcuts.color)}catch{o=c()("rgba(255, 255, 255, 0.85)")}const a=e.keys.join("+").split(/\+then\d?\+/).map(e=>e.split("+")),r=[];return a.forEach((s,c)=>{r.push(i.createElement(te,{key:s.join("-"),color:o,borderRadius:t.keyboardShortcuts.borderRadius,backgroundColor:t.keyboardShortcuts.background,borderColor:e.highlight?t.keyboardShortcuts.highlight:t.keyboardShortcuts.borderColor,fontSize:t.keyboardShortcuts.fontSize,style:{paddingTop:t.keyboardShortcuts.paddingTop,paddingBottom:t.keyboardShortcuts.paddingBottom,paddingLeft:t.keyboardShortcuts.paddingLeft,paddingRight:t.keyboardShortcuts.paddingRight}},s.map((e,t)=>((e,t)=>{let o;if([B.MAC].includes(n))switch(e.toLowerCase()){case"command":o=i.createElement("span",{key:t},"⌘");break;case"option":o=i.createElement("span",{key:t},"⌥");break;case"ctrl":o=i.createElement("span",{key:t},"^");break;case"shift":o=i.createElement("span",{key:t},"⇧");break;case"return":o=i.createElement("span",{key:t},"Return");break;default:o=e.length>1?i.createElement("span",{key:t},e.toLowerCase()):i.createElement("span",{key:t},e.toUpperCase())}else if([B.WINDOWS,B.LINUX].includes(n))switch(e.toLowerCase()){case"ctrl":o=i.createElement("span",{key:t},"Ctrl+");break;case"shift":o=i.createElement("span",{key:t},"⇧");break;case"alt":o=i.createElement("span",{key:t},"alt");break;case"meta":o=i.createElement("span",{key:t},"⊞");break;case"return":o=i.createElement("span",{key:t},"Return");break;default:o=e.length>1?i.createElement("span",{key:t},e.toLowerCase()):i.createElement("span",{key:t},e.toUpperCase())}else o=null;return o})(e,t)))),c!==a.length-1&&r.push(i.createElement("span",{key:"then-"+c,style:{margin:"0px 4px"}},"then"))}),r},ie=/^[a-zA-Z =!+\/\\[\]|.()<>0-9"'\-_#@]*$/,oe=/ = /,ae=["alert(","fetch","XMLHttpRequest","$.","ajax"],re={isAllowable:e=>{const t=ae.some(t=>e.includes(t));return[e.length<500,ie.test(e),!t,!oe.test(e)].every(e=>e)}},se=(e,t)=>`${t}${e}`,ce=new Map,le=e=>{if((e=>e.hasOwnProperty("data"))(e)){return{data:Array.isArray(e.data)?e.data:[],pagination:e.hasOwnProperty("pagination")?e.pagination:null}}return{data:Array.isArray(e)?e:[],pagination:null}},de={isDefined:(e,t)=>Object.keys(t.callbacks).some(t=>t.includes("commandbar-search-"+e)),set:(e,t)=>{const n=se(e,"commandbar-search-"),{data:i,pagination:o}=le(t);ce.set(n,o),(0,d.Kb)().addContext(n,i)},append:(e,t)=>{const n=se(e,"commandbar-search-"),{data:i,pagination:o}=le(t),a=(0,d.Kb)().shareContext()[n];Array.isArray(a)?(0,d.Kb)().addContext(n,[...a,...i]):(0,d.Kb)().addContext(n,i),ce.set(n,o)},get:(e,t)=>{const n=se(e,"commandbar-search-"),i=t.context[n],o=t.context[e];return i&&!Array.isArray(i)&&console.log(`Client search results for ${e} must be an array`),i||o},clear:e=>{const t=se(e,"commandbar-search-");(0,d.Kb)().removeContext(t),ce.delete(t)},getNextPageResults:async(e,t,n,i)=>{const o=i||li(e);if(o){const i=se(o,"commandbar-search-"),r=ce.get(i);if(r){n(!0);try{ce.delete(i);const n=e.callbacks[i];if(n){const e=await n(t,r);de.append(o,e)}}catch(a){}n(!1)}}}},ue=de,he=(e,t)=>Object.keys(t.callbacks).some(t=>t.includes("commandbar-initialvalue-"+e)),me=(e,t,n)=>{const i=e=>({isValid:!1,isValidReason:e}),o=e.arguments[t];if(!o)return((e,t,n)=>{E.m.get().exception(m.j.FILTER,{errorMsg:e,command:t.id,commandText:t.text,detail:n})})("Arg parsing",e,`Config for argument ${t} is missing.`),i(`Config for ${t} is missing.`);switch(o.type){case"function":return o.value in n.callbacks&&n.callbacks[o.value]?{isValid:!0,isValidReason:""}:i(`Function ${o.value} is not a valid callback`);case"context":const e=C()(n.context,o.value);return ue.isDefined(o.value,n)||he(o.value,n)?{isValid:!0,isValidReason:""}:void 0===e?i(o.value+" isn't defined in context."):Array.isArray(e)?0===e.length?i(o.value+" is an empty array in context."):{isValid:!0,isValidReason:""}:i(o.value+" isn't an array in context.");case"dependent":default:return{isValid:!0,isValidReason:""}}},pe=(e,t,n)=>{const i=e=>({isClickable:!1,isClickableReason:e});if(["clickByXpath","clickBySelector","click"].includes(e.template.type)){let t;try{t=e.template.value.map(e=>A(e,n,!0,!0))}catch(o){return i(o.toString())}if(!R(t[0]))return i(`Cannot find element to click: [${t[0]}]`)}return{isClickable:!0,isClickableReason:""}},ge=(e,t,n)=>{let i=e.filter(e=>e.length>0);const o=e=>({passed:!1,reason:e});i=i.map(e=>e.replace(/[{}]/g,"").replace(/('|")/g,'"'));for(const s of i)if(!re.isAllowable(s)){return o(n+": sanitization check failed.")}const a=i.join(" && ");try{const e=new Function("context",`if (${a}) {return true} else {return false}`)(t.context);return"boolean"===typeof e?e?{passed:!0,reason:""}:o(n+": condition is false."):o(n+": statement didn't produce a boolean")}catch(r){return o(`${n}: ${r}`)}},fe={isValid:(e,t)=>{const n=Object.keys(e.command.arguments);for(const i of n){const{isValid:n,isValidReason:o}=me(e.command,i,t);if(!n)return{isValid:n,isValidReason:o};const{isClickable:a,isClickableReason:r}=pe(e.command,0,t);if(!a)return{isValid:a,isValidReason:r}}return{isValid:!0,isValidReason:""}},isAvailable:(e,t)=>{let n=[];if(e instanceof Ie&&(n=e.command.availability),0===n.length)return{isAvailable:!0,isAvailableReason:""};const{passed:i,reason:o}=ge(n,t,"Availability condition");return i?{isAvailable:!0,isAvailableReason:""}:{isAvailable:!1,isAvailableReason:o}},runBooleanConditions:ge};var ve=n(87582),be=n.n(ve);const ye=(e,t)=>{let{currentStep:n}=hi.currentStepAndIndex(t),i={...t,simulation:!0};if(!(n instanceof Xn))throw new w("Simulation error: Invalid simulation step.",i);const o=e=>{if(0===e.length)throw new w("Step has no valid options",i);return e[Math.floor(Math.random()*Math.floor(e.length))]};let a,r=!1;for(;void 0!==n;)r?n instanceof Vn?a=new Wt(i,"SampleTextInput","SampleTextInput"):n.hasOwnProperty("argument")&&"provided"===n.argument.type&&"time"===n.argument.value?a=new Wt(i,"today",{label:"today",date:be().now()}):n.hasOwnProperty("argument")&&"dependent"===n.argument.type?a=new Wt(i,"SampleDependentParameter",{label:"SampleDependentParameter",value:"SampleDependentParameter"}):si(n)||ci(n,t)?a=new Wt(i,"SampleFunctionParameter",{label:"SampleFunctionParameter",value:"SampleFunctionParameter"}):n.hasOwnProperty("argument")&&ue.isDefined(n.argument.value,t)?a=new Wt(i,"SampleSearchParameter",{label:"SampleSearchParameter",value:"SampleSearchParameter"}):(i=ii(i),a=o(i.options)):(a=e,r=!0),i=a.choose(i,void 0),i=ni(i),n=hi.currentStepAndIndex(i).currentStep},xe={simulate:(e,t)=>{try{ye(e,t)}catch(n){if(n instanceof w)return{isExecutable:!1,isExecutableReason:n.message};throw E.m.get().exception(m.j.SIMULATE_FAILED,n),n}return{isExecutable:!0,isExecutableReason:""}}};function Se(e,t){return e.sort_key===t.sort_key?e.id-t.id:null===t.sort_key||void 0===t.sort_key?-1:null===e.sort_key||void 0===e.sort_key?1:e.sort_key-t.sort_key}function Ce(e,t,n){const i=e[t.id.toString()],o=e[n.id.toString()];return i===o?Se(t,n):void 0===o?-1:void 0===i?1:o-i}const Ee=["revelio:editor","sudo editor","open editor"];function we(e){return Ee.includes(e.toLowerCase())}function ke(e){return"string"===typeof e||("number"===typeof e||"boolean"===typeof e)}var Te=n(40782);class Ie extends W{constructor(e,t,n){super(e,"command",n?n.label:A(t.text,e,!0,!1),t.text),this.command=void 0,this.isRecommended=void 0,this.isValid=e=>fe.isValid(this,e),this.isAvailable=e=>fe.isAvailable(this,e),this.isExecutable=e=>e.simulation?{isExecutable:!0,isExecutableReason:""}:xe.simulate(this,e),this._isRecommended=e=>{var t;if("None"===(null===(t=e.organization)||void 0===t?void 0:t.recommendations_type))return!1;if(!this.command.recommend_conditions||0===this.command.recommend_conditions.length)return!1;const{passed:n}=fe.runBooleanConditions(this.command.recommend_conditions,e,"Recommendations:");return n},this.choose=(e,t,n)=>{const{currentStep:i}=hi.currentStepAndIndex(e),o=i instanceof Xn?i.resource:null;return Ie.chooseCommandOption(this,e,o,t,n)},this.shortcut=e=>{const t=H();let n=[];this.command.shortcut_mac&&([B.MAC].includes(t)?n=this.command.shortcut_mac:[B.WINDOWS,B.LINUX].includes(t)&&(n=this.command.shortcut_win));const o=(()=>{var e,t;if("command.shortcut_mac"===(null===(e=this.fuseMatches[0])||void 0===e?void 0:e.key)||"command.shortcut_win"===(null===(t=this.fuseMatches[0])||void 0===t?void 0:t.key)){var n;const e=null===(n=this.fuseMatches[0])||void 0===n?void 0:n.indices[0],t=e=>e[1]-e[0]+1,i=2;if(!!e&&2===e.length&&t(e)>=i)return!0}return!1})(),a=i.createElement(ne,{keys:n,highlight:o});return o?i.createElement(Te.Z,{prefixCls:"commandbar-tooltip",overlay:i.createElement("span",{style:{fontFamily:e.main.fontFamily}},"You can use this hotkey when the bar is closed."),placement:"right"},i.createElement("div",null,a)):a},this.icon=(e,t)=>{const{color:n,opacity:o,useDefaultSVGColor:a}=this.iconColorBase(e,t),r={color:"admin"===this.command.template.type?"orange":n,opacity:o};return i.createElement($,{icon:this.command.icon,default:J(this.command),style:r,useDefaultSVGColor:a})},this.renderLabel=e=>i.createElement("span",{style:{color:"inherit"}},W.highlight("label",this.label,this.fuseMatches,this.fuseScore,e,!1)),this.renderOption=(e,t,n)=>{let{isDisabled:o,isDisabledReason:a}=this.optionDisabled;if(!o){const{isValid:e,isValidReason:t}=this.isValid(n);e||(o=!e,a=t)}const r=this.icon(e,t);let s=e.option.color;o?s=e.optionDisabled.color:t&&(s=e.optionSelected.color);const l=!this.command.is_live&&n.isAdmin&&i.createElement("span",null,i.createElement(te,{color:c()("lightgrey")},"Draft")," "),d=(this.command.explanation||o)&&i.createElement(i.Fragment,null,o&&n.isAdmin&&i.createElement("span",{style:{color:"orange"}},a),this.command.explanation&&!o&&i.createElement("span",null,W.highlight("command.explanation",this.command.explanation,this.fuseMatches,this.fuseScore,e,!0))),u=this.shortcut(e),h=Object.keys(this.command.arguments).length>0&&i.createElement("span",{style:{marginLeft:10,marginTop:6,color:t?e.optionSelected.iconColor:e.option.iconColor}},i.createElement(Z.mGl,null)),m=this.renderLabel(e);return i.createElement(Q,{label:m,color:s,type:"command",icon:r,draft:l,description:d,shortcut:u,goForward:h,isFocused:t,theme:e})},this.preSelectIfApplicable=(e,t)=>{const n=e.argument;if(void 0===n.preselected_key)return e;if("string"!==typeof n.preselected_key)return e;const i=C()(t.context,n.preselected_key);if(void 0===i||null===i)return e;if(e instanceof Gn){const o=Array.isArray(i)?i:[i];let a=e;return o.forEach(e=>{const i=Wt.convertParameterToOption(t,e,n);a=a.select(i)}),a}{const o=Wt.convertParameterToOption(t,i,n);return e.select(o)}},this.command=t,this.isRecommended=this._isRecommended(e),n?this.optionDisabled=n.optionDisabled:this._isDisabled(e)}}Ie.sort=(e,t,n)=>{const i=[];return e&&i.push(Ce.bind({},e)),function(e,t,n){for(const i of e){const e=i(t,n);if(0!==e)return e}return 0}(i,t.command,n.command)},Ie.chooseCommandOption=(e,t,n,i,o)=>{const{currentStepIndex:a}=hi.currentStepAndIndex(t),r=Object.keys(e.command.arguments).map(t=>({...e.command.arguments[t],userDefinedName:e.command.arguments[t].label||t,userDefinedValue:t})).sort((e,t)=>e.order_key-t.order_key).map(e=>{switch(e.type){case"set":case"dependent":case"context":case"function":return"multi-select"===e.input_type?new Gn(e):new jn(e);case"provided":if("time"===e.value)return new jn(e);if("text"===e.value)return new Vn(e);throw new Error("Invalid provided arg type");default:throw new Error("Invalid arg type")}}).map(i=>{let o=i;if((o instanceof jn||o instanceof Gn||o instanceof Vn)&&(o=e.preSelectIfApplicable(o,t)),n&&(i instanceof jn||i instanceof Gn||i instanceof Vn)&&void 0!==i.argument&&"context"===i.argument.type&&i.argument.value===n.category.contextKey){const e=new Wt(t,n.label,n.parameter);o=i.select(e).fulfill(t)}return o}),s=[...t.steps.map((t,n)=>a===n?t.select(e):t),...r,new Wn(e.command,o||!1)],c={...t,steps:s};if(t.simulation)return c;i&&i({type:"updateFulfillAndRebase",updatedState:c})};var De=n(83866),Ae=n.n(De),_e=n(30754),Pe=n.n(_e);const Oe=["next","this","tomorrow","today"],Re=["1st","2nd","3rd"],Le=["January","February","March","April","May","June","July","August","September","October","November","December"],Ne=["tomorrow","tonight","today","evening","yesterday","weekend"],Me=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Be=["week","weekend","month"],He=["minutes","hours","days","weeks","months","years"],ze=["minute","hour","day","week","month","year"],Fe=["hour","day","week","month","year"],Ze=["hours","days","weeks","months","years"],Ue=["today at 3pm","tomorrow at 4pm","Friday at 5pm"],We=8,je=0,Ke={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",15:"fifteen",20:"twenty",30:"thirty"},Ge=["in a few minutes","in an hour","in a minute","in a day","in a week","in two weeks","in a month",...Ne],Ve=["in a day","in a week","in two weeks","in a month",...Ne];var Xe=n(428);function Ye(e,t){const n=new Date(e.getTime());return n.setDate(e.getDate()+(7+t-e.getDay())%7),n}const Je=()=>Ye(new Date,6),qe=Xe.casual.clone();qe.refiners.push({refine:(e,t)=>(t.forEach(e=>{const t=e.start.get("hour");!e.start.isCertain("meridiem")&&t>0&&t<12&&(e.start.assign("meridiem",1),e.start.assign("hour",t+12))}),t)}),qe.parsers.push({pattern:()=>/\bthis weekend\b/,extract:(e,t)=>{const n=Je();return{day:n.getDate(),month:n.getMonth()+1,hour:8,minute:0,meridiem:0}}}),qe.parsers.push({pattern:()=>/\bnext weekend\b/i,extract:(e,t)=>{const n=(()=>{const e=new Date;return e.setDate(e.getDate()+7),Ye(e,6)})();return{day:n.getDate(),month:n.getMonth()+1,hour:8,minute:0,meridiem:0}}}),qe.parsers.push({pattern:()=>/\bweekend\b/i,extract:(e,t)=>{const n=Je();return{day:n.getDate(),month:n.getMonth()+1,hour:8,minute:0,meridiem:0}}});const $e=e=>qe.parse(e,void 0),Qe={someday:()=>({type:"datetime",date:be()(ot())}),sometime:()=>({type:"datetime",date:be()(ot())})},et=(e,t)=>{const n=null===t||void 0===t?void 0:t.split(" "),i=n&&n[0],o=e.split(" "),a=o[0];return t&&"in"===(null===i||void 0===i?void 0:i.toLocaleLowerCase())?t:"an"===a.toLowerCase()?"in "+e:"on"===a.toLowerCase()?e:Le.find(e=>e.toLowerCase().includes(a.trim().toLowerCase()))||Me.find(e=>e.toLowerCase().includes(a.trim().toLowerCase()))?(o.unshift("on"),o.join(" ")):e},tt=e=>{const t=e.split(" ")[0];return Le.find(e=>e.toLowerCase()===t.toLowerCase())},nt=e=>["8am","9am","10am"].map(t=>e.concat(t).join(" ")),it=(e,t,n)=>["morning","noon","afternoon","evening","midnight","tonight","night"].find(t=>e.toLowerCase().includes(t))?n:0===t?t:t||We,ot=(e=new Date,t=new Date(2050,0,1))=>new Date(e.getTime()+Math.random()*(t.getTime()-e.getTime())),at=(e,t)=>e.split(" ")[t],rt=e=>Object.keys(Qe).some(t=>e.startsWith(t)),st=(e,t,n)=>e.map(e=>({type:"datetime",specificType:t,label:et(e.text,n),date:be()({year:e.start.get("year"),month:e.start.get("month")-1,day:e.start.get("day"),hour:it(e.text,e.start.knownValues.hour,e.start.impliedValues.hour),minute:e.start.knownValues.minute||je})})),ct=e=>Object.keys(Qe).filter(t=>t===e).reduce((e,t)=>{const n={label:t,...Qe[t]()};return e.concat(n)},[]),lt=(e,t)=>e.reduce((e,n)=>{const i=$e(n);return e.concat(...st(i,t,n))},[]),dt=(e,t)=>lt(e,t),ut=(e,t,n,i)=>{if(!n)return lt(Be.map(e=>`${t} ${e}`),e);const o=Me.concat(Be).filter(e=>e.startsWith(n));return o.length&&!i?lt(o.map(e=>`${t} ${e}`),e):void 0},ht=(e,t)=>{const n=1===parseInt(e,10);return lt([`in ${e} ${n?"day":"days"}`,`in ${e} ${n?"week":"weeks"}`],t)},mt=e=>e.map(e=>"1s"===e?"1st":"2n"===e?"2nd":"3r"===e?"3rd":e),pt=(e,t)=>{const n=e.split(" ")[0],i=e.split(" ")[1];if(""!==i&&i)return st($e(e),t);const o=Re.map(e=>`${n} ${e}`);return lt(o,t)},gt=e=>e.map((e,t)=>{if(!e)return e;if(e.length<1)return e;if(e.toLowerCase().startsWith("mon")&&2===t)return e;return Me.filter(t=>t.toLowerCase().startsWith(e.toLowerCase()))[0]||e}),ft=e=>e.map((e,t)=>{if(!e||e.length<3)return e;if(e.toLowerCase().startsWith("mon")&&2===t)return e;return Le.filter(t=>t.toLowerCase().startsWith(e.toLowerCase()))[0]||e}),vt=e=>e.map(e=>{if(e.length<2)return e;return Oe.find(t=>t.startsWith(e))||e}),bt=e=>e.map(e=>{const t=e.indexOf("t");if(-1===t)return e;const n=e.slice(0,t);return!n||isNaN(+n)?e:n}),yt=1,xt=["today","tomorrow","next Monday","next week"];function St(e){return/^\+?(0|[1-9]\d*)$/.test(e)}const Ct=e=>[vt,ft,bt,gt,mt].reduce((e,t)=>t(e),e.split(" ")).join(" "),Et={in:(e,t,n,i)=>{const o=(a=n,isNaN(+a)?Object.keys(Ke).find(e=>Ke[e].includes(a)):+a);var a;if(Le.includes(n))return st($e(`${t} ${n}`),e);const r=((e,t)=>e?t===yt?ze:Fe:t===yt?He:Ze)(1===o||"one"===o,e);if(!i){const n=r.map(e=>`${t} ${o} ${e}`);return lt(n,e)}const s=r.find(e=>e.startsWith(i));if(s){const n=`${t} ${o} ${s}`;return st($e(n),e,n)}},on:(e,t,n,i,o)=>{if(!n)return lt(Me.map(e=>"on "+e),e);const a=Me.find(e=>e.toLowerCase().includes(n.trim().toLowerCase()));if(a&&!i)return st($e(`${t} ${a}`),e);if("at"!==i)return st($e(o),e);const r=o.split(" "),s=r.indexOf("at");if(-1!==s&&0!==s&&r.length-s<3){const t=r[r.length-1];return t&&"at"!==t?st($e(o),e):lt(nt(r),e)}return st($e(o),e)},this:ut,next:ut,at:(e,t,n,i,o)=>n?st($e(o),e):lt(Ue,e)},wt=["this day","this month","this weekend","next day","next month","last day","last month","last Monday","last week","last weekend","today","tomorrow","on Monday","on Tuesday","on Wednesday","on Thursday","on Friday","on Saturday","on Sunday","weekend","week","at 3pm","at 8pm"],kt=(e,t)=>{const n=Pe().go(e,wt).map(({target:e})=>e);return lt(n,t)},Tt=e=>{const t=Ct(e);if(!t)return dt(Ge,yt);const n=Ge.filter(e=>e.toLowerCase().startsWith(t.toLowerCase()));if(n.length)return lt(n,yt);const i=at(t,0),o=at(t,1),a=at(t,2);if(St(i)&&!o)return ht(i,yt);const r=Et[i];if(r){const n=r(yt,i,o,a,t);if(null!==n&&void 0!==n&&n.length)return n;const s=st($e(t),yt,t);return s.length?s:kt(e,yt)}if(rt(t)){const n=ct(t);return n.length?n:kt(e,yt)}const s=t.split(" "),c=s.map(e=>e.toLowerCase()).indexOf("at");if(-1!==c&&0!==c&&s.length-c<3){const n=s[s.length-1];if(n&&"at"!==n){const n=st($e(t),yt,t);return n.length?n:kt(e,yt)}const i=lt(nt(s),yt);return i.length?i:kt(e,yt)}if(tt(t)){const n=pt(t,yt);return n.length?n:kt(e,yt)}const l=st($e(t),yt,t);return l.length?l:kt(e,yt)},It={[yt]:Tt,2:e=>{const t=Ct(e);if(!t)return dt(xt,2);const n=Ve.filter(e=>e.toLowerCase().startsWith(t.toLowerCase()));if(n.length)return lt(n,2);const i=at(t,0),o=at(t,1),a=at(t,2);if(St(i)&&!o){const t=ht(i,2);return t.length?t:kt(e,yt)}const r=Et[i];if(r){const n=r(2,i,o,a,t);if(null!==n&&void 0!==n&&n.length)return n;const s=st($e(t),2,t);return s.length?s:kt(e,2)}if(rt(t)){const n=ct(t);return n.length?n:kt(e,2)}const s=t.split(" "),c=s.map(e=>e.toLowerCase()).indexOf("at");if(-1!==c&&0!==c&&s.length-c<3){const n=s[s.length-1];if(n&&"at"!==n){const n=st($e(t),2,t);return n.length?n:kt(e,2)}const i=lt(nt(s),2);return i.length?i:kt(e,2)}if(tt(t)){const n=pt(t,2);return n.length?n:kt(e,2)}const l=st($e(t),2,t);return l.length?l:kt(e,2)}},Dt={search:e=>{const{inputValue:t="",type:n}=e,i=It[n];return i?i(t):Tt(t)},display:(e,t,n=!0)=>{switch(t){case yt:return n?e.format("llll").toUpperCase():e.format("llll");case 2:return n?e.format("ddd, MMM D, YYYY").toUpperCase():e.format("ddd, MMM D, YYYY");case 3:default:return n?e.format("llll").toUpperCase():e.format("llll")}},clientReturnValue:e=>e.toDate()};function At(e){return"string"===typeof e}function _t(e){return!0===e||!1===e||function(e){return function(e){return"object"===typeof e}(e)&&null!==e}(e)&&"[object Boolean]"===Ot(e)}function Pt(e){return void 0!==e&&null!==e}function Ot(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function Rt(e,t){let n=[],i=!1;const o=(e,t,a)=>{if(Pt(e))if(t[a]){const r=e[t[a]];if(!Pt(r))return;if(a===t.length-1&&(At(r)||function(e){return"number"===typeof e}(r)||_t(r)))n.push(function(e){return null==e?"":function(e){if("string"===typeof e)return e;let t=e+"";return"0"===t&&1/e===-1/0?"-0":t}(e)}(r));else if(function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Ot(e)}(r)){i=!0;for(let e=0,n=r.length;e<n;e+=1)o(r[e],t,a+1)}else t.length&&o(r,t,a+1)}else n.push(e)};return o(e,At(t)?t.split("."):t,0),i?n:n[0]}const Lt=["label","command.tags","command.explanation","description","category.label","parameter.synonyms","breadcrumbs"],Nt=e=>e&&0!==e.length?Lt.includes(e[0].key)?[]:e.filter(e=>!Lt.includes(e.key)):[],Mt=e=>{const t=Nt(e.matches);if(0===t.length)return null;const n=e.formatKey?e.formatKey(t[0].key,t[0].value):t[0].key,o=e.formatValue?e.formatValue(t[0].value):t[0].value;return i.createElement("span",{style:{fontSize:11,width:175,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},n,o)},Bt=e=>ai(e)&&!!e.argument.allow_create,Ht=(e,t,n)=>{var i,o;return new Wt(e,"Create new "+(null!==(i=null===(o=t.argument)||void 0===o?void 0:o.allow_create_label)&&void 0!==i?i:t.argument.userDefinedName),{_createdByCommandBar:!0,value:n})},zt=Bt,Ft=e=>!!e._createdByCommandBar,Zt=({options:e,executionPathState:t,currentStep:n,inputValue:i})=>{if(!Bt(n))return e;if(e.length>0&&!(e[0]instanceof Wt))return e;if(!i.length)return e;return e.find(e=>e.label===i)?e:[...e,Ht(t,n,i)]},Ut=e=>{const{prefix:t,suffix:n,delimiter:o,theme:a}=e;return i.createElement("div",null,i.createElement("span",null,`${t}${o} `),i.createElement("span",{style:{textDecoration:n&&a.base.primary+" solid underline",textUnderlinePosition:"under",opacity:.7}},n||"_"))};class Wt extends W{constructor(e,t,n,o){super(e,"parameter",t,t),this.parameter=void 0,this.tags=void 0,this.searchOptions=void 0,this.description=void 0,this.breadcrumbs=void 0,this.isValid=e=>({isValid:!0,isValidReason:""}),this.isAvailable=e=>fe.isAvailable(this,e),this.isExecutable=e=>({isExecutable:!0,isExecutableReason:""}),this.choose=(e,t)=>{const{currentStep:n,currentStepIndex:i}=hi.currentStepAndIndex(e);if(void 0===n)throw new Error("Invalid parameter step");if(n instanceof jn||n instanceof Vn){const n=e.steps.map((e,t)=>i===t?e.select(this):e),o={...e,steps:n};return e.simulation?o:void t({type:"updateFulfillAndRebase",updatedState:o})}if(n instanceof Gn){const n=e.steps.map((e,t)=>i===t?e.select(this):e),o={...e,steps:n};return e.simulation?o:void t({type:"update",updatedState:o})}throw new Error("Unknown parameter step")},this.icon=(e,t,n)=>{const{color:o,opacity:a,useDefaultSVGColor:r}=this.iconColorBase(e,t),s=!!this.getReservedField("__preserveSVG"),c=this.getReservedField("icon"),{currentStep:l}=hi.currentStepAndIndex(n);if(l instanceof Vn)return i.createElement("div",null);if(l instanceof Gn){return Wt.isSelected(this,l)?Gn.selectedIcon(e,{userDefinedIcon:c,useDefaultSVGColor:r||s}):c?i.createElement($,{icon:c,default:i.createElement("div",{style:{minWidth:18,display:"inline-block"}}),style:{color:o,minWidth:18},useDefaultSVGColor:r||s}):Gn.defaultIcon(o,a)}if(l instanceof jn){var d;const t=Wt.isSelected(this,l),n=c||(null===(d=this.searchOptions)||void 0===d?void 0:d.icon),u=!c;if(t)return Gn.defaultSelectedIcon(e.optionSelected.iconColor);if(n){const e={color:o,minWidth:18,opacity:u?a:void 0};return i.createElement($,{icon:n,default:i.createElement("div",{style:{minWidth:18,display:"inline-block"}}),style:e,useDefaultSVGColor:r||s})}return jn.defaultIcon(o,a)}return i.createElement("div",{style:{minWidth:18}})},this.addOn=(e,t,n)=>this.isDateTimeOption()?i.createElement("div",{style:{fontSize:parseInt(e.option.fontSize,10)-2,fontFamily:"monospace",color:e.option.color}},Dt.display(this.parameter.date,this.parameter.specificType)):null,this.renderOption=(e,t,n)=>{var o;const{currentStep:a}=hi.currentStepAndIndex(n),r=this.icon(e,t,n),s=t?e.optionSelected.color:e.option.color,c=this.addOn(e,t,n);let l=this.label;const d=null===(o=this.searchOptions)||void 0===o?void 0:o.description_field,u=!!d&&C()(this.parameter,d),h=this.getReservedField("__extraHTML"),m=(p=this.fuseMatches,Nt(p).length>0&&i.createElement(Mt,{matches:this.fuseMatches,formatKey:(t,n)=>{var o;const a=null===(o=this.tags.find(({value:e})=>Array.isArray(e)?e.includes(n):n===e))||void 0===o?void 0:o.key;return a?i.createElement("span",{style:{color:e.searchableFieldMatch.color,background:e.searchableFieldMatch.background,paddingTop:e.searchableFieldMatch.paddingTop,paddingBottom:e.searchableFieldMatch.paddingBottom,paddingLeft:e.searchableFieldMatch.paddingLeft,paddingRight:e.searchableFieldMatch.paddingRight,marginRight:e.searchableFieldMatch.marginRight,marginLeft:e.searchableFieldMatch.marginLeft,borderRadius:e.searchableFieldMatch.borderRadius,lineHeight:e.searchableFieldMatch.lineHeight,overflow:"hidden",display:"inline-flex"}},""+(e=>{let t=e.split(".")[0];return t=t.replace("_"," "),t=t.replace(/([A-Z])/g," $1"),t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()})(a)):""},formatValue:t=>W.highlight("tags.value",t,this.fuseMatches,this.fuseScore,e,!1),theme:e}));var p;let g,f;m?g=m:u&&(g=W.highlight("description",u,this.fuseMatches,this.fuseScore,e,!0)),h&&/<\/?[a-z][\s\S]*>/i.test(h)&&(f=i.createElement("div",{dangerouslySetInnerHTML:{__html:h}})),a instanceof Vn&&"string"===typeof this.parameter&&(l=i.createElement(Ut,{prefix:this.label,suffix:this.parameter,delimiter:":",theme:e})),zt(a)&&Ft(this.parameter)&&(l=i.createElement(Ut,{prefix:this.label,suffix:this.parameter.value,delimiter:":",theme:e}));const v=W.highlight("breadcrumbs",this.getReservedField("__breadcrumbs"),this.fuseMatches,this.fuseScore,e,!0);return i.createElement(Q,{label:W.highlight("label",l,this.fuseMatches,this.fuseScore,e,!1),color:s,description:g,extra:f,type:"resource",icon:r,shortcut:c,isFocused:t,theme:e,breadcrumbs:v})},this.getReservedField=e=>{var t,n,i,o,a,r,s;switch(e){case"category":var c;if("string"===typeof(null===(t=this.parameter)||void 0===t?void 0:t.category))return null===(c=this.parameter)||void 0===c?void 0:c.category;break;case"icon":var l;if("string"===typeof(null===(n=this.parameter)||void 0===n?void 0:n.icon))return null===(l=this.parameter)||void 0===l?void 0:l.icon;break;case"__preserveSVG":var d;if(null!==(i=this.parameter)&&void 0!==i&&i.__preserveSVG)return null===(d=this.parameter)||void 0===d?void 0:d.__preserveSVG;break;case"__extraHTML":var u;if(null!==(o=this.parameter)&&void 0!==o&&o.__extraHTML&&"string"===typeof(null===(a=this.parameter)||void 0===a?void 0:a.__extraHTML))return null===(u=this.parameter)||void 0===u?void 0:u.__extraHTML;break;case"__breadcrumbs":var h;if(null!==(r=this.parameter)&&void 0!==r&&r.__breadcrumbs&&"string"===typeof(null===(s=this.parameter)||void 0===s?void 0:s.__breadcrumbs))return null===(h=this.parameter)||void 0===h?void 0:h.__breadcrumbs}},this.isDateTimeOption=()=>{var e,t,n;return"datetime"===(null===(e=this.parameter)||void 0===e?void 0:e.type)&&(null===(t=this.parameter)||void 0===t?void 0:t.date)instanceof be()&&"number"===typeof(null===(n=this.parameter)||void 0===n?void 0:n.specificType)},this.parameter=n,this.tags=((null===o||void 0===o?void 0:o.search_fields)||[]).map(e=>({key:e,value:Rt(n,e)})),this.searchOptions=o,this.description=(null===o||void 0===o?void 0:o.description_field)&&C()(this.parameter,o.description_field),this.breadcrumbs=this.getReservedField("__breadcrumbs"),this._isDisabled(e)}}Wt.convertParameterToOption=(e,t,n)=>{if(ke(t))return new Wt(e,t,t,void 0);{let i,o=n.label_field||"label";return N(n)&&(i=e.hackContextSettings[n.value.toString()],i&&i.label_field&&(o=i.label_field)),new Wt(e,C()(t,o),t,i)}},Wt.isSelected=(e,t)=>{var n;const i=null===t||void 0===t||null===(n=t.selected)||void 0===n?void 0:n.data;return Array.isArray(i)?i.some(t=>Ae()(e.parameter,t)):Ae()(e.parameter,i)};const jt=(e,t)=>{if(void 0===t||!Array.isArray(t))return!0;return!t.some((function(t){return!((e,t)=>{if(void 0===t)return!0;switch(t.operator){case"==":return C()(null===e||void 0===e?void 0:e.parameter,t.field)===t.value;case"!=":return C()(null===e||void 0===e?void 0:e.parameter,t.field)!==t.value;default:return!0}})(e,t)}))},Kt=(e,t,n,i)=>{let o;return o=ue.isDefined(n,e)?ue.get(n,e)||[]:C()(t,n),void 0===o?[]:(Array.isArray(o)&&o.length>5e4?o=o.slice(0,5e4):Array.isArray(o)||(o=[o]),o=o.map(t=>Wt.convertParameterToOption(e,t,i)),o)},Gt=(e,t)=>Yt(t).filter(t=>!!Object.keys(t.command.arguments).find(n=>"context"===t.command.arguments[n].type&&t.command.arguments[n].value===e)),Vt=(e,t,n)=>{const i=Object.keys(t.command.arguments).find(n=>"context"===t.command.arguments[n].type&&t.command.arguments[n].value===e.category.contextKey);if(!i)return!1;const o=t.command.arguments[i],a=new Wt(n,e.label,e.parameter);return jt(a,o.availability_condition)},Xt=(e,t)=>{if(ue.isDefined(e,t))return ue.get(e,t);{const n=t.context;if(n.hasOwnProperty(e)&&Array.isArray(n[e]))return n[e]}},Yt=e=>e.allCommands.filter(t=>!!e.testMode||!["admin"].includes(t.template.type)&&t.is_live).map(t=>new Ie(e,t)).filter(t=>!!e.testMode||!t.optionDisabled.isDisabled&&t.isValid(e)),Jt={available:e=>{const{currentStep:t}=hi.currentStepAndIndex(e);if(void 0===t)return[];if(t instanceof Xn){if(null!==t.resource){return Gt(t.resource.category.contextKey,e).filter(n=>Vt(t.resource,n,e))}{const t=Yt(e),n=(e=>{if(!e.organization)return[];const t=e.hackContextSettings,n=Object.keys(t).filter(n=>t[n].search&&!!Xt(n,e));n.sort((e,n)=>Se({sort_key:t[e].sort_key||0,id:0},{sort_key:t[n].sort_key||0,id:0}));const i=[];return n.forEach(n=>{const o=Gt(n,e),a=t[n],r=!!a.unfurl;Xt(n,e).forEach(t=>{var s;if(!n)return;const c=Qt.getLabel(t,n,e),l=e.activeObjects[n]&&(null===(s=e.activeObjects[n])||void 0===s?void 0:s.objectLabel),d=!!l&&!Array.isArray(l)&&l===c,u=new Qt(e,t,c,n,a);if(!r&&!d)return void i.push(u);o.filter(t=>Vt(u,t,e)).forEach(t=>{i.push(new en(e,t.command,t,u))})})}),i})(e);return[...t,...n]}}if(t instanceof jn||t instanceof Gn){if(!t.argument||!t.argument.type)return[];const n=t.argument;switch(t.argument.type){case"context":if(Object.keys(e.callbacks).find(e=>e==="commmandbar-initialvalue-"+t.argument.value))return[];const i=e.context;return((e,t)=>e.filter(e=>jt(e,t.availability_condition)))(Kt(e,i,t.argument.value,n),t.argument);case"provided":switch(t.argument.value){case"time":case"text":default:return[]}case"set":const o=t.argument.value;if(Array.isArray(o))return o.slice(0,5e4).map(n=>Wt.convertParameterToOption(e,n,t.argument));throw new Error(`Set for ${t.argument.userDefinedName} must be an array.`);case"dependent":const a=t.argument.value.split(".")[0],r=t.argument.value.split(".").slice(1).join("."),s=hi.selections(e)[a];try{return Kt(e,s,r,t.argument)}catch{return[]}break;case"function":return[]}}if(t instanceof Vn){var n;const i=t.argument.userDefinedName,o=(null===(n=t.selected)||void 0===n?void 0:n.data)||"";return[new Wt(e,i,o)]}throw new Error("Trying to calculate availability on invalid step.")}},qt=({visible:e,overlay:t,children:n,delay:o=500,placement:a,align:r})=>{const[s,c]=(0,i.useState)(!1);let l;return(0,i.useEffect)(()=>(e?l=setTimeout(()=>{c(!0)},o):(clearTimeout(l),c(!1)),()=>{clearTimeout(l)}),[e]),i.createElement(Te.Z,{prefixCls:"commandbar-tooltip",overlay:t,placement:a,trigger:"hover",visible:s,align:r},n)},$t=({commandsNumber:e,isFocused:t=!0,style:n})=>{const o=c()("#fff").darken(.4);return i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:o.css(),color:"rgba(0,0,0,0.85)",fontSize:"11px",fontWeight:700,opacity:t?.6:.2,height:14,padding:"0 4px",marginBottom:"2px",minWidth:22,borderRadius:2,boxShadow:`3px 3px ${o.darken(1).css()}, 6px 6px 0 ${o.darken(2).css()}`,...n}},e)};class Qt extends Wt{constructor(e,t,n,o,a){var r;super(e,n,t,a),this.category=void 0,this.cachedCommands=void 0,this.isValid=e=>({isValid:!0,isValidReason:""}),this.isAvailable=e=>({isAvailable:!0,isAvailableReason:""}),this.isExecutable=e=>({isExecutable:!0,isExecutableReason:""}),this.choose=(e,t)=>{const n=new Xn(this),i=[...e.steps,n],o={...e,steps:i};return e.simulation?o:void t({type:"updateFulfillAndRebase",updatedState:o})},this.icon=(e,t,n)=>{var o;const a=!!this.getReservedField("__preserveSVG"),{color:r,opacity:s,useDefaultSVGColor:c}=this.iconColorBase(e,t),l={color:r,opacity:s,minWidth:18},d=this.getReservedField("icon");return d?i.createElement($,{icon:d,default:i.createElement("div",{style:{minWidth:18,display:"inline-block"}}),style:l,useDefaultSVGColor:c||a}):i.createElement($,{icon:(null===(o=this.searchOptions)||void 0===o?void 0:o.icon)||null,default:i.createElement("div",{style:{minWidth:18,display:"inline-block"}}),style:l,useDefaultSVGColor:c||a})},this.getCommands=e=>(this.cachedCommands||(this.cachedCommands=Gt(this.category.contextKey,e)),this.cachedCommands),this.getDefaultCommandId=()=>{var e;return null===(e=this.searchOptions)||void 0===e?void 0:e.default_command_id},this.addOn=(e,t,n)=>{if(!this.getDefaultCommandId()||!t)return null;const o=this.getCommands(n),a=o.length>1,r=c()("#fff"),s={height:"20px",minWidth:"20px",padding:"0 4px"};return a?i.createElement(qt,{overlay:i.createElement("div",{style:{fontFamily:e.main.fontFamily,fontSize:e.main.fontSize,display:"flex",flexDirection:"column",alignItems:"center"}},i.createElement("div",null,"Show all commands"),i.createElement("div",null,i.createElement(te,{color:r,style:s},F()),"+",i.createElement(te,{color:r,style:s},"Enter"))),placement:"right",align:{offset:[20,0]},visible:t&&!!this.getDefaultCommandId(),delay:1e3},i.createElement($t,{commandsNumber:o.length,isFocused:t})):null},this.category={label:null!==(r=a.name)&&void 0!==r?r:o,contextKey:o,limit:null===a||void 0===a?void 0:a.max_options_count}}}Qt.getLabel=(e,t,n)=>{if(ke(e))return e.toString();{const i=Qt.getLabelField(t,n);return C()(e,i)}},Qt.getLabelField=(e,t)=>{if(t.hackContextSettings){const n=t.hackContextSettings[e];if(n&&n.label_field)return n.label_field}return"label"};class en extends Ie{constructor(e,t,n,o){super(e,t,n),this.resource=void 0,this.shortcut=()=>null,this.renderLabel=e=>i.createElement("span",null,W.highlight("label",this.label,this.fuseMatches,this.fuseScore,e,!1),this.resource&&i.createElement("span",{style:{margin:"0px 5px"}},">"),i.createElement("span",{style:{opacity:.6}},this.resource&&W.highlight("resource.label",this.resource.label,this.fuseMatches,this.fuseScore,e,!1))),this.choose=(e,t,n)=>Ie.chooseCommandOption(this,e,this.resource,t,n),this.resource=o}}var tn;let nn;!function(e){e[e.COMMAND_NAME=0]="COMMAND_NAME",e[e.ORG_NAME=1]="ORG_NAME",e[e.OS_CTRL_KEY=2]="OS_CTRL_KEY"}(nn||(nn={}));const on=e=>{const t=(0,d.Kb)()[u.Tc];return e.stepStartTime&&"string"===typeof t?`${t}-${e.stepStartTime.toString()}`:""},an=e=>e.isActive&&e.steps[e.currentStepIndex]?e.steps[e.currentStepIndex]:null,rn=e=>e.steps.length-1>e.currentStepIndex,sn=e=>e.steps.length>1&&e.currentStepIndex>0,cn=(e,t,n)=>{const i=an(e);return!!i&&i.canShowNext(e,t,n)},ln=e=>{let t={...e,timeSpent:hn(e)};return Nn.onboarding.completed(t),t={...t,isActive:!1,currentStepIndex:0,allowNext:!1,stepStartTime:void 0,timeSpent:[],steps:U.onboarding()},Nn.search.start(t,On.ONBOARDING),t},dn=(e,t)=>{var n;const i={...e,currentStepIndex:t},o=cn(i,"StepInitialization"),a=(null===(n=an(i))||void 0===n?void 0:n.hideBarAtStart)||!1;return{...i,allowNext:o,timeSpent:hn(e),hideBar:a}},un=e=>rn(e)?dn(e,e.currentStepIndex+1):ln(e),hn=e=>{const t=Date.now();if(e.stepStartTime){const n=(t-e.stepStartTime)/1e3,i={index:e.currentStepIndex,timeOnStep:n};return[...e.timeSpent,i]}return e.timeSpent},mn=e=>{if(0!==e.length)return e[Math.floor(Math.random()*e.length)]},pn=e=>e.isActive&&0===e.currentStepIndex&&void 0===e.stepStartTime,gn={isActive:!1,steps:[],currentStepIndex:0,allowNext:!1,hideBar:!1,activeCommand:void 0,stepStartTime:void 0,timeSpent:[],shouldTrack:!0},fn={...gn,steps:U.onboarding(),allowNext:U.onboarding()[0].canShowNext({...gn},"StepInitialization"),hideBar:null===(tn=U.onboarding()[0])||void 0===tn?void 0:tn.hideBarAtStart},vn=(e,t)=>{var n,i,o,a;switch(t.type){case"setSteps":const s=(null===(n=t.data)||void 0===n?void 0:n.steps)||[],c=s.length>0&&s[0].hideBarAtStart,l={...e,steps:s,currentStepIndex:0,hideBar:c,stepStartTime:void 0,timeSpent:[],shouldTrack:(null===(i=t.data)||void 0===i?void 0:i.shouldTrack)||!1};return{...l,allowNext:cn(l,"StepInitialization")};case"setCommands":const d=(e=>{return Array.isArray(e)&&0!==e.length?(t=e[0])&&t.hasOwnProperty("text")&&t.hasOwnProperty("id")&&t.hasOwnProperty("organization")&&t.hasOwnProperty("arguments")?e:e.filter(e=>e instanceof Ie&&!e.optionDisabled.isDisabled).map(e=>e.command):[];var t})(null===(o=t.data)||void 0===o?void 0:o.options)||[];return{...e,activeCommand:mn(d)};case"Boot":return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?e:{...e,isActive:!0,currentStepIndex:0};case"Shutdown":return{...e,isActive:!1};case"Exit":return(e=>{if(e.isActive){const t={...e,timeSpent:hn(e)};Nn.onboarding.exited(t)}return fn})(e);case"Previous":return(e=>sn(e)?dn(e,e.currentStepIndex-1):e)(e);case"Next":return un(e);case"Jump":return"number"===typeof(null===(a=t.data)||void 0===a?void 0:a.stepIndex)?dn(e,t.data.stepIndex):e;case"Start":var r;return pn(e)?((e,t)=>{const n={...e,stepStartTime:Date.now()};return Nn.onboarding.started(n,t),n})(e,null===(r=t.data)||void 0===r?void 0:r.trigger):e;default:if(!e.isActive||pn(e))return e;let u=e;if("CMDK"===t.type){if(!rn(e))return ln(e);u={...u,hideBar:!e.hideBar}}if("Enter"===t.type&&u.allowNext)return un(u);const h=cn(u,t.type,t.data),m=an(u);return h&&m?m.nextBtnText?(e=>({...e,allowNext:!0}))(u):un(u):u}};const bn=function(){var e="undefined"===typeof window,t=new Map,n=new Map,i=[];i.total=0;var o=[],a=[];function r(){t.clear(),n.clear(),o=[],a=[]}function s(e){for(var t=-9007199254740991,n=e.length-1;n>=0;--n){var i=e[n];if(null!==i){var o=i.score;o>t&&(t=o)}}return-9007199254740991===t?null:t}function c(e,t){var n=e[t];if(void 0!==n)return n;var i=t;Array.isArray(t)||(i=t.split("."));for(var o=i.length,a=-1;e&&++a<o;)e=e[i[a]];return e}function l(e){return"object"===typeof e}var d=function(){var e=[],t=0,n={};function i(){for(var n=0,i=e[n],o=1;o<t;){var a=o+1;n=o,a<t&&e[a].score<e[o].score&&(n=a),e[n-1>>1]=e[n],o=1+(n<<1)}for(var r=n-1>>1;n>0&&i.score<e[r].score;r=(n=r)-1>>1)e[n]=e[r];e[n]=i}return n.add=function(n){var i=t;e[t++]=n;for(var o=i-1>>1;i>0&&n.score<e[o].score;o=(i=o)-1>>1)e[i]=e[o];e[i]=n},n.poll=function(){if(0!==t){var n=e[0];return e[0]=e[--t],i(),n}},n.peek=function(n){if(0!==t)return e[0]},n.replaceTop=function(t){e[0]=t,i()},n},u=d();return function h(m){var p={single:function(e,t,n){return e?(l(e)||(e=p.getPreparedSearch(e)),t?(l(t)||(t=p.getPrepared(t)),((n&&void 0!==n.allowTypo?n.allowTypo:!m||void 0===m.allowTypo||m.allowTypo)?p.algorithm:p.algorithmNoTypo)(e,t,e[0])):null):null},go:function(e,t,n){if(!e)return i;var o=p.prepareSearch(e),a=o[0],r=n&&n.threshold||m&&m.threshold||-9007199254740991,d=n&&n.limit||m&&m.limit||9007199254740991,h=(n&&void 0!==n.allowTypo?n.allowTypo:!m||void 0===m.allowTypo||m.allowTypo)?p.algorithm:p.algorithmNoTypo,g=0,f=0,v=t.length,b=n&&(void 0===n.shouldSort||n.shouldSort),y=[];if(n&&n.keys)for(var x=n.scoreFn||s,S=n.keys,C=S.length,E=0;E<v;E++){for(var w=t[E],k=new Array(C),T=C-1;T>=0;--T){var I=Rt(w,_=S[T]);if(n.getFn&&(I=n.getFn(w,_,I)),I&&("string"===typeof I||Array.isArray(I)))try{if(Array.isArray(I)){if(0===I.length){k[T]=null;continue}const t=I.reduce((t,i)=>{if("string"!==typeof i)return t;if(!i)return t;const r=p.prepare(i),s=p.shouldExactSearch(i,n.minLengthForExactSearch)?p.exactSearch(e,i,r):h(o,r,a);return t?s&&s.score>t.score?s:t:s},null);k[T]=t}else{var D=p.getPrepared(I);const t=p.shouldExactSearch(I,n.minLengthForExactSearch)?p.exactSearch(e,I,D):h(o,D,a);k[T]=t}}catch(R){console.error(R),k[T]=null;continue}else k[T]=null}k.obj=w;var A=x(k);null!==A&&(A<r||(k.score=A,g<d?(b?u.add(k):y.push(k),++g):(++f,b?A>u.peek().score&&u.replaceTop(k):y.push(k))))}else if(n&&n.key){var _=n.key;for(E=v-1;E>=0;--E){if(I=c(w=t[E],_))l(I)||(I=p.getPrepared(I)),null!==(P=h(o,I,a))&&(P.score<r||(P={target:P.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:P.score,indexes:P.indexes,obj:w},g<d?(u.add(P),++g):(++f,P.score>u.peek().score&&u.replaceTop(P))))}}else for(E=v-1;E>=0;--E){var P;if(I=t[E])l(I)||(I=p.getPrepared(I)),null!==(P=h(o,I,a))&&(P.score<r||(g<d?(u.add(P),++g):(++f,P.score>u.peek().score&&u.replaceTop(P))))}if(0===g)return i;if(!b)return y;var O=new Array(g);for(E=g-1;E>=0;--E)O[E]=u.poll();return O.total=g+f,O},goAsync:function(t,n,o){var a=!1,r=new Promise((function(r,u){if(!t)return r(i);var h=(t=p.prepareSearch(t))[0],g=d(),f=n.length-1,v=o&&o.threshold||m&&m.threshold||-9007199254740991,b=o&&o.limit||m&&m.limit||9007199254740991,y=(o&&void 0!==o.allowTypo?o.allowTypo:!m||void 0===m.allowTypo||m.allowTypo)?p.algorithm:p.algorithmNoTypo,x=0,S=0;function C(){if(a)return u("canceled");var d=Date.now();if(o&&o.keys)for(var m=o.scoreFn||s,E=o.keys,w=E.length;f>=0;--f){for(var k=n[f],T=new Array(w),I=w-1;I>=0;--I){(_=c(k,A=E[I]))?(l(_)||(_=p.getPrepared(_)),T[I]=y(t,_,h)):T[I]=null}T.obj=k;var D=m(T);if(null!==D&&(!(D<v)&&(T.score=D,x<b?(g.add(T),++x):(++S,D>g.peek().score&&g.replaceTop(T)),f%1e3===0&&Date.now()-d>=10)))return void(e?setImmediate(C):setTimeout(C))}else if(o&&o.key)for(var A=o.key;f>=0;--f){if(_=c(k=n[f],A))if(l(_)||(_=p.getPrepared(_)),null!==(P=y(t,_,h))&&!(P.score<v)&&(P={target:P.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:P.score,indexes:P.indexes,obj:k},x<b?(g.add(P),++x):(++S,P.score>g.peek().score&&g.replaceTop(P)),f%1e3===0&&Date.now()-d>=10))return void(e?setImmediate(C):setTimeout(C))}else for(;f>=0;--f){var _,P;if(_=n[f])if(l(_)||(_=p.getPrepared(_)),null!==(P=y(t,_,h))&&!(P.score<v)&&(x<b?(g.add(P),++x):(++S,P.score>g.peek().score&&g.replaceTop(P)),f%1e3===0&&Date.now()-d>=10))return void(e?setImmediate(C):setTimeout(C))}if(0===x)return r(i);for(var O=new Array(x),R=x-1;R>=0;--R)O[R]=g.poll();O.total=x+S,r(O)}e?setImmediate(C):C()}));return r.cancel=function(){a=!0},r},highlight:function(e,t,n){if(null===e)return null;void 0===t&&(t="<b>"),void 0===n&&(n="</b>");for(var i="",o=0,a=!1,r=e.target,s=r.length,c=e.indexes,l=0;l<s;++l){var d=r[l];if(c[o]===l){if(a||(a=!0,i+=t),++o===c.length){i+=d+n+r.substr(l+1);break}}else a&&(a=!1,i+=n);i+=d}return i},prepare:function(e){if(e)return{target:e,_targetLowerCodes:p.prepareLowerCodes(e),_nextBeginningIndexes:null,score:null,indexes:null,obj:null}},prepareSlow:function(e){if(e)return{target:e,_targetLowerCodes:p.prepareLowerCodes(e),_nextBeginningIndexes:p.prepareNextBeginningIndexes(e),score:null,indexes:null,obj:null}},prepareSearch:function(e){if(e)return p.prepareLowerCodes(e)},getPrepared:function(e){if(e.length>999)return p.prepare(e);var n=t.get(e);return void 0!==n||(n=p.prepare(e),t.set(e,n)),n},getPreparedSearch:function(e){if(e.length>999)return p.prepareSearch(e);var t=n.get(e);return void 0!==t||(t=p.prepareSearch(e),n.set(e,t)),t},algorithm:function(e,t,n){for(var i=t._targetLowerCodes,r=e.length,s=i.length,c=0,l=0,d=0,u=0;;){if(n===i[l]){if(o[u++]=l,++c===r)break;n=e[0===d?c:d===c?c+1:d===c-1?c-1:c]}if(++l>=s)for(;;){if(c<=1)return null;if(0===d){if(n===e[--c])continue;d=c}else{if(1===d)return null;if((n=e[(c=--d)+1])===e[c])continue}l=o[(u=c)-1]+1;break}}c=0;var h=0,m=!1,g=0,f=t._nextBeginningIndexes;null===f&&(f=t._nextBeginningIndexes=p.prepareNextBeginningIndexes(t.target));var v=l=0===o[0]?0:f[o[0]-1];if(l!==s)for(;"number"===typeof l;)if(l>=s){if(c<=0){if(++h>r-2)break;if(e[h]===e[h+1])continue;l=Number(v);continue}--c,l=f[a[--g]]}else{if(e[0===h?c:h===c?c+1:h===c-1?c-1:c]===i[l]){if(a[g++]=l,++c===r){m=!0;break}++l}else l=Number(f[l])}if(m)var b=a,y=g;else b=o,y=u;for(var x=0,S=-1,C=0;C<r;++C){S!==(l=b[C])-1&&(x-=l),S=l}m?0!==h&&(x+=-20):(x*=1e3,0!==d&&(x+=-20)),x-=s-r,t.score=x,t.indexes=new Array(y);for(C=y-1;C>=0;--C)t.indexes[C]=b[C];return t},shouldExactSearch:function(e,t){return void 0!==t&&e.length>t},exactSearch:function(e,t,n){const i=t.toLowerCase().indexOf(e.toLowerCase());if(-1===i)return null;for(var o=[],a=i;a<=i+e.length;a++)o.push(a);return{...n,score:-50,indexes:o}},algorithmNoTypo:function(e,t,n){for(var i=t._targetLowerCodes,r=e.length,s=i.length,c=0,l=0,d=0;;){if(n===i[l]){if(o[d++]=l,++c===r)break;n=e[c]}if(++l>=s)return null}c=0;var u=!1,h=0,m=t._nextBeginningIndexes;null===m&&(m=t._nextBeginningIndexes=p.prepareNextBeginningIndexes(t.target));l=0===o[0]?0:m[o[0]-1];if(l!==s)for(;"number"===typeof l;)if(l>=s){if(c<=0)break;--c,l=m[a[--h]]}else{if(e[c]===i[l]){if(a[h++]=l,++c===r){u=!0;break}++l}else l=m[l]}if(u)var g=a,f=h;else g=o,f=d;for(var v=0,b=-1,y=0;y<r;++y){b!==(l=g[y])-1&&(v-=l),b=l}u||(v*=1e3),v-=s-r,t.score=v,t.indexes=new Array(f);for(y=f-1;y>=0;--y)t.indexes[y]=g[y];return t},prepareLowerCodes:function(e){for(var t=e.length,n=[],i=e.toLowerCase(),o=0;o<t;++o)n[o]=i.charCodeAt(o);return n},prepareBeginningIndexes:function(e){for(var t=e.length,n=[],i=0,o=!1,a=!1,r=0;r<t;++r){var s=e.charCodeAt(r),c=s>=65&&s<=90,l=c||s>=97&&s<=122||s>=48&&s<=57,d=c&&!o||!a||!l;o=c,a=l,d&&(n[i++]=r)}return n},prepareNextBeginningIndexes:function(e){for(var t=e.length,n=p.prepareBeginningIndexes(e),i=[],o=n[0],a=0,r=0;r<t;++r)o>r?i[r]=o:(o=n[++a],i[r]=void 0===o?t:o);return i},cleanup:r,new:h};return p}()};var yn=n(59709),xn=n.n(yn);const Sn=bn();var Cn;!function(e){e.FUZZYSORT="New search"}(Cn||(Cn={}));let En=[];const wn=Cn.FUZZYSORT,kn={"command.shortcut_mac":1.01,"command.shortcut_win":1.01,label:1,"command.explanation":.6,"command.tags":.5,"tags.value":.8,description:.8,breadcrumbs:.8,"category.label":.5},Tn=e=>{let t=0;const n=[];if(1===e.length)return[[e[0],e[0]]];for(let i=1;i<e.length;i++)if(i>0&&e[i]===e[i-1]+1)t+=1;else{if(t>1){const o=i-1;n.push([e[o-t],e[o]])}t=0}if(t>0){const i=e.length-1;n.push([e[i-t],e[i]])}return n},In=(e,t)=>e.score===t.score?e.refIndex-t.refIndex:t.score-e.score;function Dn(e,t){if(null===t||void 0===t)return-1/0;const n=_n(t),i=kn[e];return i?n-100*(1-i):n}function An(e,t,n){const i=Object.keys(kn);return Sn.go(t,e,{keys:i,threshold:-1e5,allowTypo:!0,minLengthForExactSearch:100,shouldSort:!1,getFn:(e,t,n)=>{let i=n;const o="string"===typeof t?t:t.join(".");return["command.shortcut_win","command.shortcut_mac"].includes(o)&&Array.isArray(i)&&(i=i.filter(e=>1===e.length).join("")),"label"===o&&e.resource?e.label+" "+e.resource.label:i},scoreFn:function(e){const t=i.map((t,n)=>{var i;return Dn(t,null===(i=e[n])||void 0===i?void 0:i.score)});return Math.max(...t)},...n}).map((e,t)=>((e,t,n)=>{const i=e.findIndex((n,i)=>Dn(t[i],null===n||void 0===n?void 0:n.score)===e.score),o=e[i]?{key:t[i],value:e[i].target,indices:Tn(e[i].indexes)}:{key:"label",value:e.obj.label,indices:[[]]};return{item:e.obj,score:e.score,refIndex:n,matches:[o]}})(e,Object.keys(kn),t))}const _n=e=>{switch(wn){case Cn.FUZZYSORT:default:return Math.min(e,-100)}};const Pn={search:(e,t)=>{var n,i;if(""===e)return En.map(e=>e.setMatches([],void 0));let o=[];const[a,r]=xn()(En,e=>!function(e,t){if(e instanceof Ie)return!1;if(e instanceof Qt){const n="commandbar-search-"+e.category.contextKey;return!!t.callbacks[n]}if(e instanceof Wt){const{currentStep:e}=hi.currentStepAndIndex(t);if(!e||!e.argument||!e.argument.value)return!1;const n=e.argument;if(!N(n))return!1;const i="commandbar-search-"+n.value;return!!t.callbacks[i]}return!1}(e,t));let s,c;switch(wn){case Cn.FUZZYSORT:s=An(a,e,0===(null===(n=t.organization)||void 0===n?void 0:n.search_fuzzy_threshold)?{minLengthForExactSearch:0}:{threshold:-1e3*((null===(i=t.organization)||void 0===i?void 0:i.search_fuzzy_threshold)||100)}).sort(In),c=An(r,e,{threshold:-1/0,shouldSort:!1}),o=[...s,...c]}return o.map(e=>e.item.setMatches(e.matches,e.score))},getCollection:()=>En,setCollection:e=>{En=e}};let On;!function(e){e.PROGRAMMATIC="programmatic",e.ONBOARDING="onboarding",e.KEYBOARD="keyboard",e.LAUNCHER="launcher",e.URL="url"}(On||(On={}));const Rn=e=>{var t;e.shouldTrack&&L.Z.log("Onboarding exited",{step:e.currentStepIndex,command:null===(t=e.activeCommand)||void 0===t?void 0:t.id,time:JSON.stringify(e.timeSpent),onboardingID:on(e)})},Ln={session:{start:e=>{L.Z.log("New session",{session:e})},end:e=>{e.isActive&&e.stepStartTime&&Rn(e);const t=Date.now(),n=(0,d.Kb)()[u.sK].session;if("string"===typeof n)try{const e=(t-parseInt(n.substring(0,t.toString().length)))/1e3;L.Z.log("End session",{length:e},!0)}catch(i){}}},search:{start:(e,t)=>{if(!e.isActive){const e=`${(0,d.Kb)()[u.sK].session}-${Date.now().toString()}`;(0,d.Kb)()[u.i4]=e,L.Z.log("New search",{trigger:t})}},end:(e,t,n)=>{if(!n.isActive){L.Z.log("Exited",{inputText:e});const n=hi.activeCommand(t),i=hi.activeResource(t);(""!==e||n||i)&&Ln.deadend(e,"Closed with text",t)}},inputChange:(e,t)=>{const n=hi.activeCommand(t),i=hi.activeResource(t);L.Z.log("Search input",{"inputText[*]":e,command:n&&n.id,resource:i})}},tooltip:{onboarding:e=>{L.Z.log("Onboarding tooltip shown",{message:e})},custom:e=>{L.Z.log("Tooltip shown",{message:e})}},onboarding:{started:(e,t)=>{e.shouldTrack&&L.Z.log("Onboarding started",{trigger:t,onboardingID:on(e)})},exited:Rn,completed:e=>{var t;e.shouldTrack&&L.Z.log("Onboarding completed",{step:e.currentStepIndex,command:null===(t=e.activeCommand)||void 0===t?void 0:t.id,time:JSON.stringify(e.timeSpent),onboardingID:on(e)})}},deadend:(e,t,n)=>{const i=hi.activeCommand(n),o=hi.activeResource(n),a=Pn.search(e,n),r={numCommands:a.filter(e=>e instanceof Ie).length,numRecords:a.filter(e=>e instanceof Wt).length};L.Z.track("Abandoned search",{"inputText[*]":e,command:i&&i.id,type:t,activeResource:o,results:r})},suggestion:e=>{L.Z.track("Command suggestion",{text:e})},execution:(e,t,n)=>{L.Z.track("Command execution",{command:e.id||e.name,commandText:e.text,category:e.category,source:e.source||"standard","inputText[*]":t,...n||{}})},unavailableShortcut:(e,t)=>{L.Z.log("Unavailable shortcut",{shortcut:e,command:t.id,commandText:t.text,url:window.location.href})},game:e=>{L.Z.log("Game played",{secondsPlayed:e})},clickedBranding:()=>{L.Z.log("Clicked branding",{})},surveyResponse:()=>{L.Z.log("Survey response",{},!0)}},Nn=Ln;var Mn=n(84541),Bn=n(3097);const Hn={Z_INDEX_MAX:2147483647,Z_LAUNCHER:2147483647,Z_MESSAGES:2147483647,Z_COMMANDBAR:2147483645,Z_EDITOR:2147483644,Z_EDITOR_OVERLAY:2147483645,Z_CARETAKER:2147483645,Z_DROPDOWNS:2147483646,Z_TOOLTIPS:2147483647,Z_MODALS:2147483647,Z_RECORDER:2147483646,Z_DRAGGERS:2147483647,Z_KEYBOARD_SHORTCUTS:2147483646,Z_CONFETTI:2147483647},zn={spread:360},Fn=()=>{const[e,t]=i.useState(!1),[n,o]=i.useState(zn);return i.useEffect(()=>{const e=e=>{var n;const i=null!==(n=null===e||void 0===e?void 0:e.detail)&&void 0!==n?n:zn;o(i),t(!0),setTimeout(()=>t(!1),30)};return document.addEventListener("CommandBar.Confetti",e),()=>{document.removeEventListener("CommandBar.Confetti",e)}},[e]),i.createElement("div",{style:{position:"absolute",top:"35vh",right:"50vw",zIndex:Hn.Z_CONFETTI}},i.createElement(Mn.Z,{active:e,config:n}))},Zn=(e,t)=>{E.m.get().exception(m.j.CLICK,{command:e.id,selector:t})},Un=(e,t,n,i)=>{try{return e(t,n)}catch(o){throw E.m.get().exception(m.j.CALLBACK,o,{errorMsg:"Command execution failed.",command:i.id,commandText:i.text}),o}};class Wn extends x{constructor(e,t){super("execute"),this.command=void 0,this.selected=void 0,this.triggeredByShortcut=void 0,this.select=e=>this,this.selection=()=>({}),this.breadcrumb=e=>{},this.fulfill=e=>{if(this.completed)return this;const t=((t,n)=>{switch(t.template.type){case"link":const i=A(t.template.value,n,!0,!0,!0);if("router"!==t.template.operation&&!(e=>{if(0===e.length)return!0;const t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i"),n=new RegExp("mailto:.*"),i=new RegExp("\\/.*"),o=new RegExp("^{{.*}}$");return!!t.test(e)||!!n.test(e)||!!i.test(e)||!!o.test(e)})(i))throw new w("URL to execute is invalid: "+i,n);switch(t.template.operation){case"router":const e=n.callbacks["commandbar-router"];if(e)return()=>e(i);throw new w("Link is of router type, but router is not defined.",n);case"self":return()=>window.open(i,"_self");case"blank":default:return()=>window.open(i,"_blank")}break;case"admin":case"builtin":case"callback":const o=t.template.value,a=e.callbacks[o];if(!a)throw new w(`Callback is not available: [${o}]`,n);return()=>this.executeCallback(n,a);case"clickByXpath":case"clickBySelector":case"click":const r=t.template.value.map(e=>A(e,n,!0,!0));if(!R(r[0]))throw new w(`Cannot find element to click: [${r[0]}]`,n);return 1===t.template.value.length?()=>function(e,t){const n=_(e);let i;"xpath"===n?i=O(e):"css"===n&&(i=P(e)),i?i.click():t&&t(e)}(r[0],Zn.bind({},t)):()=>function e(t,n,i){if(t>=n.length)return;const o=_(n[t]);let a;"xpath"===o?a=O(n[t]):"css"===o&&(a=P(n[t])),a?(a.click(),setTimeout(()=>{e(t+1,n)},150)):i&&i(n[t])}(0,r,Zn.bind({},t));case"webhook":return()=>{const e=t.template.value.toString(),i=n.context,o={args:hi.selections(n),context:i};fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})};case"script":return()=>{var e,i;let o="";const a=null!==n&&void 0!==n&&null!==(e=n.organization)&&void 0!==e&&e.id?null===n||void 0===n||null===(i=n.organization)||void 0===i?void 0:i.id.toString():"",r=n.context,s=hi.selections(n);["8eafe599"].includes(a)&&(o=t.template.value.toString()),((e,t,n)=>{Function('"use strict";return ( function(args, context){'+e+"})")()(t,n)})(o,s,r)};default:throw new w("Invalid command execute type.",n)}})(this.command,e);if(!e.simulation){const e=this.triggeredByShortcut?{shortcut:!0}:{};Nn.execution(this.command,"",e),this.command.celebrate&&(e=>{const t=e?{...zn,...e}:zn;(0,Bn.h)("CommandBar.Confetti",{detail:t})})(this.command.celebrate),setTimeout(()=>{t()},5)}return this.completed=!0,this},this.executeCallback=(e,t)=>{const n=hi.selections(e);this.command.confirm?window.confirm(this.command.confirm)&&Un(t,n,e.context,this.command):Un(t,n,e.context,this.command)},this.command=e,this.selected=null,this.triggeredByShortcut=t}}class jn extends x{constructor(e){super("select"),this.argument=void 0,this.selected=void 0,this.setSelections=e=>{Array.isArray(e)||(this.selected={type:"parameter",category:null,data:e})},this.select=e=>{if(!(e instanceof Wt))return this;const t=new jn(this.argument);let n=e.parameter;return e.isDateTimeOption()&&(n=Dt.clientReturnValue(e.parameter.date)),t.selected={type:"parameter",category:null,data:n},t.completed=this.completed,t},this.selection=()=>null===this.selected||"parameter"!==this.selected.type?{}:{[this.argument.userDefinedValue]:this.selected.data},this.placeholder=()=>""+this.argument.userDefinedName,this.breadcrumb=e=>{if(e){if(!this.completed||null===this.selected)return this.argument.userDefinedName;if("parameter"!==this.selected.type)return this.argument.userDefinedName;if(Array.isArray(this.selected.data))throw new Error("Selected must be an object");{const e=this.argument.label_field||"label";if(ke(this.selected.data))return this.selected.data.toString();if(this.selected.data instanceof Date)return Dt.display(be()(this.selected.data.toString()),this.argument.dateTimeArgumentTypeId,!1);var t;return(null!==(t=C()(this.selected.data,e))&&void 0!==t?t:"").toString()}}},this.fulfill=e=>(this.completed=!0,this),this.argument=e,this.selected=null}}jn.defaultIcon=(e,t)=>i.createElement("div",{style:{border:"1px solid "+e,opacity:t,borderRadius:"50%",height:18,width:18}});var Kn=n(64007);class Gn extends x{constructor(e){super("multiselect"),this.argument=void 0,this.selected=void 0,this.setSelections=e=>{let t=e;Array.isArray(e)||(t=[e]),this.selected={type:"parameter",category:null,data:[...t]}},this.select=e=>{var t;if(!(e instanceof Wt))return this;let n=e.parameter;e.isDateTimeOption()&&(n=Dt.clientReturnValue(e.parameter.date));const i=null!==(t=this.selected)&&void 0!==t&&t.data?[...this.selected.data]:[],o=i.findIndex(e=>Ae()(e,n));o>-1?i.splice(o,1):i.push(n);const a=new Gn(this.argument);return a.selected={type:"parameter",category:null,data:i},a.completed=this.completed,a},this.selection=()=>null===this.selected?{[this.argument.userDefinedValue]:[]}:"parameter"!==this.selected.type?{}:{[this.argument.userDefinedValue]:this.selected.data},this.placeholder=()=>""+this.argument.userDefinedName,this.breadcrumb=e=>{if(e){if(null===this.selected)return this.argument.userDefinedName;if("parameter"!==this.selected.type)return this.argument.userDefinedName;if(Array.isArray(this.selected.data)){const e=this.argument.label_field||"label";return this.selected.data.map(t=>{var n;return ke(t)?t.toString():null===(n=C()(t,e))||void 0===n?void 0:n.toString()}).join(", ")}throw new Error("Multi select selected must be an array")}},this.fulfill=e=>(this.completed=!0,this),this.argument=e,this.selected=null}}Gn.selectedIcon=(e,t)=>{const n=e.optionSelected.iconColor;return t.userDefinedIcon?i.createElement($,{icon:t.userDefinedIcon,default:i.createElement("div",{style:{minWidth:18,display:"inline-block"}}),style:{minWidth:18,padding:1,border:"2px solid "+n},useDefaultSVGColor:t.useDefaultSVGColor}):Gn.defaultSelectedIcon(n)},Gn.defaultSelectedIcon=e=>i.createElement("div",{style:{border:"2px solid "+e,borderRadius:"50%",height:18,width:18,display:"inline-block"}},i.createElement(Kn.Dey,{size:"14px",style:{color:e}})),Gn.defaultIcon=(e,t)=>i.createElement("div",{style:{border:"1px solid "+e,opacity:t,borderRadius:"50%",height:18,width:18,display:"inline-block"}});class Vn extends x{constructor(e){super("textinput"),this.argument=void 0,this.selected=void 0,this.select=e=>{if(!(e instanceof Wt))return this;const t=new Vn(this.argument);return t.selected={type:"parameter",category:null,data:e.parameter},t.completed=this.completed,t},this.selection=()=>null===this.selected||"parameter"!==this.selected.type?{}:{[this.argument.userDefinedValue]:this.selected.data},this.placeholder=()=>""+this.argument.userDefinedName,this.breadcrumb=e=>{if(e)return null===this.selected||"parameter"!==this.selected.type?this.argument.userDefinedName:this.selected.data},this.fulfill=e=>(this.completed=!0,this),this.argument=e,this.selected=null}}class Xn extends x{constructor(e){super("chooseCommandOrResource"),this.selected=void 0,this.resource=void 0,this.select=e=>{if(e instanceof Ie){const t=new Xn(this.resource);return t.selected={type:"command",label:e.label,category:e.command.category,data:e.command},t.completed=this.completed,t}return this},this.selection=()=>({}),this.breadcrumb=e=>{if(e)return null!==this.selected&&"command"===this.selected.type?this.selected.label:this.resource?this.resource.label:void 0},this.fulfill=e=>(this.completed=!0,this),this.selected=null,this.resource=e}}const Yn=()=>{const e=()=>({width:window.innerWidth,height:window.innerHeight}),[t,n]=i.useState(e);return i.useEffect(()=>{const t=()=>{n(e())};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),t};let Jn;!function(e){e.LEFT="left",e.TOP="top"}(Jn||(Jn={}));const qn=e=>{const t=document.getElementById("commandbar-wrapper");if(t){const n=t.querySelectorAll(".rc-dialog");n[0]&&(n[0].style.left=e+"px")}},$n=e=>{const{theme:t}=(0,ee.Fg)(),n=Yn().width,o=n<700,a=n>850&&e.content.length>3?Jn.LEFT:Jn.TOP;return i.useEffect(()=>{a===Jn.TOP?qn(0):qn(60)},[a]),e.instruction||e.content.length>0?(0,l.tZ)("div",{style:{width:"100%"}},(0,l.tZ)("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",paddingTop:t.blocksContainer.paddingTop,paddingBottom:t.blocksContainer.paddingBottom,paddingLeft:t.blocksContainer.paddingLeft,paddingRight:t.blocksContainer.paddingRight}},(0,l.tZ)("div",{className:"commandbar-breadcrumbs-container commandbar-breadcrumbs-container-"+a},e.content.map((t,i)=>e.content.length<=2&&i>0?(0,l.tZ)("div",null):(0,l.tZ)(ti,{key:"block-"+i,content:t,onRollback:e.onRollBack,position:a,windowWidth:n}))),!o&&(0,l.tZ)("div",{style:{minWidth:0,...a===Jn.LEFT&&{position:"absolute",right:0,top:0}}},e.instruction&&(0,l.tZ)("div",{id:e.instruction.includes("tab")?"execution-instructions-tab":e.instruction.includes("text")?"execution-instructions-text":"execution-intructions"},(0,l.tZ)(ti,{key:"instruction-text",content:{text:e.instruction,type:Qn.INSTRUCTION},onRollback:e.onRollBack,position:a,windowWidth:n}))))):(0,l.tZ)("div",null)};let Qn;!function(e){e[e.SELECTED=0]="SELECTED",e[e.LAST_SELECTED=1]="LAST_SELECTED",e[e.CURRENT_ARGUMENT=2]="CURRENT_ARGUMENT",e[e.PLACEHOLDER=3]="PLACEHOLDER",e[e.INSTRUCTION=4]="INSTRUCTION"}(Qn||(Qn={}));const ei=e=>(0,l.tZ)(Te.Z,{prefixCls:"commandbar-tooltip",overlay:(0,l.tZ)("span",null,e.text),align:{offset:[0,-7]},placement:"top"},(0,l.tZ)("span",{css:e=>({position:"absolute",left:0,zIndex:1,width:"100%",height:"100%",background:`linear-gradient(\n  to right,\n  ${c()(e.theme.main.background).alpha(0).css()},\n  ${c()(e.theme.main.background).alpha(0).css()} 75%,\n  ${c()(e.theme.main.background).alpha(.2).css()} 80%,\n  ${c()(e.theme.main.background).alpha(.9).css()} 100%\n)`})})),ti=e=>{const t=i.useRef(void 0),[n,o]=i.useState(!1);i.useEffect(()=>{t.current.clientWidth<t.current.scrollWidth?o(!0):o(!1)},[e.content.text,e.position,e.windowWidth]);const{content:a,onRollback:r}=e,s=((e,t)=>{switch(e){case Qn.INSTRUCTION:return 250;default:return t===Jn.LEFT?150:250}})(a.type,e.position);return(0,l.tZ)("div",{className:"commandbar-animation-fade-in commandbar-breadcrumb-background-"+e.position,css:t=>((e,t,n)=>{switch(t){case Qn.INSTRUCTION:return{marginRight:0,marginBottom:0};case Qn.LAST_SELECTED:case Qn.SELECTED:return{boxShadow:n===Jn.LEFT&&"rgba(0, 0, 0, 0.2) 0px 5px 30px",border:e.theme.blocks.border};case Qn.CURRENT_ARGUMENT:return{boxShadow:n===Jn.LEFT&&"rgba(0, 0, 0, 0.2) 0px 5px 30px",border:"1px solid "+e.theme.base.primary};case Qn.PLACEHOLDER:return{boxShadow:n===Jn.LEFT&&"rgba(0, 0, 0, 0.2) 0px 5px 30px",border:"1px solid grey"}}})(t,a.type,e.position),key:a.text+"-background"},n&&(0,l.tZ)(ei,{text:a.text}),(0,l.tZ)("div",{className:"commandbar-breadcrumb",css:t=>((e,t,n)=>{switch(t){case Qn.LAST_SELECTED:case Qn.SELECTED:return{color:e.theme.blocks.color,backgroundColor:e.theme.blocks.background,fontSize:e.theme.blocks.fontSize,paddingTop:e.theme.blocks.paddingTop,paddingBottom:e.theme.blocks.paddingBottom,paddingLeft:e.theme.blocks.paddingLeft,paddingRight:e.theme.blocks.paddingRight,fontWeight:e.theme.blocks.fontWeight};case Qn.CURRENT_ARGUMENT:return{color:c()(e.theme.base.primary).get("lab.l")<70?"white":"black",backgroundColor:e.theme.base.primary,fontSize:e.theme.blocks.fontSize,paddingTop:e.theme.blocks.paddingTop,paddingBottom:e.theme.blocks.paddingBottom,paddingLeft:e.theme.blocks.paddingLeft,paddingRight:e.theme.blocks.paddingRight,fontWeight:e.theme.blocks.fontWeight};case Qn.PLACEHOLDER:return{backgroundColor:"#dddddd",color:"grey",fontSize:e.theme.blocks.fontSize,paddingTop:e.theme.blocks.paddingTop,paddingBottom:e.theme.blocks.paddingBottom,paddingLeft:e.theme.blocks.paddingLeft,paddingRight:e.theme.blocks.paddingRight,fontWeight:e.theme.blocks.fontWeight};case Qn.INSTRUCTION:return{backgroundColor:e.theme.instruction.background,color:e.theme.instruction.fontColor,fontSize:e.theme.blocks.fontSize,paddingTop:e.theme.blocks.paddingTop,paddingBottom:e.theme.blocks.paddingBottom,paddingLeft:e.theme.blocks.paddingLeft,paddingRight:e.theme.blocks.paddingRight,fontWeight:e.theme.blocks.fontWeight}}})(t,a.type,e.position)},(0,l.tZ)("div",null,((e,t)=>{switch(e){case Qn.LAST_SELECTED:return(0,l.tZ)("div",{style:{padding:"6px 0px"}},(0,l.tZ)("span",{style:{marginRight:5,display:"flex",alignItems:"center",width:10,zIndex:2,position:"relative"}},(0,l.tZ)(Te.Z,{prefixCls:"commandbar-tooltip",overlay:(0,l.tZ)("span",null,(0,l.tZ)(te,{style:{height:12,padding:"4px 4px"},color:c()("rgb(174, 177, 221)")},"ESC")," ","to remove last selection"),placement:"top",align:{offset:[0,-15]}},(0,l.tZ)(Z.oHP,{style:{cursor:"pointer",fontSize:11,position:"absolute"},onClick:t}))));default:return(0,l.tZ)("div",null)}})(a.type,r)),(0,l.tZ)("span",{style:{maxWidth:s,minWidth:0,color:"inherit"},ref:t},a.text)))},ni=e=>{let t="start";const n=[];return e.steps.forEach(i=>{i.completed||"finish"===t?n.push(i):"scan"===t?"execute"===i.type?n.push(i.fulfill(e)):(t="finish",n.push(i)):(t="scan",n.push(i.fulfill(e)))}),{...e,steps:n}},ii=e=>{const{currentStep:t}=ui.currentStepAndIndex(e);if(void 0===t){const t={...e,visible:!1,steps:[new Xn(null)]};return{...t,options:Jt.available(t)}}{const t={...e};return{...e,visible:!0,options:Jt.available(t)}}},oi=e=>{if(0===e.steps.length)return{currentStep:void 0,currentStepIndex:-1};const t=e.steps.findIndex(e=>!e.completed);return{currentStep:e.steps[t],currentStepIndex:t}},ai=e=>e instanceof jn||e instanceof Gn,ri=e=>{return ai(e)&&("provided"===(t=e.argument).type&&"time"===t.value);var t},si=e=>ai(e)&&M(e.argument),ci=(e,t)=>!(!ai(e)||!N(e.argument))&&!!Object.keys(t.callbacks).find(t=>t==="commandbar-initialvalue-"+e.argument.value),li=e=>{const{currentStep:t}=ui.currentStepAndIndex(e),n=ai(t)&&N(t.argument)?t.argument.value:void 0;if(n&&ue.isDefined(n,e))return n},di=(e,t)=>{for(const n of Object.keys(t)){const i=t[n];if(null===i||void 0===i||!i.objectLabel)continue;const o=e=>Array.isArray(null===i||void 0===i?void 0:i.objectLabel)?i.objectLabel.includes(e.label):i.objectLabel===e.label;if(e instanceof en){if(e.resource.category.contextKey===(null===i||void 0===i?void 0:i.contextKey)&&o(e.resource))return i}else if(e instanceof Qt&&e.category.contextKey===(null===i||void 0===i?void 0:i.contextKey)&&o(e))return i}return null},ui={currentStepAndIndex:oi,lastStep:e=>e.steps[e.steps.length-1],breadcrumbs:e=>{const{currentStep:t,currentStepIndex:n}=oi(e);return e.steps.map((e,i)=>{const o=e.breadcrumb(!0);if(void 0===o)return;let a=Qn.SELECTED;return i===n-1||t instanceof Xn?a=Qn.LAST_SELECTED:i===n?a=Qn.CURRENT_ARGUMENT:i>n&&(a=Qn.PLACEHOLDER),{text:o,type:a}}).filter(e=>!!e)},selections:e=>{let t={};return e.steps.forEach(e=>{(e instanceof jn||e instanceof Gn||e instanceof Vn)&&(t={...t,...e.selection()})}),t},unchosen:e=>{const{currentStepIndex:t}=oi(e);let n=0;return e.steps.forEach((e,i)=>{t<i&&(e instanceof jn||e instanceof Gn||e instanceof Vn)&&null!==e.selected&&(n+=1)}),n},inputInstructions:e=>{const{currentStep:t}=oi(e);if(void 0!==t){if(t instanceof Xn)return null===t.resource?void 0:"Choose an action.";if(!(t instanceof jn))return t instanceof Gn?`Enter to select. ${F()}+Enter to continue.`:t instanceof Vn?"Type text and press enter.":void 0}},activeCommand:e=>{var t;if(0===e.steps.length)return;const n=e.steps[0];return n instanceof Xn?null===n||void 0===n||null===(t=n.selected)||void 0===t?void 0:t.data:void 0},activeResource:e=>{var t,n;if(0===e.steps.length)return;const i=e.steps[0];return i instanceof Xn?null===i||void 0===i||null===(t=i.resource)||void 0===t||null===(n=t.category)||void 0===n?void 0:n.contextKey:void 0}},hi=ui,mi=e=>e.filter?i.createElement("div",{className:"commandbar-search-filter-breadcrumb",style:{border:"1px solid "+e.theme.base.primary,borderRadius:4,display:"flex",alignItems:"center",marginRight:10}},i.createElement(Z.FNs,{style:{marginRight:3}}),e.filter.name,i.createElement(Z.oHP,{style:{cursor:"pointer",fontSize:11,marginLeft:4},onClick:e.onClose})):null,pi=e=>({color:e.placeholder.color,fontFamily:e.placeholder.fontFamily,fontSize:e.placeholder.fontSize}),gi=(e,t)=>{const n={overflowX:"hidden",caretColor:e.input.caretColor,fontFamily:e.input.fontFamily,fontSize:e.input.fontSize,width:"100%",margin:0,transition:"none !important",boxShadow:"none !important",background:"none  !important","*":{font:"inherit"},"::placeholder":pi(e)},i={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0};if(we(t)){const t=["darkgreen","plum","indigo","pink"].filter(t=>c().contrast(e.main.background,t)>4.5),o=t.length>0?t[0]:"blue";return{...i,...n,color:o,fontWeight:600}}return{...i,...n,color:e.input.color}},fi=e=>({":before":{borderWidth:2,borderStyle:"solid",borderColor:c()(e.base.fontColor).alpha(.2).css(),borderTopColor:e.base.fontColor}}),vi=e=>{const{theme:t}=(0,ee.Fg)();return e.isLoading?(0,g.tZ)("div",{className:"commandbar-loader",key:"commandbar-loader",css:fi(t)}):null},bi=e=>({border:e.input.border,borderRadius:e.input.borderRadius,borderBottom:e.input.borderBottom,background:e.input.background,zIndex:Hn.Z_COMMANDBAR}),yi=e=>e.svgString.length>0?(0,l.tZ)(V,{style:{height:20,width:20,left:17,top:25,marginRight:12},htmlstring:e.svgString,useDefaultSVGColor:!0}):null,xi=e=>{const{theme:t}=(0,ee.Fg)(),n=((e,t)=>{if(e)return"Loading...";const{currentStep:n}=hi.currentStepAndIndex(t);return n?n.placeholder():"What do you want to do?"})(e.isLoading,e.executionPathState);return(0,l.tZ)("div",{style:bi(t)},(0,l.tZ)("div",{style:{display:"flex",flexWrap:"wrap",flexDirection:"column"}},(0,l.tZ)($n,{content:hi.breadcrumbs(e.executionPathState),instruction:hi.inputInstructions(e.executionPathState),onRollBack:()=>{e.executionPathDispatch({type:"rollback"}),e.onInputChange("")}}),(0,l.tZ)("div",{style:{display:"flex",alignItems:"center",paddingLeft:t.input.paddingLeft,paddingRight:t.input.paddingRight,paddingTop:t.input.paddingTop,paddingBottom:t.input.paddingBottom,cursor:"text"}},(0,l.tZ)(yi,{svgString:e.executionPathState.logo}),(0,l.tZ)(mi,{filter:e.activeSearchFilter,onClose:e.clearSearchFilter,theme:t}),(0,l.tZ)("div",{style:{flexGrow:1,display:"flex",alignItems:"center"},className:"commandbar__input"},(0,l.tZ)("input",{css:gi(t,e.inputText),value:e.inputText,onChange:t=>e.onInputChange(t.target.value),placeholder:n,ref:e.inputRef}),(0,l.tZ)(vi,{isLoading:e.isLoading})))))};class Si{constructor({name:e,type:t,limit:n,key:i,sortFunction:o}){this.name=void 0,this.key=void 0,this.type=void 0,this.limit=void 0,this.sortFunction=void 0,this.size=void 0,this.name=e,this.type=t,this.key=i,this.limit=n,this.sortFunction=o,this.size=0}static getKey(e,t){return`${e}-${t.toString()}`}static getObjectGroupContextKey(e){return"OBJECT"!==e.type?null:e.key.replace("OBJECT-","")}static getGroupOfOption(e,t,n,i){const o=di(e,i);if(o)return wi(o.categoryName||e.label);if(e instanceof Ie||e instanceof en){var a;const n=null===(a=e.command)||void 0===a?void 0:a.category;if(e.isRecommended)return Ci();if(n){const e=t.find(e=>e.id===n);if(e)return new Si({name:e.name,key:Si.getKey("COMMAND_CATEGORY",e.id),type:"COMMAND_CATEGORY",limit:null===e||void 0===e?void 0:e.setting_max_options_count})}}else{if(e instanceof Qt){var r,s,c;const t=(null===(r=e.searchOptions)||void 0===r?void 0:r.name)||"Search: "+("string"!==typeof(d=e.category.contextKey)?"":d.charAt(0).toUpperCase()+d.slice(1));return new Si({name:t,key:Si.getKey("OBJECT",e.category.contextKey),type:"OBJECT",limit:null===(s=e.searchOptions)||void 0===s?void 0:s.max_options_count,sortFunction:null===(c=e.searchOptions)||void 0===c?void 0:c.sortFunction})}if(e instanceof Wt){var l;const t=e.getReservedField("category")||"";return new Si({name:t,key:Si.getKey("PARAMETER",t),type:"PARAMETER",limit:void 0,sortFunction:null===(l=e.searchOptions)||void 0===l?void 0:l.sortFunction})}}var d;return Ei()}static getDefaultHeaderHeight(e,t){return parseInt(e.categoryHeader.paddingBottom,10)+parseInt(e.categoryHeader.paddingTop,10)+parseInt(e.categoryHeader.fontSize,10)+(t?parseInt(e.optionList.spaceBetweenCategories):0)+1}isOverLimit(){return!(!this.limit||!this.size||this.limit>=this.size)}isExpanded(e){return e.includes(this.key)}canExpand(e){return this.isOverLimit()&&!this.isExpanded(e)}allowMoreOptions(e){return!this.limit||!this.size||(this.limit>this.size||(!e||this.isExpanded(e)))}incrementSize(){this.size+=1}}const Ci=()=>new Si({name:"Recommended",key:"RECOMMENDED-",type:"RECOMMENDED"}),Ei=()=>new Si({name:"",key:"NONE-",type:"NONE"}),wi=e=>new Si({name:e,key:"ACTIVEOBJECT-",type:"ACTIVEOBJECT"}),ki=Si,Ti=(e,t,n,i,o)=>e.reduce((e,a)=>{var r,s;const c=ki.getGroupOfOption(a,t,n,i),l=(null===(r=e.get(c.key))||void 0===r?void 0:r.group)||c,d=(null===(s=e.get(c.key))||void 0===s?void 0:s.children)||[];return l.allowMoreOptions(o)&&d.push(a),l.incrementSize(),e.set(l.key,{group:l,children:d}),e},new Map),Ii=e=>{const{groups:t,isEmptyState:n,categories:i,hackContextSettings:o}=e;let a=Array.from(t.keys());n&&(a=Array.from(new Set([wi("").key,Ci().key,Ei().key,...i.sort(Se).map(e=>ki.getKey("COMMAND_CATEGORY",e.id)),...Object.keys(o).map(e=>ki.getKey("OBJECT",e)),...a])));const r=i.filter(e=>e.setting_pin_to_bottom).sort(Se).map(e=>ki.getKey("COMMAND_CATEGORY",e.id));return[...a.filter(e=>!r.includes(e)),...r]},Di=(e,t)=>(Array.from(e.keys()).forEach(n=>{var i,o,a;const r=null===(i=e.get(n))||void 0===i?void 0:i.group,s=null===(o=e.get(n))||void 0===o?void 0:o.children;if(!r||!s)return;const c=r.sortFunction;if(c){const t=[...s].sort((e,t)=>e instanceof Wt&&t instanceof Wt?c({value:e.parameter,searchMatches:e.fuseMatches},{value:t.parameter,searchMatches:t.fuseMatches}):0);e.set(n,{group:r,children:t})}else if(r.key===Ci().key){const t=[...s].sort((e,t)=>e instanceof Ie&&t instanceof Ie?Se({sort_key:e.command.recommend_sort_key,id:0},{sort_key:t.command.recommend_sort_key,id:0}):0);e.set(n,{group:r,children:t})}else if(null!==t&&void 0!==t&&null!==(a=t.selected)&&void 0!==a&&a.data&&t instanceof Gn){const i=((e,t)=>[...e].sort((e,n)=>{if(!(e instanceof Wt)||!(n instanceof Wt))return 0;const i=Wt.isSelected(e,t);return i===Wt.isSelected(n,t)?0:i?-1:1}))(s,t);e.set(n,{group:r,children:i})}}),e),Ai=(e,t)=>t.reduce((t,n)=>{const i=e.get(n);if(i){const{children:e,group:n}=i;return[...t,n,...e]}return t},[]),_i=({options:e,numRecommendations:t,organization:n,user:i})=>{if("None"===(null===n||void 0===n?void 0:n.recommendations_type))return[];const o="Algorithm"===(null===n||void 0===n?void 0:n.recommendations_type),a=e.filter(e=>e instanceof Ie&&!(e instanceof en));let[r,s]=xn()(a,e=>e.isRecommended);o&&i?s.sort(Ie.sort.bind({},i.usage)):s=[];return[...r,...s].slice(0,t)},Pi={sort:(e,t)=>0===t.inputText.length?((e,t,n,i,o,a,r,s)=>{_i({options:e,numRecommendations:4,organization:n,user:i}).forEach(e=>e.isRecommended=!0);const c=Di(Ti(e,t,o,a,r),s),l=Ii({groups:c,categories:t,hackContextSettings:o,isEmptyState:!0});return Ai(c,l)})(e,t.categories,t.organization,t.user,t.hackContextSettings,t.activeObjects,t.expandedGroupKeys,t.currentStep):((e,t,n,i,o)=>{const a=Di(Ti(e,t,n,i,o)),r=Ii({groups:a,categories:t,hackContextSettings:n,isEmptyState:!1});return Ai(a,r)})(e,t.categories,t.hackContextSettings,t.activeObjects,t.expandedGroupKeys),recommend:_i},Oi=()=>{const[e,t]=i.useState([]);return{expandedGroupKeys:e,toggleGroupExpansion:n=>{const i=e.findIndex(e=>e===n),o=[...e];i>-1?o.splice(i,1):o.push(n),t(o)}}};var Ri=n(19223),Li=n(94820),Ni=n(61506);function Mi(e,t,n){Mi.instance_&&delete Mi.instance_,Mi.instance_=this,this.eventListenerContainer=e||document,this.outerContainerEl=document.querySelector(t),this.containerEl=null,this.snackbarEl=null,this.detailsButton=this.outerContainerEl.querySelector("#details-button"),this.config=n||Mi.config,this.dimensions=Mi.defaultDimensions,this.canvas=null,this.canvasCtx=null,this.tRex=null,this.distanceMeter=null,this.distanceRan=0,this.highestScore=localStorage.getItem("commandbar_hs")||0,this.time=0,this.runningTime=0,this.msPerFrame=1e3/Bi,this.currentSpeed=this.config.SPEED,this.obstacles=[],this.activated=!1,this.playing=!1,this.crashed=!1,this.paused=!1,this.inverted=!1,this.invertTimer=0,this.resizeTimerId_=null,this.playCount=0,this.audioBuffer=null,this.soundFx={},this.audioContext=null,this.images={},this.imagesLoaded=0,this.isDisabled()?this.setupDisabledRunner():this.loadImages()}window.Runner=Mi;var Bi=60,Hi=window.devicePixelRatio>1,zi=/iPad|iPhone|iPod/.test(window.navigator.platform),Fi=/Android/.test(window.navigator.userAgent)||zi;window;function Zi(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Ui(e){for(var t=e.length/4*3,n=atob(e),i=new ArrayBuffer(t),o=new Uint8Array(i),a=0;a<t;a++)o[a]=n.charCodeAt(a);return o.buffer}function Wi(){return zi?(new Date).getTime():performance.now()}function ji(e,t,n,i){this.canvas=e,this.canvasCtx=e.getContext("2d"),this.canvasDimensions=i,this.textImgPos=t,this.restartImgPos=n,this.draw()}function Ki(e,t){return new Xi(e.x+t.x,e.y+t.y,e.width,e.height)}function Gi(e,t,n){e.save(),e.strokeStyle="#f00",e.strokeRect(t.x,t.y,t.width,t.height),e.strokeStyle="#0f0",e.strokeRect(n.x,n.y,n.width,n.height),e.restore()}function Vi(e,t){var n=!1,i=(e.x,e.y,t.x);t.y;return e.x<i+t.width&&e.x+e.width>i&&e.y<t.y+t.height&&e.height+e.y>t.y&&(n=!0),n}function Xi(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i}function Yi(e,t,n,i,o,a,r){this.canvasCtx=e,this.spritePos=n,this.typeConfig=t,this.gapCoefficient=o,this.size=Zi(1,Yi.MAX_OBSTACLE_LENGTH),this.dimensions=i,this.remove=!1,this.xPos=i.WIDTH+(r||0),this.yPos=0,this.width=0,this.collisionBoxes=[],this.gap=0,this.speedOffset=0,this.currentFrame=0,this.timer=0,this.init(a)}function Ji(e,t){this.canvas=e,this.canvasCtx=e.getContext("2d"),this.spritePos=t,this.xPos=0,this.yPos=0,this.groundYPos=0,this.currentFrame=0,this.currentAnimFrames=[],this.blinkDelay=0,this.blinkCount=0,this.animStartTime=0,this.timer=0,this.msPerFrame=1e3/Bi,this.config=Ji.config,this.status=Ji.status.WAITING,this.jumping=!1,this.ducking=!1,this.jumpVelocity=0,this.reachedMinHeight=!1,this.speedDrop=!1,this.jumpCount=0,this.jumpspotX=0,this.init()}function qi(e,t,n,i){this.canvas=e,this.canvasCtx=e.getContext("2d"),this.image=Mi.imageSprite,this.spritePos=t,this.x=0,this.y=5,this.currentDistance=0,this.maxScore=0,this.highScore=0,this.container=null,this.digits=[],this.acheivement=!1,this.defaultString="",this.flashTimer=0,this.flashIterations=0,this.invertTrigger=!1,this.config=qi.config,this.maxScoreUnits=this.config.MAX_DISTANCE_UNITS,this.init(n)}function $i(e,t,n){this.canvas=e,this.canvasCtx=this.canvas.getContext("2d"),this.spritePos=t,this.containerWidth=n,this.xPos=n,this.yPos=0,this.remove=!1,this.cloudGap=Zi($i.config.MIN_CLOUD_GAP,$i.config.MAX_CLOUD_GAP),this.init()}function Qi(e,t,n){this.spritePos=t,this.canvas=e,this.canvasCtx=e.getContext("2d"),this.xPos=n-50,this.yPos=30,this.currentPhase=0,this.opacity=0,this.containerWidth=n,this.stars=[],this.drawStars=!1,this.placeStars()}function eo(e,t){this.spritePos=t,this.canvas=e,this.canvasCtx=e.getContext("2d"),this.sourceDimensions={},this.dimensions=eo.dimensions,this.sourceXPos=[this.spritePos.x,this.spritePos.x+this.dimensions.WIDTH],this.xPos=[],this.yPos=0,this.bumpThreshold=.5,this.setSourceDimensions(),this.draw()}function to(e,t,n,i){this.canvas=e,this.canvasCtx=this.canvas.getContext("2d"),this.config=to.config,this.dimensions=n,this.gapCoefficient=i,this.obstacles=[],this.obstacleHistory=[],this.horizonOffsets=[0,0],this.cloudFrequency=this.config.CLOUD_FREQUENCY,this.spritePos=t,this.nightMode=null,this.clouds=[],this.cloudSpeed=this.config.BG_CLOUD_SPEED,this.horizonLine=null,this.init()}Mi.config={ACCELERATION:.001,BG_CLOUD_SPEED:.2,BOTTOM_PAD:10,CLEAR_TIME:3e3,CLOUD_FREQUENCY:.5,GAMEOVER_CLEAR_TIME:750,GAP_COEFFICIENT:.6,GRAVITY:.6,INITIAL_JUMP_VELOCITY:12,INVERT_FADE_DURATION:12e3,INVERT_DISTANCE:700,MAX_BLINK_COUNT:3,MAX_CLOUDS:6,MAX_OBSTACLE_LENGTH:3,MAX_OBSTACLE_DUPLICATION:2,MAX_SPEED:13,MIN_JUMP_HEIGHT:35,MOBILE_SPEED_COEFFICIENT:1.2,RESOURCE_TEMPLATE_ID:"audio-resources",SPEED:6,SPEED_DROP_COEFFICIENT:3},Mi.defaultDimensions={WIDTH:600,HEIGHT:150},Mi.classes={CANVAS:"commandbar-game-runner-canvas",CONTAINER:"commandbar-game-runner-container",CRASHED:"crashed",ICON:"commandbar-game-icon-offline",INVERTED:"inverted",SNACKBAR:"snackbar",SNACKBAR_SHOW:"snackbar-show",TOUCH_CONTROLLER:"commandbar-game-controller"},Mi.spriteDefinition={LDPI:{CACTUS_LARGE:{x:332,y:2},CACTUS_SMALL:{x:228,y:2},CLOUD:{x:86,y:2},HORIZON:{x:2,y:54},MOON:{x:484,y:2},PTERODACTYL:{x:134,y:2},RESTART:{x:2,y:2},TEXT_SPRITE:{x:655,y:2},TREX:{x:848,y:2},STAR:{x:645,y:2}},HDPI:{CACTUS_LARGE:{x:652,y:2},CACTUS_SMALL:{x:446,y:2},CLOUD:{x:166,y:2},HORIZON:{x:2,y:104},MOON:{x:954,y:2},PTERODACTYL:{x:260,y:2},RESTART:{x:2,y:2},TEXT_SPRITE:{x:1294,y:2},TREX:{x:1678,y:2},STAR:{x:1276,y:2}}},Mi.sounds={BUTTON_PRESS:"offline-sound-press",HIT:"offline-sound-hit",SCORE:"offline-sound-reached"},Mi.keycodes={JUMP:{38:1,32:1},DUCK:{40:1},RESTART:{13:1}},Mi.events={ANIM_END:"webkitAnimationEnd",CLICK:"click",KEYDOWN:"keydown",KEYUP:"keyup",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",RESIZE:"resize",TOUCHEND:"touchend",TOUCHSTART:"touchstart",VISIBILITY:"visibilitychange",BLUR:"blur",FOCUS:"focus",LOAD:"load"},Mi.prototype={isDisabled:function(){return!1},setupDisabledRunner:function(){this.containerEl=document.createElement("div"),this.containerEl.className=Mi.classes.SNACKBAR,this.outerContainerEl.appendChild(this.containerEl),this.eventListenerContainer.addEventListener(Mi.events.KEYDOWN,function(e){Mi.keycodes.JUMP[e.keyCode]&&(this.containerEl.classList.add(Mi.classes.SNACKBAR_SHOW),document.querySelector(".icon").classList.add("icon-disabled"))}.bind(this))},updateConfigSetting:function(e,t){if(e in this.config&&void 0!==t)switch(this.config[e]=t,e){case"GRAVITY":case"MIN_JUMP_HEIGHT":case"SPEED_DROP_COEFFICIENT":this.tRex.config[e]=t;break;case"INITIAL_JUMP_VELOCITY":this.tRex.setJumpVelocity(t);break;case"SPEED":this.setSpeed(t)}},loadImages:function(){Hi?(Mi.imageSprite=document.getElementById("commandbar-game-offline-resources-2x"),this.spriteDef=Mi.spriteDefinition.HDPI):(Mi.imageSprite=document.getElementById("commandbar-game-offline-resources-1x"),this.spriteDef=Mi.spriteDefinition.LDPI),Mi.imageSprite.complete?this.init():Mi.imageSprite.addEventListener(Mi.events.LOAD,this.init.bind(this))},loadSounds:function(){if(!zi){this.audioContext=new AudioContext;var e=document.getElementById(this.config.RESOURCE_TEMPLATE_ID).content;for(var t in Mi.sounds){var n=e.getElementById(Mi.sounds[t]).src,i=Ui(n=n.substr(n.indexOf(",")+1));this.audioContext.decodeAudioData(i,function(e,t){this.soundFx[e]=t}.bind(this,t))}}},setSpeed:function(e){var t=e||this.currentSpeed;if(this.dimensions.WIDTH<600){var n=t*this.dimensions.WIDTH/600*this.config.MOBILE_SPEED_COEFFICIENT;this.currentSpeed=n>t?t:n}else e&&(this.currentSpeed=e)},init:function(){document.querySelector("."+Mi.classes.ICON).style.visibility="hidden",this.adjustDimensions(),this.setSpeed(),this.containerEl=document.createElement("div"),this.containerEl.className=Mi.classes.CONTAINER,this.canvas=function(e,t,n,i){var o=document.createElement("canvas");return o.className=i?Mi.classes.CANVAS+" "+i:Mi.classes.CANVAS,o.width=t,o.height=n,e.appendChild(o),o}(this.containerEl,this.dimensions.WIDTH,this.dimensions.HEIGHT,Mi.classes.PLAYER),this.canvasCtx=this.canvas.getContext("2d"),this.canvasCtx.fillStyle="#f7f7f7",this.canvasCtx.fill(),Mi.updateCanvasScaling(this.canvas),this.horizon=new to(this.canvas,this.spriteDef,this.dimensions,this.config.GAP_COEFFICIENT),this.distanceMeter=new qi(this.canvas,this.spriteDef.TEXT_SPRITE,this.dimensions.WIDTH),this.highestScore&&this.distanceMeter.setHighScore(this.highestScore),this.tRex=new Ji(this.canvas,this.spriteDef.TREX),this.outerContainerEl.appendChild(this.containerEl),Fi&&this.createTouchController(),this.startListening(),this.update(),window.addEventListener(Mi.events.RESIZE,this.debounceResize.bind(this))},createTouchController:function(){this.touchController=document.createElement("div"),this.touchController.className=Mi.classes.TOUCH_CONTROLLER,this.outerContainerEl.appendChild(this.touchController)},debounceResize:function(){this.resizeTimerId_||(this.resizeTimerId_=setInterval(this.adjustDimensions.bind(this),250))},adjustDimensions:function(){clearInterval(this.resizeTimerId_),this.resizeTimerId_=null;var e=window.getComputedStyle(this.outerContainerEl),t=Number(e.paddingLeft.substr(0,e.paddingLeft.length-2));this.dimensions.WIDTH=this.outerContainerEl.offsetWidth-2*t,this.canvas&&(this.canvas.width=this.dimensions.WIDTH,this.canvas.height=this.dimensions.HEIGHT,Mi.updateCanvasScaling(this.canvas),this.distanceMeter.calcXPos(this.dimensions.WIDTH),this.clearCanvas(),this.horizon.update(0,0,!0),this.tRex.update(0),this.playing||this.crashed||this.paused?(this.containerEl.style.width=this.dimensions.WIDTH+"px",this.containerEl.style.height=this.dimensions.HEIGHT+"px",this.distanceMeter.update(0,Math.ceil(this.distanceRan)),this.stop()):this.tRex.draw(0,0),this.crashed&&this.gameOverPanel&&(this.gameOverPanel.updateDimensions(this.dimensions.WIDTH),this.gameOverPanel.draw()))},playIntro:function(){if(this.activated||this.crashed)this.crashed&&this.restart();else{this.playingIntro=!0,this.tRex.playingIntro=!0;var e="@-webkit-keyframes intro { from { width:"+Ji.config.WIDTH+"px }to { width: "+this.dimensions.WIDTH+"px }}",t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t),this.containerEl.addEventListener(Mi.events.ANIM_END,this.startGame.bind(this)),this.containerEl.style.webkitAnimation="intro .4s ease-out 1 both",this.containerEl.style.width=this.dimensions.WIDTH+"px",this.playing=!0,this.activated=!0}},startGame:function(){this.runningTime=0,this.playingIntro=!1,this.tRex.playingIntro=!1,this.containerEl.style.webkitAnimation="",this.playCount++,this.eventListenerContainer.addEventListener(Mi.events.VISIBILITY,this.onVisibilityChange.bind(this)),window.addEventListener(Mi.events.BLUR,this.onVisibilityChange.bind(this)),window.addEventListener(Mi.events.FOCUS,this.onVisibilityChange.bind(this))},clearCanvas:function(){this.canvasCtx.clearRect(0,0,this.dimensions.WIDTH,this.dimensions.HEIGHT)},update:function(){this.updatePending=!1;var e=Wi(),t=e-(this.time||e);if(this.time=e,this.playing){this.clearCanvas(),this.tRex.jumping&&this.tRex.updateJump(t),this.runningTime+=t;var n=this.runningTime>this.config.CLEAR_TIME;if(1!==this.tRex.jumpCount||this.playingIntro||this.playIntro(),this.playingIntro?this.horizon.update(0,this.currentSpeed,n):(t=this.activated?t:0,this.horizon.update(t,this.currentSpeed,n,this.inverted)),n&&function(e,t,n){Mi.defaultDimensions.WIDTH,e.xPos;var i=new Xi(t.xPos+1,t.yPos+1,t.config.WIDTH-2,t.config.HEIGHT-2),o=new Xi(e.xPos+1,e.yPos+1,e.typeConfig.width*e.size-2,e.typeConfig.height-2);n&&Gi(n,i,o);if(Vi(i,o))for(var a=e.collisionBoxes,r=t.ducking?Ji.collisionBoxes.DUCKING:Ji.collisionBoxes.RUNNING,s=0;s<r.length;s++)for(var c=0;c<a.length;c++){var l=Ki(r[s],i),d=Ki(a[c],o),u=Vi(l,d);if(n&&Gi(n,l,d),u)return[l,d]}return!1}(this.horizon.obstacles[0],this.tRex)?this.gameOver():(this.distanceRan+=this.currentSpeed*t/this.msPerFrame,this.currentSpeed<this.config.MAX_SPEED&&(this.currentSpeed+=this.config.ACCELERATION)),this.distanceMeter.update(t,Math.ceil(this.distanceRan))&&this.playSound(this.soundFx.SCORE),this.invertTimer>this.config.INVERT_FADE_DURATION)this.invertTimer=0,this.invertTrigger=!1,this.invert();else if(this.invertTimer)this.invertTimer+=t;else{var i=this.distanceMeter.getActualDistance(Math.ceil(this.distanceRan));i>0&&(this.invertTrigger=!(i%this.config.INVERT_DISTANCE),this.invertTrigger&&0===this.invertTimer&&(this.invertTimer+=t,this.invert()))}}(this.playing||!this.activated&&this.tRex.blinkCount<Mi.config.MAX_BLINK_COUNT)&&(this.tRex.update(t),this.scheduleNextUpdate())},handleEvent:function(e){return function(t,n){switch(t){case n.KEYDOWN:case n.TOUCHSTART:case n.MOUSEDOWN:this.onKeyDown(e);break;case n.KEYUP:case n.TOUCHEND:case n.MOUSEUP:this.onKeyUp(e)}}.bind(this)(e.type,Mi.events)},startListening:function(){this.eventListenerContainer.addEventListener(Mi.events.KEYDOWN,this),this.eventListenerContainer.addEventListener(Mi.events.KEYUP,this),Fi?(this.touchController.addEventListener(Mi.events.TOUCHSTART,this),this.touchController.addEventListener(Mi.events.TOUCHEND,this),this.containerEl.addEventListener(Mi.events.TOUCHSTART,this)):(this.eventListenerContainer.addEventListener(Mi.events.MOUSEDOWN,this),this.eventListenerContainer.addEventListener(Mi.events.MOUSEUP,this))},stopListening:function(){this.eventListenerContainer.removeEventListener(Mi.events.KEYDOWN,this),this.eventListenerContainer.removeEventListener(Mi.events.KEYUP,this),Fi?(this.touchController.removeEventListener(Mi.events.TOUCHSTART,this),this.touchController.removeEventListener(Mi.events.TOUCHEND,this),this.containerEl.removeEventListener(Mi.events.TOUCHSTART,this)):(this.eventListenerContainer.removeEventListener(Mi.events.MOUSEDOWN,this),this.eventListenerContainer.removeEventListener(Mi.events.MOUSEUP,this))},onKeyDown:function(e){Fi&&this.playing&&e.preventDefault(),e.target!==this.detailsButton&&(this.crashed||!Mi.keycodes.JUMP[e.keyCode]&&e.type!==Mi.events.TOUCHSTART||(this.playing||(this.playing=!0,this.update()),this.tRex.jumping||this.tRex.ducking||this.tRex.startJump(this.currentSpeed)),this.crashed&&e.type===Mi.events.TOUCHSTART&&e.currentTarget===this.containerEl&&this.restart()),this.playing&&!this.crashed&&Mi.keycodes.DUCK[e.keyCode]&&(e.preventDefault(),this.tRex.jumping?this.tRex.setSpeedDrop():this.tRex.jumping||this.tRex.ducking||this.tRex.setDuck(!0))},onKeyUp:function(e){var t=String(e.keyCode),n=Mi.keycodes.JUMP[t]||e.type===Mi.events.TOUCHEND||e.type===Mi.events.MOUSEDOWN;if(this.isRunning()&&n)this.tRex.endJump();else if(Mi.keycodes.DUCK[t])this.tRex.speedDrop=!1,this.tRex.setDuck(!1);else if(this.crashed){var i=Wi()-this.time;(Mi.keycodes.RESTART[t]||this.isLeftClickOnCanvas(e)||i>=this.config.GAMEOVER_CLEAR_TIME&&Mi.keycodes.JUMP[t])&&this.restart()}else this.paused&&n&&(this.tRex.reset(),this.play())},isLeftClickOnCanvas:function(e){return null!==e.button&&e.button<2&&e.type===Mi.events.MOUSEUP&&e.target===this.canvas},scheduleNextUpdate:function(){this.updatePending||(this.updatePending=!0,this.raqId=requestAnimationFrame(this.update.bind(this)))},isRunning:function(){return!!this.raqId},gameOver:function(){var e;this.playSound(this.soundFx.HIT),e=200,Fi&&window.navigator.vibrate&&window.navigator.vibrate(e),this.stop(),this.crashed=!0,this.distanceMeter.acheivement=!1,this.tRex.update(100,Ji.status.CRASHED),this.gameOverPanel?this.gameOverPanel.draw():this.gameOverPanel=new ji(this.canvas,this.spriteDef.TEXT_SPRITE,this.spriteDef.RESTART,this.dimensions),this.distanceRan>this.highestScore&&(this.highestScore=Math.ceil(this.distanceRan),localStorage.setItem("commandbar_hs",Math.ceil(this.distanceRan)),this.distanceMeter.setHighScore(this.highestScore)),this.time=Wi()},stop:function(){this.playing=!1,this.paused=!0,cancelAnimationFrame(this.raqId),this.raqId=0},play:function(){this.crashed||(this.playing=!0,this.paused=!1,this.tRex.update(0,Ji.status.RUNNING),this.time=Wi(),this.update())},restart:function(){this.raqId||(this.playCount++,this.runningTime=0,this.playing=!0,this.crashed=!1,this.distanceRan=0,this.setSpeed(this.config.SPEED),this.time=Wi(),this.containerEl.classList.remove(Mi.classes.CRASHED),this.clearCanvas(),this.distanceMeter.reset(this.highestScore),this.horizon.reset(),this.tRex.reset(),this.playSound(this.soundFx.BUTTON_PRESS),this.invert(!0),this.update())},onVisibilityChange:function(e){document.hidden||document.webkitHidden||"blur"===e.type||"visible"!==document.visibilityState?this.stop():this.crashed||(this.tRex.reset(),this.play())},playSound:function(e){if(e){var t=this.audioContext.createBufferSource();t.buffer=e,t.connect(this.audioContext.destination),t.start(0)}},invert:function(e){e?(document.body.classList.toggle(Mi.classes.INVERTED,!1),this.invertTimer=0,this.inverted=!1):this.inverted=document.body.classList.toggle(Mi.classes.INVERTED,this.invertTrigger)}},Mi.updateCanvasScaling=function(e,t,n){var i=e.getContext("2d"),o=Math.floor(window.devicePixelRatio)||1,a=Math.floor(i.webkitBackingStorePixelRatio)||1,r=o/a;if(o!==a){var s=t||e.width,c=n||e.height;return e.width=s*r,e.height=c*r,e.style.width=s+"px",e.style.height=c+"px",i.scale(r,r),!0}return 1===o&&(e.style.width=e.width+"px",e.style.height=e.height+"px"),!1},ji.dimensions={TEXT_X:0,TEXT_Y:13,TEXT_WIDTH:191,TEXT_HEIGHT:11,RESTART_WIDTH:36,RESTART_HEIGHT:32},ji.prototype={updateDimensions:function(e,t){this.canvasDimensions.WIDTH=e,t&&(this.canvasDimensions.HEIGHT=t)},draw:function(){var e=ji.dimensions,t=this.canvasDimensions.WIDTH/2,n=e.TEXT_X,i=e.TEXT_Y,o=e.TEXT_WIDTH,a=e.TEXT_HEIGHT,r=Math.round(t-e.TEXT_WIDTH/2),s=Math.round((this.canvasDimensions.HEIGHT-25)/3),c=e.TEXT_WIDTH,l=e.TEXT_HEIGHT,d=e.RESTART_WIDTH,u=e.RESTART_HEIGHT,h=t-e.RESTART_WIDTH/2,m=this.canvasDimensions.HEIGHT/2;Hi&&(i*=2,n*=2,o*=2,a*=2,d*=2,u*=2),n+=this.textImgPos.x,i+=this.textImgPos.y,this.canvasCtx.drawImage(Mi.imageSprite,n,i,o,a,r,s,c,l),this.canvasCtx.drawImage(Mi.imageSprite,this.restartImgPos.x,this.restartImgPos.y,d,u,h,m,e.RESTART_WIDTH,e.RESTART_HEIGHT)}},Yi.MAX_GAP_COEFFICIENT=1.5,Yi.MAX_OBSTACLE_LENGTH=3,Yi.prototype={init:function(e){if(this.cloneCollisionBoxes(),this.size>1&&this.typeConfig.multipleSpeed>e&&(this.size=1),this.width=this.typeConfig.width*this.size,Array.isArray(this.typeConfig.yPos)){var t=Fi?this.typeConfig.yPosMobile:this.typeConfig.yPos;this.yPos=t[Zi(0,t.length-1)]}else this.yPos=this.typeConfig.yPos;this.draw(),this.size>1&&(this.collisionBoxes[1].width=this.width-this.collisionBoxes[0].width-this.collisionBoxes[2].width,this.collisionBoxes[2].x=this.width-this.collisionBoxes[2].width),this.typeConfig.speedOffset&&(this.speedOffset=Math.random()>.5?this.typeConfig.speedOffset:-this.typeConfig.speedOffset),this.gap=this.getGap(this.gapCoefficient,e)},draw:function(){var e=this.typeConfig.width,t=this.typeConfig.height;Hi&&(e*=2,t*=2);var n=e*this.size*(.5*(this.size-1))+this.spritePos.x;this.currentFrame>0&&(n+=e*this.currentFrame),this.canvasCtx.drawImage(Mi.imageSprite,n,this.spritePos.y,e*this.size,t,this.xPos,this.yPos,this.typeConfig.width*this.size,this.typeConfig.height)},update:function(e,t){this.remove||(this.typeConfig.speedOffset&&(t+=this.speedOffset),this.xPos-=Math.floor(t*Bi/1e3*e),this.typeConfig.numFrames&&(this.timer+=e,this.timer>=this.typeConfig.frameRate&&(this.currentFrame=this.currentFrame===this.typeConfig.numFrames-1?0:this.currentFrame+1,this.timer=0)),this.draw(),this.isVisible()||(this.remove=!0))},getGap:function(e,t){var n=Math.round(this.width*t+this.typeConfig.minGap*e);return Zi(n,Math.round(n*Yi.MAX_GAP_COEFFICIENT))},isVisible:function(){return this.xPos+this.width>0},cloneCollisionBoxes:function(){for(var e=this.typeConfig.collisionBoxes,t=e.length-1;t>=0;t--)this.collisionBoxes[t]=new Xi(e[t].x,e[t].y,e[t].width,e[t].height)}},Yi.types=[{type:"CACTUS_SMALL",width:17,height:35,yPos:105,multipleSpeed:4,minGap:120,minSpeed:0,collisionBoxes:[new Xi(0,7,5,27),new Xi(4,0,6,34),new Xi(10,4,7,14)]},{type:"CACTUS_LARGE",width:25,height:50,yPos:90,multipleSpeed:7,minGap:120,minSpeed:0,collisionBoxes:[new Xi(0,12,7,38),new Xi(8,0,7,49),new Xi(13,10,10,38)]},{type:"PTERODACTYL",width:46,height:40,yPos:[100,75,50],yPosMobile:[100,50],multipleSpeed:999,minSpeed:8.5,minGap:150,collisionBoxes:[new Xi(15,15,16,5),new Xi(18,21,24,6),new Xi(2,14,4,3),new Xi(6,10,4,7),new Xi(10,8,6,9)],numFrames:2,frameRate:1e3/6,speedOffset:.8}],Ji.config={DROP_VELOCITY:-5,GRAVITY:.6,HEIGHT:47,HEIGHT_DUCK:25,INIITAL_JUMP_VELOCITY:-10,INTRO_DURATION:1500,MAX_JUMP_HEIGHT:30,MIN_JUMP_HEIGHT:30,SPEED_DROP_COEFFICIENT:3,SPRITE_WIDTH:262,START_X_POS:50,WIDTH:44,WIDTH_DUCK:59},Ji.collisionBoxes={DUCKING:[new Xi(1,18,55,25)],RUNNING:[new Xi(22,0,17,16),new Xi(1,18,30,9),new Xi(10,35,14,8),new Xi(1,24,29,5),new Xi(5,30,21,4),new Xi(9,34,15,4)]},Ji.status={CRASHED:"CRASHED",DUCKING:"DUCKING",JUMPING:"JUMPING",RUNNING:"RUNNING",WAITING:"WAITING"},Ji.BLINK_TIMING=7e3,Ji.animFrames={WAITING:{frames:[44,0],msPerFrame:1e3/3},RUNNING:{frames:[88,132],msPerFrame:1e3/12},CRASHED:{frames:[220],msPerFrame:1e3/60},JUMPING:{frames:[0],msPerFrame:1e3/60},DUCKING:{frames:[264,323],msPerFrame:125}},Ji.prototype={init:function(){this.groundYPos=Mi.defaultDimensions.HEIGHT-this.config.HEIGHT-Mi.config.BOTTOM_PAD,this.yPos=this.groundYPos,this.minJumpHeight=this.groundYPos-this.config.MIN_JUMP_HEIGHT,this.draw(0,0),this.update(0,Ji.status.WAITING)},setJumpVelocity:function(e){this.config.INIITAL_JUMP_VELOCITY=-e,this.config.DROP_VELOCITY=-e/2},update:function(e,t){this.timer+=e,t&&(this.status=t,this.currentFrame=0,this.msPerFrame=Ji.animFrames[t].msPerFrame,this.currentAnimFrames=Ji.animFrames[t].frames,t===Ji.status.WAITING&&(this.animStartTime=Wi(),this.setBlinkDelay())),this.playingIntro&&this.xPos<this.config.START_X_POS&&(this.xPos+=Math.round(this.config.START_X_POS/this.config.INTRO_DURATION*e)),this.status===Ji.status.WAITING?this.blink(Wi()):this.draw(this.currentAnimFrames[this.currentFrame],0),this.timer>=this.msPerFrame&&(this.currentFrame=this.currentFrame===this.currentAnimFrames.length-1?0:this.currentFrame+1,this.timer=0),this.speedDrop&&this.yPos===this.groundYPos&&(this.speedDrop=!1,this.setDuck(!0))},draw:function(e,t){var n=e,i=t,o=this.ducking&&this.status!==Ji.status.CRASHED?this.config.WIDTH_DUCK:this.config.WIDTH,a=this.config.HEIGHT;Hi&&(n*=2,i*=2,o*=2,a*=2),n+=this.spritePos.x,i+=this.spritePos.y,this.ducking&&this.status!==Ji.status.CRASHED?this.canvasCtx.drawImage(Mi.imageSprite,n,i,o,a,this.xPos,this.yPos,this.config.WIDTH_DUCK,this.config.HEIGHT):(this.ducking&&this.status===Ji.status.CRASHED&&this.xPos++,this.canvasCtx.drawImage(Mi.imageSprite,n,i,o,a,this.xPos,this.yPos,this.config.WIDTH,this.config.HEIGHT))},setBlinkDelay:function(){this.blinkDelay=Math.ceil(Math.random()*Ji.BLINK_TIMING)},blink:function(e){e-this.animStartTime>=this.blinkDelay&&(this.draw(this.currentAnimFrames[this.currentFrame],0),1===this.currentFrame&&(this.setBlinkDelay(),this.animStartTime=e,this.blinkCount++))},startJump:function(e){this.jumping||(this.update(0,Ji.status.JUMPING),this.jumpVelocity=this.config.INIITAL_JUMP_VELOCITY-e/10,this.jumping=!0,this.reachedMinHeight=!1,this.speedDrop=!1)},endJump:function(){this.reachedMinHeight&&this.jumpVelocity<this.config.DROP_VELOCITY&&(this.jumpVelocity=this.config.DROP_VELOCITY)},updateJump:function(e,t){var n=e/Ji.animFrames[this.status].msPerFrame;this.speedDrop?this.yPos+=Math.round(this.jumpVelocity*this.config.SPEED_DROP_COEFFICIENT*n):this.yPos+=Math.round(this.jumpVelocity*n),this.jumpVelocity+=this.config.GRAVITY*n,(this.yPos<this.minJumpHeight||this.speedDrop)&&(this.reachedMinHeight=!0),(this.yPos<this.config.MAX_JUMP_HEIGHT||this.speedDrop)&&this.endJump(),this.yPos>this.groundYPos&&(this.reset(),this.jumpCount++),this.update(e)},setSpeedDrop:function(){this.speedDrop=!0,this.jumpVelocity=1},setDuck:function(e){e&&this.status!==Ji.status.DUCKING?(this.update(0,Ji.status.DUCKING),this.ducking=!0):this.status===Ji.status.DUCKING&&(this.update(0,Ji.status.RUNNING),this.ducking=!1)},reset:function(){this.yPos=this.groundYPos,this.jumpVelocity=0,this.jumping=!1,this.ducking=!1,this.update(0,Ji.status.RUNNING),this.midair=!1,this.speedDrop=!1,this.jumpCount=0}},qi.dimensions={WIDTH:10,HEIGHT:13,DEST_WIDTH:11},qi.yPos=[0,13,27,40,53,67,80,93,107,120],qi.config={MAX_DISTANCE_UNITS:5,ACHIEVEMENT_DISTANCE:100,COEFFICIENT:.025,FLASH_DURATION:250,FLASH_ITERATIONS:3},qi.prototype={init:function(e){var t="";this.calcXPos(e),this.maxScore=this.maxScoreUnits;for(var n=0;n<this.maxScoreUnits;n++)this.draw(n,0),this.defaultString+="0",t+="9";this.drawHighScore(),this.maxScore=parseInt(t)},calcXPos:function(e){this.x=e-qi.dimensions.DEST_WIDTH*(this.maxScoreUnits+1)},draw:function(e,t,n){var i=qi.dimensions.WIDTH,o=qi.dimensions.HEIGHT,a=qi.dimensions.WIDTH*t,r=0,s=e*qi.dimensions.DEST_WIDTH,c=this.y,l=qi.dimensions.WIDTH,d=qi.dimensions.HEIGHT;if(Hi&&(i*=2,o*=2,a*=2),a+=this.spritePos.x,r+=this.spritePos.y,this.canvasCtx.save(),n){var u=this.x-2*this.maxScoreUnits*qi.dimensions.WIDTH;this.canvasCtx.translate(u,this.y)}else this.canvasCtx.translate(this.x,this.y);this.canvasCtx.drawImage(this.image,a,r,i,o,s,c,l,d),this.canvasCtx.restore()},getActualDistance:function(e){return e?Math.round(e*this.config.COEFFICIENT):0},update:function(e,t){var n=!0,i=!1;if(this.acheivement)this.flashIterations<=this.config.FLASH_ITERATIONS?(this.flashTimer+=e,this.flashTimer<this.config.FLASH_DURATION?n=!1:this.flashTimer>2*this.config.FLASH_DURATION&&(this.flashTimer=0,this.flashIterations++)):(this.acheivement=!1,this.flashIterations=0,this.flashTimer=0);else if((t=this.getActualDistance(t))>this.maxScore&&this.maxScoreUnits===this.config.MAX_DISTANCE_UNITS?(this.maxScoreUnits++,this.maxScore=parseInt(this.maxScore+"9")):this.distance=0,t>0){t%this.config.ACHIEVEMENT_DISTANCE===0&&(this.acheivement=!0,this.flashTimer=0,i=!0);var o=(this.defaultString+t).substr(-this.maxScoreUnits);this.digits=o.split("")}else this.digits=this.defaultString.split("");if(n)for(var a=this.digits.length-1;a>=0;a--)this.draw(a,parseInt(this.digits[a]));return this.drawHighScore(),i},drawHighScore:function(){this.canvasCtx.save(),this.canvasCtx.globalAlpha=.8;for(var e=this.highScore.length-1;e>=0;e--)this.draw(e,parseInt(this.highScore[e],10),!0);this.canvasCtx.restore()},setHighScore:function(e){e=this.getActualDistance(e);var t=(this.defaultString+e).substr(-this.maxScoreUnits);this.highScore=["10","11",""].concat(t.split("")),this.drawHighScore()},reset:function(){this.update(0),this.acheivement=!1}},$i.config={HEIGHT:14,MAX_CLOUD_GAP:400,MAX_SKY_LEVEL:30,MIN_CLOUD_GAP:100,MIN_SKY_LEVEL:71,WIDTH:46},$i.prototype={init:function(){this.yPos=Zi($i.config.MAX_SKY_LEVEL,$i.config.MIN_SKY_LEVEL),this.draw()},draw:function(){this.canvasCtx.save();var e=$i.config.WIDTH,t=$i.config.HEIGHT;Hi&&(e*=2,t*=2),this.canvasCtx.drawImage(Mi.imageSprite,this.spritePos.x,this.spritePos.y,e,t,this.xPos,this.yPos,$i.config.WIDTH,$i.config.HEIGHT),this.canvasCtx.restore()},update:function(e){this.remove||(this.xPos-=Math.ceil(e),this.draw(),this.isVisible()||(this.remove=!0))},isVisible:function(){return this.xPos+$i.config.WIDTH>0}},Qi.config={FADE_SPEED:.035,HEIGHT:40,MOON_SPEED:.25,NUM_STARS:2,STAR_SIZE:9,STAR_SPEED:.3,STAR_MAX_Y:70,WIDTH:20},Qi.phases=[140,120,100,60,40,20,0],Qi.prototype={update:function(e,t){if(e&&0===this.opacity&&(this.currentPhase++,this.currentPhase>=Qi.phases.length&&(this.currentPhase=0)),e&&(this.opacity<1||0===this.opacity)?this.opacity+=Qi.config.FADE_SPEED:this.opacity>0&&(this.opacity-=Qi.config.FADE_SPEED),this.opacity>0){if(this.xPos=this.updateXPos(this.xPos,Qi.config.MOON_SPEED),this.drawStars)for(var n=0;n<Qi.config.NUM_STARS;n++)this.stars[n].x=this.updateXPos(this.stars[n].x,Qi.config.STAR_SPEED);this.draw()}else this.opacity=0,this.placeStars();this.drawStars=!0},updateXPos:function(e,t){return e<-Qi.config.WIDTH?e=this.containerWidth:e-=t,e},draw:function(){var e=3===this.currentPhase?2*Qi.config.WIDTH:Qi.config.WIDTH,t=Qi.config.HEIGHT,n=this.spritePos.x+Qi.phases[this.currentPhase],i=e,o=Qi.config.STAR_SIZE,a=Mi.spriteDefinition.LDPI.STAR.x;if(Hi&&(e*=2,t*=2,n=this.spritePos.x+2*Qi.phases[this.currentPhase],o*=2,a=Mi.spriteDefinition.HDPI.STAR.x),this.canvasCtx.save(),this.canvasCtx.globalAlpha=this.opacity,this.drawStars)for(var r=0;r<Qi.config.NUM_STARS;r++)this.canvasCtx.drawImage(Mi.imageSprite,a,this.stars[r].sourceY,o,o,Math.round(this.stars[r].x),this.stars[r].y,Qi.config.STAR_SIZE,Qi.config.STAR_SIZE);this.canvasCtx.drawImage(Mi.imageSprite,n,this.spritePos.y,e,t,Math.round(this.xPos),this.yPos,i,Qi.config.HEIGHT),this.canvasCtx.globalAlpha=1,this.canvasCtx.restore()},placeStars:function(){for(var e=Math.round(this.containerWidth/Qi.config.NUM_STARS),t=0;t<Qi.config.NUM_STARS;t++)this.stars[t]={},this.stars[t].x=Zi(e*t,e*(t+1)),this.stars[t].y=Zi(0,Qi.config.STAR_MAX_Y),this.stars[t].sourceY=Hi?Mi.spriteDefinition.HDPI.STAR.y+2*Qi.config.STAR_SIZE*t:Mi.spriteDefinition.LDPI.STAR.y+Qi.config.STAR_SIZE*t},reset:function(){this.currentPhase=0,this.opacity=0,this.update(!1)}},eo.dimensions={WIDTH:600,HEIGHT:12,YPOS:127},eo.prototype={setSourceDimensions:function(){for(var e in eo.dimensions)Hi?"YPOS"!==e&&(this.sourceDimensions[e]=2*eo.dimensions[e]):this.sourceDimensions[e]=eo.dimensions[e],this.dimensions[e]=eo.dimensions[e];this.xPos=[0,eo.dimensions.WIDTH],this.yPos=eo.dimensions.YPOS},getRandomType:function(){return Math.random()>this.bumpThreshold?this.dimensions.WIDTH:0},draw:function(){this.canvasCtx.drawImage(Mi.imageSprite,this.sourceXPos[0],this.spritePos.y,this.sourceDimensions.WIDTH,this.sourceDimensions.HEIGHT,this.xPos[0],this.yPos,this.dimensions.WIDTH,this.dimensions.HEIGHT),this.canvasCtx.drawImage(Mi.imageSprite,this.sourceXPos[1],this.spritePos.y,this.sourceDimensions.WIDTH,this.sourceDimensions.HEIGHT,this.xPos[1],this.yPos,this.dimensions.WIDTH,this.dimensions.HEIGHT)},updateXPos:function(e,t){var n=e,i=0===e?1:0;this.xPos[n]-=t,this.xPos[i]=this.xPos[n]+this.dimensions.WIDTH,this.xPos[n]<=-this.dimensions.WIDTH&&(this.xPos[n]+=2*this.dimensions.WIDTH,this.xPos[i]=this.xPos[n]-this.dimensions.WIDTH,this.sourceXPos[n]=this.getRandomType()+this.spritePos.x)},update:function(e,t){var n=Math.floor(t*(Bi/1e3)*e);this.xPos[0]<=0?this.updateXPos(0,n):this.updateXPos(1,n),this.draw()},reset:function(){this.xPos[0]=0,this.xPos[1]=eo.dimensions.WIDTH}},to.config={BG_CLOUD_SPEED:.2,BUMPY_THRESHOLD:.3,CLOUD_FREQUENCY:.5,HORIZON_HEIGHT:16,MAX_CLOUDS:6},to.prototype={init:function(){this.addCloud(),this.horizonLine=new eo(this.canvas,this.spritePos.HORIZON),this.nightMode=new Qi(this.canvas,this.spritePos.MOON,this.dimensions.WIDTH)},update:function(e,t,n,i){this.runningTime+=e,this.horizonLine.update(e,t),this.nightMode.update(i),this.updateClouds(e,t),n&&this.updateObstacles(e,t)},updateClouds:function(e,t){var n=this.cloudSpeed/1e3*e*t,i=this.clouds.length;if(i){for(var o=i-1;o>=0;o--)this.clouds[o].update(n);var a=this.clouds[i-1];i<this.config.MAX_CLOUDS&&this.dimensions.WIDTH-a.xPos>a.cloudGap&&this.cloudFrequency>Math.random()&&this.addCloud(),this.clouds=this.clouds.filter((function(e){return!e.remove}))}else this.addCloud()},updateObstacles:function(e,t){for(var n=this.obstacles.slice(0),i=0;i<this.obstacles.length;i++){var o=this.obstacles[i];o.update(e,t),o.remove&&n.shift()}if(this.obstacles=n,this.obstacles.length>0){var a=this.obstacles[this.obstacles.length-1];a&&!a.followingObstacleCreated&&a.isVisible()&&a.xPos+a.width+a.gap<this.dimensions.WIDTH&&(this.addNewObstacle(t),a.followingObstacleCreated=!0)}else this.addNewObstacle(t)},removeFirstObstacle:function(){this.obstacles.shift()},addNewObstacle:function(e){var t=Zi(0,Yi.types.length-1),n=Yi.types[t];if(this.duplicateObstacleCheck(n.type)||e<n.minSpeed)this.addNewObstacle(e);else{var i=this.spritePos[n.type];this.obstacles.push(new Yi(this.canvasCtx,n,i,this.dimensions,this.gapCoefficient,e,n.width)),this.obstacleHistory.unshift(n.type),this.obstacleHistory.length>1&&this.obstacleHistory.splice(Mi.config.MAX_OBSTACLE_DUPLICATION)}},duplicateObstacleCheck:function(e){for(var t=0,n=0;n<this.obstacleHistory.length;n++)t=this.obstacleHistory[n]===e?t+1:0;return t>=Mi.config.MAX_OBSTACLE_DUPLICATION},reset:function(){this.obstacles=[],this.horizonLine.reset(),this.nightMode.reset()},resize:function(e,t){this.canvas.width=e,this.canvas.height=t},addCloud:function(){this.clouds.push(new $i(this.canvas,this.spritePos.CLOUD,this.dimensions.WIDTH))}};const no=Mi,io=()=>{const[e,t]=i.useState(0),n=i.useRef();return n.current=e,(0,i.useEffect)(()=>{var e;const i=null===(e=document.getElementsByClassName("commandbar-modal"))||void 0===e?void 0:e[0];new no(i,".commandbar-game-interstitial-wrapper"),document.activeElement&&document.activeElement&&document.activeElement.hasOwnProperty("blur")&&document.activeElement.blur();const o=setInterval(()=>{t(e=>e+1)},1e3);return()=>{clearInterval(o),Nn.game(n.current)}},[]),i.createElement("div",{style:{padding:25}},i.createElement("div",{className:"commandbar-game"},i.createElement("div",{id:"commandbar-game-t",className:"commandbar-game-offline",style:{zIndex:Hn.Z_INDEX_MAX}},i.createElement("div",{id:"commandbar-main-frame-error",className:"commandbar-game-interstitial-wrapper"},i.createElement("div",{id:"commandbar-main-content"},i.createElement("div",{className:"commandbar-game-icon commandbar-game-icon-offline"})),i.createElement("div",{id:"commandbar-game-offline-resources"},i.createElement("img",{id:"commandbar-game-offline-resources-1x",src:Li,alt:"offline-1"}),i.createElement("img",{id:"commandbar-game-offline-resources-2x",src:Ni,alt:"offline-2"}))))),i.createElement("div",{style:{paddingTop:10}},i.createElement(te,{color:c()("rgb(174, 177, 221)")},"Space"),"  ",b("to start and jump"),"      ",i.createElement(te,{color:c()("rgb(174, 177, 221)")},"Esc"),"  ",b("to close")))},oo=(e,t,n)=>{const i=t||e.base.primary,o=n||e.main.background;return{wordBreak:"break-word",fontFamily:e.main.fontFamily,fontSize:e.main.fontSize,lineHeight:1.5715,position:"relative",display:"inline-block",fontWeight:400,textAlign:"center",border:"1px solid transparent",WebkitBoxShadow:"0 2px 0 rgba(0, 0, 0, 0.015)",boxShadow:"0 2px 0 rgba(0, 0, 0, 0.015)",cursor:"pointer",WebkitTransition:"all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",transition:"all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",height:"fit-content",padding:"4px 15px",borderRadius:2,color:e.base.fontColor,background:o,borderColor:e.base.fontColor,"&:not([disabled]):hover":{textDecoration:"none"},"&:not([disabled]):active":{outline:0,boxShadow:"none"},"&[disabled]":{cursor:"not-allowed",opacity:.6,borderColor:"#d9d9d9",textShadow:"none",WebkitBoxshadow:"none",boxShadow:"none"},"&:hover":{color:i,background:o,borderColor:i,textDecoration:"none"},"&:focus":{color:i,background:o,borderColor:i,textDecoration:"none"},"&:active":{color:i,background:o,borderColor:i,textDecoration:"none"}}},ao=e=>{const{primaryColor:t,backgroundColor:n,style:i,children:o,...a}=e,r=i||{},{theme:s}=(0,ee.Fg)();return(0,l.tZ)("button",Object.assign({},a,{css:{...oo(s,t,n),...r}}),o)},ro=e=>{var t;const[n,o]=(0,i.useState)(!1),{theme:a}=(0,ee.Fg)(),r="ec420f00"!==(null===(t=e.organization)||void 0===t?void 0:t.id),s=()=>{n?(e.setDashboard(void 0),o(!1)):(e.setDashboard((0,l.tZ)(so,{setDashboard:e.setDashboard})),o(!0))};var c;return e.isIcon?(0,l.tZ)(Te.Z,{prefixCls:"commandbar-tooltip",overlay:(0,l.tZ)("span",{style:{fontFamily:a.main.fontFamily}},b("Give feedback")),placement:"bottom"},null!==e&&void 0!==e&&null!==(c=e.organization)&&void 0!==c&&c.icon_suggest?(0,l.tZ)(V,{htmlstring:e.organization.icon_suggest,height:"20px",width:"20px",style:{cursor:"pointer",color:a.main.color},onClick:s}):(0,l.tZ)(Z.e$J,{onClick:s,style:{color:a.main.color,fontSize:20,cursor:"pointer"}})):(0,l.tZ)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0px"}},(0,l.tZ)("span",{style:{marginBottom:10}},b("Can't find what you're looking for?")),(0,l.tZ)(ao,{onClick:s,style:{marginBottom:20}},b("Give feedback")),r&&(0,l.tZ)("a",{onClick:()=>e.setDashboard((0,l.tZ)("div",null,(0,l.tZ)(io,null))),style:{paddingLeft:200}},b("...or blow off some steam")))},so=e=>{const[t,n]=(0,i.useState)(""),{theme:o}=(0,ee.Fg)(),a=i.useRef(null),r=n=>{n.preventDefault(),n.stopPropagation(),Nn.suggestion(t),e.setDashboard((0,l.tZ)("span",{style:{fontSize:o.base.fontSize}},b("Thanks for the feedback!"))),setTimeout(()=>e.setDashboard(void 0),2500)};i.useEffect(()=>{const e=e=>{"Enter"===e.key&&e.shiftKey&&(e.preventDefault(),e.stopPropagation(),r(e))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),i.useEffect(()=>{a.current.focus()},[]);return(0,l.tZ)("div",{style:{margin:"-15px -35px"}},(0,l.tZ)("div",{css:{display:"flex",justifyContent:"space-between","& Button":{display:"flex",alignItems:"center",fontSize:o.base.fontSize,fontWeight:500,height:24,padding:"0 4px",border:"none",borderRadius:4}}},(0,l.tZ)(ao,{onClick:()=>{},css:{color:o.base.fontColor,background:c()(o.base.fontColor).alpha(.14).css(),"&:hover":{color:o.base.fontColor,background:c()(o.base.fontColor).alpha(.1).css()},cursor:"default"}},b("Give feedback"),(0,l.tZ)(Z.Lfi,{onClick:()=>{e.setDashboard(void 0)},style:{transform:"rotate(45deg)",marginTop:2,marginLeft:4,opacity:.55,cursor:"pointer"}})),(0,l.tZ)(ao,{onClick:r,disabled:!t,css:{color:o.base.background,background:c()(o.base.fontColor).alpha(.75).css(),"&:hover":{color:o.base.background,background:c()(o.base.fontColor).alpha(.5).css()}}},b("Submit"),(0,l.tZ)(Ri.UE1,{style:{fontSize:"20px",marginLeft:4}}))),(0,l.tZ)("textarea",{name:"title",value:t,ref:a,onChange:e=>{const t=e.target.value;n(t)},placeholder:b("Give feedback or suggest a new command"),rows:8,css:{display:"flex",width:"100%",padding:16,margin:"15px 0 0 0",color:o.main.color,fontFamily:o.main.fontFamily,backgroundColor:c()(o.base.fontColor).alpha(.03).css(),border:"1px solid "+c()(o.base.fontColor).alpha(.2).css(),borderRadius:8,fontSize:o.base.fontSize,lineHeight:"16px",fontWeight:500,resize:"none","&:focus":{outline:"none"}}}))},co=e=>({color:e.main.color,fontSize:e.main.fontSize,fontFamily:e.main.fontFamily}),lo=e=>{const{theme:t}=(0,ee.Fg)(),{currentStep:n}=hi.currentStepAndIndex(e.executionPathState),i=e.executionPathState.allCommands.length,o=0===i,a=i>0&&n instanceof Xn&&e.executionPathState.isAdmin&&e.isInputEmpty&&!e.executionPathState.testMode;let r;var s;return r=o?(0,l.tZ)("div",null,(0,l.tZ)("div",null,(0,l.tZ)("div",{style:{textAlign:"center",paddingTop:"12px",fontSize:"18px",fontWeight:550,color:t.base.fontColor}},"Welcome to your shiny new ",(0,l.tZ)("span",{style:{fontWeight:700,color:t.base.primary}},"CommandBar"),"!"),(0,l.tZ)("div",{style:{display:"flex",justifyContent:"center",alignItems:"middle",padding:"16px"}},(0,l.tZ)("div",{css:e=>({borderRadius:"4px",padding:"8px 20px",backgroundColor:e.theme.base.primary,color:"white",cursor:"pointer",opacity:.9,transition:"all 0.3s ease","&:hover":{opacity:1}}),onClick:()=>window.open("https://app.commandbar.com/quickstart","_blank")},"Read the docs"),(0,l.tZ)("div",{style:{width:"12px"}}),(0,l.tZ)("div",{css:e=>({borderRadius:"4px",padding:"8px 20px",backgroundColor:e.theme.base.primary,color:"white",cursor:"pointer",opacity:.9,transition:"all 0.3s ease","&:hover":{opacity:1}}),onClick:e.openEditor},"Open the editor")))):a?(0,l.tZ)("div",null,(0,l.tZ)("p",{style:{textAlign:"center",padding:"20px 25px"}},"Click the ",(0,l.tZ)(Z.dzv,{style:{fontSize:24,color:t.main.color,position:"relative",top:5}})," ","icon to enter ",(0,l.tZ)("b",null,"test mode")," and see your unpublished or unavailable"," ",((e,t,n=t+"s",i=!1)=>i?`${e} ${1!==e?n:t}`:""+(1!==e?n:t))(i,"command"),".")):n instanceof Xn?(0,l.tZ)("div",null,e.emptyMessage?e.emptyMessage:(0,l.tZ)(ro,{setDashboard:e.setDashboard,organization:e.executionPathState.organization})):e.isInputEmpty&&(s=e.executionPathState,li(s))?(0,l.tZ)("div",{style:{display:"flex",justifyContent:"center"}},(0,l.tZ)("div",{style:{marginTop:20,marginBottom:20}},"Type to search")):(0,l.tZ)("div",{style:{display:"flex",justifyContent:"center"}},(0,l.tZ)("div",{style:{marginTop:20,marginBottom:20}},"No results")),(0,l.tZ)("div",{css:co(t)},r)};var uo=n(69778),ho=n(35491);const mo=e=>{const{group:t,themeContext:n,toggleExpansion:o,expandedGroupKeys:a}=e;return i.createElement("div",{style:{paddingTop:n.categoryHeader.paddingTop,paddingBottom:n.categoryHeader.paddingBottom,paddingLeft:n.categoryHeader.paddingLeft,paddingRight:n.categoryHeader.paddingRight,color:n.categoryHeader.color,fontSize:n.categoryHeader.fontSize,opacity:n.categoryHeader.opacity,fontWeight:n.categoryHeader.fontWeight,lineHeight:n.categoryHeader.lineHeight,background:n.categoryHeader.background,borderTop:n.categoryHeader.borderTop,marginTop:e.addTopPadding?n.optionList.spaceBetweenCategories:0,display:"flex",alignItems:"center",justifyContent:"space-between",userSelect:"none",maxHeight:ki.getDefaultHeaderHeight(n,e.addTopPadding)},key:t.key},i.createElement("div",{style:{display:"flex",color:"inherit"}},"RECOMMENDED"===t.type&&i.createElement("span",null,i.createElement(Z.pHD,{style:{fontSize:parseInt(n.categoryHeader.fontSize,10)-1,color:n.base.primary,marginRight:5}})),i.createElement("span",{style:{height:"100%",color:"inherit"}},t.name)),t.isOverLimit()&&i.createElement("span",{style:{display:"flex",cursor:"pointer",color:"inherit"},onClick:()=>{o&&o(t.key)}},i.createElement("span",{style:{fontWeight:400,color:"inherit"}},t.canExpand(a)?"See more":"See less"),i.createElement("span",{style:{marginLeft:2}},i.createElement(ho.Yc6,{className:t.canExpand(a)?"commandbar-category-expand":"commandbar-category-collapse"})),i.createElement("span",{style:{marginLeft:10,color:"inherit"}},i.createElement("span",{style:{fontWeight:700}},t.size)," ")))},po=e=>{const{header:t,...n}=e;return t?i.createElement("div",{style:{position:"relative",width:"100%"}},i.createElement("div",{style:{position:"absolute",paddingTop:e.paddingTop,top:0,zIndex:10,width:"100%",background:e.themeContext.main.background}},i.createElement("div",{style:{position:"relative"}},i.createElement(mo,Object.assign({key:"sticky-header",group:t.group,addTopPadding:!1},n))))):null},go=(e,t)=>{let n={borderLeft:"4px solid transparent"};var i;e.isFocused&&(n=null!==(i=t.optionSelected.borderHighlight)&&void 0!==i&&i.includes("gradient")?{borderLeft:"4px solid",borderImage:t.optionSelected.borderHighlight+" 1",borderImageWidth:"0px 0px 0px 4px"}:{borderLeft:"4px solid "+t.optionSelected.borderHighlight});return{...n,userSelect:"none",transition:"background-color 0s",borderRadius:t.option.borderRadius,paddingTop:t.option.paddingTop,paddingBottom:t.option.paddingBottom,paddingLeft:t.option.paddingLeft,paddingRight:t.option.paddingRight,marginLeft:t.option.marginLeft,marginRight:t.option.marginRight,minHeight:t.option.minHeight,color:e.isDisabled?t.optionDisabled.color:e.isFocused?t.optionSelected.color:t.option.color,fontSize:e.isFocused?t.optionSelected.fontSize:t.option.fontSize,fontFamily:e.isFocused?t.optionSelected.fontFamily:t.option.fontFamily,borderBottom:`1px ${t.option.borderColor} solid`,backgroundColor:e.isDisabled?t.option.background:e.isFocused?t.optionSelected.background:t.option.background,display:"flex",alignItems:"center",":active":{backgroundColor:e.isDisabled?t.optionDisabled.background:t.optionSelected.background}}},fo=e=>{const{themeContext:t,isFocused:n,executionPathState:i}=e;return(0,g.tZ)("div",{css:go({isDisabled:e.option.optionDisabled.isDisabled,isFocused:n},e.themeContext),onClick:e.onSelect,onMouseOver:()=>e.onOptionHover&&e.onOptionHover()},e.option.renderOption(t,n,i))};function vo(e,t){const n=t[e];return n instanceof ki&&0===e&&0===n.name.length}function bo(e,t,n){if(vo(e,t))return 0;return function(e,t){return t[e]instanceof ki}(e,t)?ki.getDefaultHeaderHeight(n,e>0):parseInt(n.option.minHeight,10)}const yo=new uo.t1({defaultHeight:43,fixedWidth:!0}),xo=e=>{const{theme:t}=(0,ee.Fg)(),n=i.useRef(void 0),o=i.useRef(null),a=i.useRef(!1),[r,s]=i.useState("center");i.useEffect(()=>{s("center"),setTimeout(()=>{s("auto")},0)},[e.sortedOptions]),i.useEffect(()=>{var e;yo.clearAll(),null===(e=n.current)||void 0===e||e.recomputeRowHeights()},[e.sortedOptions]);const c=e.sortedOptions,d=i.useMemo(()=>document.getElementById("commandbar-menu-virtualized-list"),[n.current]),u=i.useMemo(()=>parseInt(t.bar.menuHeight,10),[t.bar.menuHeight]),{stickyHeader:h,onVisibleRowChange:m}=((e=[])=>{const[t,n]=i.useState([]),[o,a]=i.useState(void 0),r=i.useRef(null);i.useEffect(()=>{n(c())},[e]),i.useEffect(()=>{null!==r.current&&s(r.current)},[t]);const s=e=>{a(l(e))},c=()=>e.reduce((e,t,n)=>t instanceof ki?[...e,{group:t,index:n}]:e,[]).reverse(),l=e=>{const n=t.find(t=>t.index<=e);return null!==n&&void 0!==n&&n.group.name?n:void 0};return{stickyHeader:o,onVisibleRowChange:e=>{e!==r.current&&(s(e),r.current=e)}}})(c),p=i.useMemo(()=>{if(!a.current)return null!==o.current&&h&&e.focusedIndex<=o.current+1?Math.max(e.focusedIndex-1,0):e.focusedIndex;a.current=!1},[e.focusedIndex]),g=i.useMemo(()=>{for(let e=c.length-1;e>=0;e--)if(c[e]instanceof ki)return c[e];return null},[e.sortedOptions]);if(e.isLoading&&0===e.sortedOptions.length)return(0,l.tZ)("div",null);if(0===e.sortedOptions.length)return(0,l.tZ)("div",null,e.emptyMenu);return(0,l.tZ)("div",{style:{marginTop:t.optionList.marginTop,marginBottom:t.optionList.marginBottom}},(0,l.tZ)(po,{header:h,themeContext:t,expandedGroupKeys:e.expandedGroupKeys,toggleExpansion:e.toggleGroupExpansion,paddingTop:t.optionList.paddingTop}),(0,l.tZ)(uo.aV,{id:"commandbar-menu-virtualized-list",ref:n,style:{width:"100%",paddingTop:t.optionList.paddingTop,paddingBottom:t.optionList.paddingBottom},css:{scrollbarWith:"none",msOverflowStyle:"none","::-webkit-scrollbar":{width:0,height:0},":focus":{outline:"none"}},width:parseInt(t.bar.width,10),height:(()=>{let e=u;if(n.current){const n=(()=>{var e;return null===d||void 0===d||null===(e=d.children[0])||void 0===e?void 0:e.children})();if(n){const i=e=>{const i=n[e];return i?i.getBoundingClientRect().height:bo(e,c,t)};let o=0;for(let e=0;e<c.length;e++){if(o+=i(e),o>u)break}e=Math.min(u,o)}}return e+parseInt(t.optionList.paddingBottom,10)+parseInt(t.optionList.paddingTop)})(),rowHeight:yo.rowHeight,deferredMeasurementCache:yo,rowCount:c.length,rowRenderer:({key:n,index:i,parent:o,style:r})=>{const s=c[i],d={...r,height:"auto",minHeight:bo(i,c,t)};return(0,l.tZ)(uo.Z8,{cache:yo,key:n,columnIndex:0,parent:o,rowIndex:i},vo(i,c)?(0,l.tZ)("div",null):(0,l.tZ)("div",{style:d},s instanceof ki?(0,l.tZ)(mo,{themeContext:t,expandedGroupKeys:e.expandedGroupKeys,group:s,toggleExpansion:t=>{e.toggleGroupExpansion(t),a.current=!0},addTopPadding:i>0}):(0,l.tZ)(fo,{option:s,onOptionHover:()=>{e.onOptionHover(i),a.current||(a.current=!0)},isFocused:e.focusedIndex===i,themeContext:t,executionPathState:e.executionPathState,onSelect:()=>e.onInputSelect(s)})))},onRowsRendered:({startIndex:t,stopIndex:n})=>{if(n===c.length-1){let t;g&&e.expandedGroupKeys.includes(g.key)&&(t=(g?ki.getObjectGroupContextKey(g):null)||void 0),e.getNextPageResults(t)}m(t),o.current=t},scrollToIndex:p,scrollToAlignment:r}))},So=e=>(0,l.tZ)("div",null,(0,l.tZ)(xo,{categories:e.categories,sortedOptions:e.sortedOptions,isLoading:e.isLoading,executionPathState:e.executionPathState,onInputSelect:e.onInputSelect,focusedIndex:e.focusedIndex,onOptionHover:e.onOptionHover,expandedGroupKeys:e.expandedGroupKeys,toggleGroupExpansion:e.toggleGroupExpansion,getNextPageResults:e.getNextPageResults,emptyMenu:(0,l.tZ)(lo,{executionPathState:e.executionPathState,emptyMessage:e.emptyMessage,setDashboard:e.setDashboard,openEditor:e.openEditor,isInputEmpty:e.isInputEmpty})}));var Co;function Eo(){return(Eo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function wo({title:e,titleId:t,...n},o){return i.createElement("svg",Eo({width:17,height:16,viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:o,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,Co||(Co=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6692 5.5855C11.7363 5.78437 11.6148 5.99325 11.4121 6.04756L10.109 6.39672C9.88074 6.45789 9.6483 6.32119 9.56208 6.10111C9.28366 5.39045 8.79799 4.77571 8.16364 4.33972C7.41117 3.82257 6.49887 3.59088 5.59083 3.68631C4.68279 3.78175 3.8386 4.19806 3.2101 4.86036C2.5816 5.52266 2.21004 6.38748 2.16226 7.29928C2.11447 8.21107 2.39359 9.10999 2.94942 9.83436C3.50525 10.5587 4.3013 11.061 5.19439 11.2508C6.08748 11.4407 7.019 11.3056 7.8214 10.8699C8.49786 10.5026 9.04512 9.94204 9.3963 9.26437C9.50505 9.05451 9.75051 8.94285 9.97117 9.02756L11.1858 9.49381C11.1893 9.49514 11.1927 9.49651 11.1961 9.49793L15.736 11.2406C15.9566 11.3253 16.0668 11.5729 15.9821 11.7935L15.522 12.9922C15.4373 13.2128 15.1898 13.3231 14.9691 13.2384L12.0871 12.1321L11.6769 11.9746C11.3806 11.8608 11.0539 11.7319 10.8313 11.4931C10.7704 11.4278 10.7023 11.3423 10.6479 11.2708C10.1565 11.8776 9.54743 12.3872 8.85063 12.7655C7.59688 13.4463 6.14138 13.6573 4.74592 13.3607C3.35047 13.0641 2.10664 12.2793 1.23816 11.1475C0.369681 10.0156 -0.0664482 8.61106 0.00821636 7.18639C0.0828809 5.76171 0.663439 4.41042 1.64547 3.37558C2.6275 2.34074 3.94655 1.69026 5.36536 1.54113C6.78418 1.39201 8.20965 1.75403 9.38537 2.56209C10.4564 3.2982 11.2562 4.36044 11.6692 5.5855Z",fill:"#706E78"})))}const ko=i.forwardRef(wo),To="styles_poweredContainer__YRbFW",Io=e=>{var t,n,o,a,r,s,l,d,u;const{theme:h}=(0,ee.Fg)(),m="branded"===(null===(t=e.organization)||void 0===t?void 0:t.branding),p=["294a5b63"],g=e.organization&&["ac5f6bc2","2ab00bc5",...p].includes(null===(n=e.organization)||void 0===n?void 0:n.id.toString()),v={display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:h.footer.paddingTop,paddingBottom:h.footer.paddingBottom,paddingLeft:h.footer.paddingLeft,paddingRight:h.footer.paddingRight,borderTop:h.footer.borderTop,backgroundColor:h.footer.background,borderRadius:`0px 0px ${h.main.borderRadius} ${h.main.borderRadius}`},y=i.useMemo(H,[]);let x=[];[B.MAC].includes(y)?x=["command","k"]:[B.WINDOWS,B.LINUX].includes(y)&&(x=["ctrl","k"]);const S=e.isAdmin?f.Z.get("customcontext","").toString():"",C=S?i.createElement(te,{color:c()("#177DDC")},"[",JSON.parse(S).name,"]"):null,E="31faae81"===(null===(o=e.organization)||void 0===o?void 0:o.id)?i.createElement(te,{color:c()("#5289b7"),style:{marginLeft:12}},"Beta"):null;if(!e.organization)return null;const w=i.createElement("div",{style:{width:4}}),k="10d7dc04"===(null===(a=e.organization)||void 0===a?void 0:a.id)&&0===e.currentStepIndex?i.createElement("div",{style:{display:"flex",alignItems:"center"}},i.createElement(ne,{keys:["↑"]}),w,i.createElement(ne,{keys:["↓"]}),w,i.createElement("div",null,"to navigate."),w,w,i.createElement(ne,{keys:["Return"]}),w,i.createElement("span",null,"to select.")):null,T="10d7dc04"===(null===(r=e.organization)||void 0===r?void 0:r.id)&&(null===(s=window.CommandBar.shareCallbacks())||void 0===s?void 0:s["global-switchToLegacy"]),I="10d7dc04"===(null===(l=e.organization)||void 0===l?void 0:l.id)&&T?i.createElement(i.Fragment,null,i.createElement("div",{onClick:()=>T({},{}),style:{cursor:"pointer"}},"Legacy QuickSwitch"),w,w,w,i.createElement("div",{style:{height:16,width:1,background:h.keyboardShortcuts.borderColor}})):null,D=m?i.createElement("div",{className:To,onClick:()=>{var t,n;(Nn.clickedBranding(),p.includes(null===(t=e.organization)||void 0===t?void 0:t.id))?window.open("https://commandbar.com/","_blank"):window.open("https://commandbar.com/powered-by-commandbar?org="+((null===(n=e.organization)||void 0===n?void 0:n.name)||encodeURI("This app")),"_blank")}},i.createElement(ko,{style:{marginRight:"5px"}}),i.createElement("span",{style:{fontSize:"12px",color:h.main.color}},b("Powered by CommandBar"))):null;if("5725a2a3"===(null===(d=e.organization)||void 0===d?void 0:d.id)){let t="command";[B.WINDOWS,B.ANDROID,B.LINUX].includes(H())&&(t="ctrl");const n=i.createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between",fontWeight:500}},i.createElement("div",null,i.createElement("span",null,"Press")," ",i.createElement("span",{style:{fontWeight:600}},t)," ",i.createElement("span",{style:{fontWeight:600}},"+ K")," ",i.createElement("span",null,"to access search")),i.createElement("div",{className:To,onClick:()=>{var t,n;(Nn.clickedBranding(),p.includes(null===(t=e.organization)||void 0===t?void 0:t.id))?window.open("https://commandbar.com/","_blank"):window.open("https://commandbar.com/powered-by-commandbar?org="+((null===(n=e.organization)||void 0===n?void 0:n.name)||encodeURI("This app")),"_blank")}},i.createElement(ko,{style:{marginRight:"5px"}}),i.createElement("span",{style:{fontSize:"14px",color:h.main.color}},b("Powered by CommandBar"))));return i.createElement("div",{style:{position:"relative"}},i.createElement("div",{style:{...v,fontFamily:h.main.fontFamily}},n))}return g?i.createElement("div",{style:{position:"relative"}},i.createElement("div",{style:v},i.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%"}},D))):i.createElement("div",{style:{position:"relative"}},i.createElement("div",{style:v},i.createElement("div",{style:{display:"flex",alignItems:"center",width:"100%"}},k||D,i.createElement("div",{style:{flexGrow:1}}),I,C,i.createElement("span",{style:{width:10}}),!1===(null===(u=e.organization)||void 0===u?void 0:u.in_bar_feedback)?null:i.createElement(ro,{organization:e.organization,setDashboard:e.setDashboard,isIcon:!0}),e.isAdmin&&i.createElement(Te.Z,{prefixCls:"commandbar-tooltip",overlay:i.createElement("span",{style:{fontFamily:h.main.fontFamily}},b((e.testMode?"Exit":"Enter")+" test mode")),placement:"bottom"},e.testMode?i.createElement(Z.Xrf,{size:"22px",onClick:()=>e.setTestMode(!e.testMode),style:{color:h.base.primary,cursor:"pointer",marginLeft:10}}):i.createElement(Z.dzv,{size:"22px",onClick:()=>e.setTestMode(!e.testMode),style:{color:h.main.color,cursor:"pointer",marginLeft:10}})),E,i.createElement(Te.Z,{prefixCls:"commandbar-tooltip",overlay:i.createElement("span",{style:{fontFamily:h.main.fontFamily}},b(`Type ${F()}+K to open and close`)),placement:"bottom"},i.createElement("div",{style:{cursor:"default",marginLeft:13}},i.createElement(ne,{keys:x}))))))};const Do=(e,t)=>{const[n,o]=i.useState(0),{expandedGroupKeys:a,toggleGroupExpansion:r}=Oi(),{currentStep:s,currentStepIndex:c}=hi.currentStepAndIndex(e.executionPathState),l=i.useRef(),{theme:d}=(0,ee.Fg)();i.useImperativeHandle(t,()=>({onInputChange:t=>{e.onInputChange(t)},selectCurrentOption:()=>{v()},focus:()=>{m()},blur:()=>{p()},resetFocus:()=>{x()}})),i.useEffect(()=>{e.autoFocus&&m()});const u=i.useRef(!1),h=i.useMemo(()=>Pi.sort(e.options,{organization:e.organization,categories:e.categories,user:e.endUser,inputText:e.inputText,hackContextSettings:e.executionPathState.hackContextSettings,activeObjects:e.executionPathState.activeObjects,expandedGroupKeys:a,currentStep:s}),[e.options,e.categories,a]);i.useEffect(()=>{x()},[c,e.inputText]),i.useEffect(()=>{var t;if(s instanceof jn&&null!==s&&void 0!==s&&null!==(t=s.selected)&&void 0!==t&&t.data&&0===e.inputText.length){const e=h.findIndex(e=>e instanceof Wt&&Wt.isSelected(e,s));-1!==e&&o(e)}},[s,h]);const m=()=>{var e;null===l||void 0===l||null===(e=l.current)||void 0===e||e.focus()},p=()=>{var e;null===l||void 0===l||null===(e=l.current)||void 0===e||e.blur()},f=e=>{o(function(e,t,n){switch(n){case"up":for(let n=1;n<e.length;n++){const i=t-n,o=i>=0?i:e.length+i;if(e[o]instanceof W)return o}break;case"down":for(let n=1;n<e.length;n++){const i=(t+n)%e.length;if(e[i]instanceof W)return i}}return t}(h,n,e))},v=()=>{const e=h[n];e instanceof W&&y(e)},b=i.useMemo(F,[]),y=async t=>{const{isDisabled:n}=t.optionDisabled;n||(e.dispatch.setSearchFilter(void 0),t.choose(e.executionPathState,e.executionPathDispatch),s instanceof Gn||e.onInputChange(""))},x=()=>{o(function(e){for(let t=0;t<e.length;t++)if(e[t]instanceof W)return t;return 1}(h))},S=i.useCallback(t=>{e.dispatch.executionPathDispatch({type:"setTestMode",testMode:t})},[e.dispatch.executionPathDispatch]),C=i.useCallback(t=>{e.dispatch.setDashboard(t)},[e.dispatch.setDashboard]),E=e.loading||!e.executionPathState.commandsLoaded;return(0,g.tZ)("div",{style:{width:"100%"},onKeyDown:t=>{if(u.current=!0,"ArrowDown"===t.key&&(f("down"),t.stopPropagation(),t.preventDefault()),"ArrowUp"===t.key&&(f("up"),t.stopPropagation(),t.preventDefault()),"Enter"!==t.key||z(t)||(we(e.inputText)?(e.openEditor(),t.stopPropagation(),t.preventDefault()):v()),"n"===t.key&&t.ctrlKey&&"ctrl"!==b.toLowerCase()&&(f("down"),t.stopPropagation(),t.preventDefault()),"p"===t.key&&t.ctrlKey&&"ctrl"!==b.toLowerCase()&&(f("up"),t.stopPropagation(),t.preventDefault()),"Tab"===t.key&&(f("down"),t.stopPropagation(),t.preventDefault()),"Home"===t.key&&(t.stopPropagation(),t.preventDefault(),t.shiftKey?t.target.selectionStart=0:t.target.setSelectionRange(0,0)),"End"===t.key){t.stopPropagation(),t.preventDefault();const e=t.target.value.length;t.shiftKey?t.target.selectionEnd=e:t.target.setSelectionRange(e,e)}e.onKeyDown(t)}},(0,g.tZ)(xi,{executionPathState:e.executionPathState,executionPathDispatch:e.executionPathDispatch,activeSearchFilter:e.searchFilter,clearSearchFilter:e.clearSearchFilter,inputText:e.inputText,onInputChange:e.onInputChange,isLoading:E,inputRef:l}),(0,g.tZ)("div",{style:{height:e.menuIsOpen?"auto":"0px",overflow:"hidden",border:e.menuIsOpen?d.menu.border:"none",borderRadius:d.menu.borderRadius,marginTop:d.menu.marginTop}},(0,g.tZ)(So,{categories:e.categories,sortedOptions:h,isLoading:E,executionPathState:e.executionPathState,onInputSelect:y,focusedIndex:n,onOptionHover:e=>{u.current?u.current=!1:e!==n&&o(e)},expandedGroupKeys:a,toggleGroupExpansion:r,setDashboard:C,openEditor:e.openEditor,emptyMessage:e.emptyMessage,isInputEmpty:0===e.inputText.length,getNextPageResults:t=>{ue.getNextPageResults(e.executionPathState,e.inputText,t=>e.dispatch.setLoading(t),t)}}),(0,g.tZ)(Io,{setDashboard:C,isAdmin:e.executionPathState.isAdmin,testMode:e.executionPathState.testMode,setTestMode:S,organization:e.executionPathState.organization,currentStepIndex:c})))},Ao=i.forwardRef(Do),_o=e=>{const{theme:t}=(0,ee.Fg)();let n=!1;var i;null!==document.getElementById("commandbar-wrapper")&&(n=null!==(i=document.getElementById("commandbar-wrapper"))&&void 0!==i&&i);return(0,l.tZ)(a.Z,{visible:e.visible,closable:!1,destroyOnClose:!0,maskStyle:{backgroundColor:"rgba(0,0,0,0.15)"},bodyStyle:{backgroundColor:t.main.background,color:t.main.color,height:"100vh",width:"375px",padding:"32px 40px 32px 32px"},wrapClassName:"commandbar-keboardcheatsheet",style:{fontFamily:t.main.fontFamily,width:"375px",margin:"0px 0px 0px auto"},zIndex:Hn.Z_KEYBOARD_SHORTCUTS,getContainer:n,mask:!0,maskClosable:!0,onClose:e.onClose},(0,l.tZ)("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},(0,l.tZ)(Z.oHP,{style:{position:"absolute",top:12,right:12,fontSize:14,cursor:"pointer",color:t.main.color},onClick:e.onClose}),e.children))},Po={marginTop:24,fontSize:16,fontWeight:500,borderBottom:"1px solid #c1c7cd",padding:"0 0 8px 2px"},Oo={fontSize:14,borderBottom:"1px solid grey",display:"flex",justifyContent:"space-between",padding:"6px",alignItems:"center"},Ro=e=>{const{theme:t}=(0,ee.Fg)();return(0,l.tZ)("input",{type:"text",name:"search",value:e.searchTerm,onChange:e.onSearch,onFocus:e.onFocus,onBlur:e.onBlur,placeholder:"Search...",autoComplete:"off",autoFocus:!0,css:{width:"100%",color:t.main.color,backgroundColor:"transparent",border:"1px solid "+t.base.primary,borderRadius:4,padding:6,fontSize:14,"&:focus":{outline:"none"}}})},Lo=(e,t,n)=>{const i=e.split(new RegExp(`(${o=t,o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi"));var o;return n?i.map((e,n)=>e.toLowerCase()===t.toLowerCase()?(0,l.tZ)("span",{key:`part-${e}-${n}`,style:{opacity:1}},e):(0,l.tZ)("span",{key:`part-${e}-${n}`,style:{opacity:.7}},e)):i.map((e,t)=>(0,l.tZ)("span",{key:`part-${e}-${t}`,style:{opacity:1}},e))},No=e=>{const t=i.useMemo(H,[]),[n,o]=i.useState(""),[a,r]=i.useState(!1),s=t=>{"Escape"===t.key&&e.setVisible(!1)},c=t=>void 0===e.availableCommands.find(e=>e.id===t.id);i.useEffect(()=>(e.visible?document.addEventListener("keydown",s):document.removeEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}),[e.visible]);const d=e.commands.filter(i=>{if(void 0===i)return!1;const o=n.toLowerCase();let a=!1;[B.MAC].includes(t)?a=i.shortcut_mac.length>0:[B.WINDOWS,B.LINUX].includes(t)&&(a=i.shortcut_win.length>0);const r=""===o||i.text.toLowerCase().includes(o),s=e.categories.filter(e=>""===o||e.name.toLowerCase().includes(o)).map(e=>e.id),c=null!==i.category&&s.includes(i.category);return i.is_live&&(a&&r||a&&c)}),u=d.filter(e=>null===e.category),h=[B.MAC].includes(t)?["command","k"]:[B.WINDOWS,B.LINUX].includes(t)?["ctrl","k"]:[],m=(0,l.tZ)("div",{key:"command-bar-shortcut",style:Oo},(0,l.tZ)("div",null,Lo("Open Command Bar",n,a)),(0,l.tZ)("div",null,(0,l.tZ)(ne,{keys:h})));return(0,l.tZ)(_o,{onClose:()=>e.setVisible(!1),visible:e.visible},(0,l.tZ)("div",{style:{fontWeight:500,fontSize:20,display:"flex"}},"Keyboard Shortcuts"),(0,l.tZ)("div",{style:{marginTop:15}},(0,l.tZ)(Ro,{searchTerm:n,onSearch:e=>{o(e.target.value)},onFocus:()=>{r(!0)},onBlur:()=>{r(!1)}})),(0,l.tZ)("div",{style:{flexGrow:1,overflowY:"scroll"}},(0,l.tZ)("br",null),m,e.categories.map(e=>{const i=d.filter(t=>t.category===e.id);return 0===i.length?null:(0,l.tZ)("div",{key:"category-"+e.id},(0,l.tZ)("div",{style:Po},e.name),i.map(i=>{let o=[];return[B.MAC].includes(t)?o=i.shortcut_mac:[B.WINDOWS,B.LINUX].includes(t)&&(o=i.shortcut_win),(0,l.tZ)("div",{key:`category-${e.id}-command-${i.id}`,style:{...Oo,...c(i)?{opacity:.6}:{}}},(0,l.tZ)("div",null,Lo(i.text,n,a)),(0,l.tZ)("div",{style:{display:"flex",alignItems:"center"}},(0,l.tZ)(ne,{keys:o})))}))}),0===u.length?null:(0,l.tZ)("div",null,e.categories.length>0?(0,l.tZ)("div",{style:Po},"other"):(0,l.tZ)("br",null),u.map(e=>{let i=[];return[B.MAC].includes(t)?i=e.shortcut_mac:[B.WINDOWS,B.LINUX].includes(t)&&(i=e.shortcut_win),(0,l.tZ)("div",{key:"other-"+e.id,style:{...Oo,...c(e)?{opacity:.6}:{}}},(0,l.tZ)("div",null,Lo(e.text,n,a)),(0,l.tZ)("div",null,(0,l.tZ)(ne,{keys:i})))}))))},Mo=e=>{"string"===typeof e?Bo(e):e.preview||Bo(e.event)},Bo=e=>{""===e||f.Z.set(e,!0)},Ho=(e,t,n,i)=>{var o,a;(t.setDashboard(void 0),t.executionPathDispatch({type:"setVisible",visible:!0}),t.onboardingDispatch({type:"Start",data:{trigger:"new-user-open"}}),Mo("showcase"),Mo(e.activeGuide.event),null!==i&&void 0!==i&&i.startingInput)&&(null===(o=e.refContainer)||void 0===o||null===(a=o.current)||void 0===a||a.onInputChange(i.startingInput,void 0));if(null!==i&&void 0!==i&&i.categoryFilterID){const n=e.categories.find(e=>e.id===i.categoryFilterID);if(n){const e=e=>e.filter(e=>{var t;return(null===e||void 0===e||null===(t=e.command)||void 0===t?void 0:t.category)===i.categoryFilterID});t.setSearchFilter({name:n.name,filter:e})}}Nn.search.start(e.onboardingState,n)},zo=(e,t)=>{var n,i,o,a;Nn.search.end(e.inputText,e.executionPathState,e.onboardingState),"SubmissionForm"!==(null===(n=e.dashboard)||void 0===n||null===(i=n.type)||void 0===i?void 0:i.name)?(t.executionPathDispatch({type:"setVisible",visible:!1}),t.setDashboard(void 0),t.setSearchFilter(void 0),null===(o=e.refContainer)||void 0===o||null===(a=o.current)||void 0===a||a.resetFocus(),setTimeout(()=>{t.setInputText("")},100),t.setActiveGuide({id:-1,organization:"",event:"",nudge:"",guidance:""}),t.onboardingDispatch({type:"Exit"})):t.setDashboard(void 0)},Fo=(e,t)=>{e.executionPathDispatch({type:"setCommands",commands:t})},Zo=(e,t,n,i,o)=>{const a={...t.executionPathState,context:(0,d.Kb)().shareContext(),callbacks:(0,d.Kb)().shareCallbacks(),steps:[new Xn(null)]},r=new Ie(a,e),{isDisabled:s}=r.optionDisabled;return s?o&&o():(r.choose(a,n.executionPathDispatch,!0),i&&i()),s};var Uo=n(25233);let Wo;!function(e){e[e.MODAL=0]="MODAL",e[e.INLINE=1]="INLINE"}(Wo||(Wo={}));const jo=e=>{const{theme:t}=(0,ee.Fg)(),n=i.useRef(null),o=i.createElement("div",{style:{position:"relative",width:"100%"},onBlur:t=>{const i=null===n||void 0===n?void 0:n.current;i&&!i.contains(t.relatedTarget)&&e.close()},onClick:e.open,ref:n},i.createElement("div",{style:{backgroundColor:t.main.background,borderRadius:t.main.borderRadius,border:"1px solid "+t.main.borderColors,width:"inherit",zIndex:Hn.Z_EDITOR,boxShadow:t.main.boxShadow,position:"absolute",top:0}},e.children));return Uo.createPortal(o,e.rootElement)};var Ko,Go=n(89026);!function(e){e.opened="commandbar-opened",e.selected="commandbar-selected"}(Ko||(Ko={}));const Vo=e=>{const[t,n]=i.useState(e.state.executionPathState.options),[o,s]=i.useState(!1),[l,h]=i.useState(""),[m,g]=i.useState(!1),f=i.useRef(!1),v=Yn().width;i.useEffect(()=>()=>{f.current=!0},[]),i.useLayoutEffect(()=>{e.dispatch.search.setCollection(e.state.executionPathState.options),x()},[e.state.executionPathState.options,e.state.searchFilter]),i.useLayoutEffect(()=>{b(e.state.executionPathState)},[e.state.executionPathState.options]);const b=t=>{const{currentStep:n}=hi.currentStepAndIndex(t);if(!(n instanceof Xn&&n.resource))return;const i=1===t.options.length&&t.options[0];if(i)return void i.choose(e.state.executionPathState,e.dispatch.executionPathDispatch);const a=(e=>{const{currentStep:t}=hi.currentStepAndIndex(e),n=t instanceof Xn&&t.resource;if(!n)return;const i=n.getDefaultCommandId();return e.options.find(e=>e instanceof Ie&&e.command.id===i)})(t);!a||o||a.choose(e.state.executionPathState,e.dispatch.executionPathDispatch)},y=e=>e.includes("commandbar-search-"),x=()=>{var t;const{currentStep:i}=hi.currentStepAndIndex(e.state.executionPathState);var o;i instanceof Vn&&null!==(t=i.selected)&&void 0!==t&&t.data&&(e.dispatch.setInputText(null===(o=i.selected)||void 0===o?void 0:o.data),n(P(e.state.executionPathState.options,e.state.inputText)));if(ri(i)){const t=R(e.state.inputText,i);n(t)}else if(si(i)||ci(i,e.state.executionPathState))n([]),S(i),C(e.state.executionPathState);else{var a;if(0===e.state.inputText.length)if(i instanceof Gn&&Object.keys(e.state.executionPathState.callbacks).find(y)&&0===e.state.executionPathState.options.length&&Array.isArray(null===(a=i.selected)||void 0===a?void 0:a.data)){var r;const t=((null===(r=i.selected)||void 0===r?void 0:r.data)||[]).map(t=>Wt.convertParameterToOption(e.state.executionPathState,t,i.argument));n(t)}else n(P(e.state.executionPathState.options,e.state.inputText));else if(Object.keys(e.state.executionPathState.callbacks).find(y)){let t=P(e.dispatch.search.search(e.state.inputText,e.state.executionPathState),e.state.inputText);zt(i)&&(t=Zt({executionPathState:e.state.executionPathState,options:t,inputValue:e.state.inputText,currentStep:i})),n(t)}}},S=async t=>{let i,o;if(M(t.argument)&&(i=t.argument.value,o=e.state.executionPathState.callbacks[i]),N(t.argument)&&(i="commandbar-initialvalue-"+t.argument.value,o=e.state.executionPathState.callbacks[i]),void 0!==o){e.dispatch.setLoading(!0);const i=hi.selections(e.state.executionPathState);try{const a=(await o(i)).map(n=>Wt.convertParameterToOption(e.state.executionPathState,n,t.argument));e.dispatch.search.setCollection(a),n(a)}finally{e.dispatch.setLoading(!1)}}},C=async t=>{var n;const{currentStep:i}=hi.currentStepAndIndex(t);var o;if(ai(i)&&(null!==i&&void 0!==i&&null!==(n=i.argument)&&void 0!==n&&n.preselected_key&&he(null===i||void 0===i||null===(o=i.argument)||void 0===o?void 0:o.preselected_key,t))){var a;const t="commandbar-initialvalue-"+(null===i||void 0===i||null===(a=i.argument)||void 0===a?void 0:a.preselected_key),n=e.state.executionPathState.callbacks[t],o=hi.selections(e.state.executionPathState),r=await n(o);i.setSelections(r)}},[E,w]=i.useState(Ko.opened);i.useEffect(()=>{w(Ko.opened)},[e.state.executionPathState.visible]);const{currentStepIndex:k}=hi.currentStepAndIndex(e.state.executionPathState);i.useEffect(()=>{w(Ko.selected),setTimeout(()=>{if(f.current)return console.warn("attempted to set animation class after unmount");w("")},400)},[k]),i.useEffect(()=>{if(e.state.executionPathState.visible&&!e.state.executionPathState.testMode&&t.length>0){const t=e.state.executionPathState.options.filter(e=>e instanceof Ie).map(e=>e.command.id);L.Z.availability(t)}},[e.state.executionPathState.visible]),i.useEffect(()=>{Object.keys(e.state.executionPathState.callbacks).forEach(async t=>{if(t.startsWith("commandbar-initialvalue-")){const i=t.split("commandbar-initialvalue-")[1];try{const n=await e.state.executionPathState.callbacks[t]();(0,d.Kb)().addContext(i,n)}catch(n){console.error("Function loader caused an error. Key: "+i)}}})},[e.state.executionPathState.visible]),i.useEffect(()=>{e.state.executionPathState.visible||T(e.state.executionPathState)},[e.state.executionPathState.visible]);const T=t=>{Object.keys(t.callbacks).forEach(async e=>{if(e.includes("commandbar-search-")){const t=e.split("commandbar-search-")[1];ue.clear(t),I(e,e=>[],"")}}),e.dispatch.setLoading(!1)},I=i.useCallback((0,r.Z)(async(e,t,n,i)=>t(n,i),150,{onlyResolvesLast:!0,key:(e,t,n)=>e}),[]),D=(t,i)=>{let o=P(e.dispatch.search.search(t,i),t);const{currentStep:a}=hi.currentStepAndIndex(i);zt(a)&&(o=Zt({executionPathState:i,options:o,inputValue:t,currentStep:a})),n(o)},A=i.useMemo(()=>(0,Go.debounce)(D,150),[]),_=i.useCallback(()=>e.state.categories.filter(e=>e.setting_hide_before_search).map(e=>e.id),[e.state.categories]),P=(t,n)=>{const i=_(),{currentStep:o}=hi.currentStepAndIndex(e.state.executionPathState);return e.state.searchFilter?e.state.searchFilter.filter(t):t.filter(t=>{return!!di(t,e.state.executionPathState.activeObjects)||!(t instanceof en&&0===n.length)&&(t instanceof Qt?!((null===(a=t.searchOptions)||void 0===a||!a.showResources)&&o instanceof Xn&&null===o.resource&&0===n.length):!(t instanceof Ie&&0===n.length&&t.command.category&&i.includes(t.command.category)&&!t.isRecommended));var a})},O=(t,n)=>new Wt(e.state.executionPathState,t.argument.userDefinedName,n),R=(t,n)=>Dt.search({inputValue:t,type:n.argument.dateTimeArgumentTypeId}).map(t=>new Wt(e.state.executionPathState,t.label,t)),B=(t,n)=>{const i=0===t.length&&e.state.inputText.length>0,o="menu-close"===(null===n||void 0===n?void 0:n.action);i&&o&&Nn.deadend(e.state.inputText,"Resetting search",e.state.executionPathState)},H=t=>{0===t.length&&m&&l.length>0&&(Nn.deadend(l,"Backspaced",e.state.executionPathState),h(""))},F=i.useCallback((0,r.Z)(t=>{Nn.search.inputChange(t,e.state.executionPathState)},500),[]),Z=()=>document.getElementById("commandbar-editor-drawer"),U=()=>{var e;const t=null===(e=document.getElementById("commandbar-editor-drawer"))||void 0===e?void 0:e.querySelector(".drawer-handle");t&&t.click()},W=t=>{const{currentStep:n}=hi.currentStepAndIndex(e.state.executionPathState);n instanceof Gn&&(e.dispatch.executionPathDispatch({type:"updateFulfillAndRebase",updatedState:e.state.executionPathState}),e.dispatch.setInputText(""),t.preventDefault(),t.stopPropagation())},j=e=>e.filter(e=>e instanceof Ie).map(e=>e.command),{theme:K}=(0,ee.Fg)();let G=!1;var V;null!==document.getElementById("commandbar-container")&&(G=null!==(V=document.getElementById("commandbar-container"))&&void 0!==V&&V);const X=function(e){return"5725a2a3"===(null===e||void 0===e?void 0:e.id)}(e.state.executionPathState.organization)?Wo.INLINE:Wo.MODAL;const Y=!!e.state.dashboard||X===Wo.INLINE&&!e.state.executionPathState.visible,J=i.createElement("div",{id:"commandbar-home",onKeyUp:e=>{e.stopPropagation()},onKeyPress:e=>{e.stopPropagation()},onKeyDown:e=>{e.stopPropagation()}},e.state.dashboard?i.createElement(p,{onClose:()=>zo(e.state,e.dispatch)},e.state.dashboard):i.createElement(Ao,{organization:e.state.executionPathState.organization,executionPathState:e.state.executionPathState,executionPathDispatch:e.dispatch.executionPathDispatch,inputText:e.state.inputText,onInputChange:(t,i)=>{if("input-blur"===(null===i||void 0===i?void 0:i.action)||"menu-close"===(null===i||void 0===i?void 0:i.action))return;const{currentStep:o}=hi.currentStepAndIndex(e.state.executionPathState);if(o instanceof Gn&&"set-value"===(null===i||void 0===i?void 0:i.action))return;let a;B(t,i),H(t),e.state.onboardingState.isActive||F(t),e.dispatch.setInputText(t),we(t)?(a=[],n(a)):void 0!==o&&o instanceof Vn?(a=[O(o,t)],n(a)):ri(o)?(a=R(t,o),n(a)):e.dispatch.search.getCollection().length>500?A(t,e.state.executionPathState):D(t,e.state.executionPathState),((t,n)=>{const{currentStep:i}=hi.currentStepAndIndex(t),o=i instanceof Xn&&null===i.resource||void 0===i,a=Object.keys(t.hackContextSettings).filter(e=>!!t.hackContextSettings[e].search),r=ai(i)&&N(i.argument)?i.argument.value:void 0;Object.keys(t.callbacks).map(async i=>{if(i.includes("commandbar-search-")){const c=i.split("commandbar-search-")[1];if(o&&!a.includes(c))return;if(!o&&r!==c)return;if(0===n.length)ue.clear(c),I(i,e=>[],n),e.dispatch.setLoading(!1);else{e.dispatch.setLoading(!0);try{const e=await I(i,t.callbacks[i],n);ue.set(c,e)}catch(s){}e.dispatch.setLoading(!1)}}})})(e.state.executionPathState,t)},onKeyDown:t=>{if("Enter"===t.key&&z(t)){const{currentStep:i}=hi.currentStepAndIndex(e.state.executionPathState);var n;if(i instanceof Gn)W(t);else s(!0),null===(n=e.state.refContainer.current)||void 0===n||n.selectCurrentOption();t.stopPropagation(),t.preventDefault()}else s(!1);"Backspace"===t.key?m||(g(!0),h(e.state.inputText)):(m&&g(!1),l&&h(""))},options:t,menuIsOpen:!Y,loading:e.state.loading,emptyMessage:e.state.emptyMessage,endUser:e.state.endUser,openEditor:()=>{if(window.location.href.includes("app.commandbar.com")&&"revelio:editor"!==e.state.inputText)return void e.dispatch.setDashboard(i.createElement("div",null,i.createElement("div",null,"Whoa, whoa there!"),i.createElement("div",null,"How about loading the editor on your own site, why don't ya 😃")));if(Z())return U(),void e.dispatch.executionPathDispatch({type:"setVisible",visible:!1});const t=setInterval(()=>{if(f.current)return console.warn("attempted to check for editor after unmount");Z()&&(clearInterval(t),setTimeout(()=>{if(f.current)return console.warn("attempted to show editor after unmount");U(),e.dispatch.setDashboard(void 0),e.dispatch.executionPathDispatch({type:"setVisible",visible:!1})},500))},500);let n;n=c()(K.main.background).luminance()>.8?i.createElement("div",null,i.createElement("img",{alt:"light paperplane",src:"https://staticassets.commandbar.com/commandbar/paperplane_white_300.gif"})):i.createElement("div",null,i.createElement("img",{alt:"dark paperplane",src:"https://staticassets.commandbar.com/commandbar/paperplane_300.gif"})),e.dispatch.setDashboard(n);setTimeout(()=>{if(f.current)return console.warn("attempted to show editor loading error after unmount");Z()||(clearInterval(t),e.dispatch.setDashboard(i.createElement("div",null,"Something went wrong... Please try again.")))},6e3),setTimeout(()=>{if(f.current)return console.warn("attempted to load editor after unmount");(0,d.Kb)()[u.fd]()},500)},categories:e.state.categories,searchFilter:e.state.searchFilter,clearSearchFilter:()=>e.dispatch.setSearchFilter(void 0),autoFocus:X!==Wo.INLINE,dispatch:e.dispatch,ref:e.state.refContainer}));switch(X){case Wo.INLINE:const t=document.getElementById("commandbar-inline-root");if(t)return i.createElement(jo,{close:e.onClose,open:()=>{e.dispatch.executionPathDispatch({type:"setVisible",visible:!0})},rootElement:t},J);case Wo.MODAL:default:return i.createElement(i.Fragment,null,i.createElement(a.Z,{visible:!!e.state.previewMode||e.state.executionPathState.visible,closable:!1,destroyOnClose:!1,keyboard:!1,maskStyle:{backgroundColor:"rgba(55, 55, 55, 0.95)"},bodyStyle:{backgroundColor:K.main.background,borderRadius:K.main.borderRadius,padding:"0px 0px 0px 0px",boxShadow:K.main.boxShadow,zIndex:1,margin:"0px 5px"},wrapClassName:"commandbar-modal",style:{fontFamily:K.main.fontFamily,backgroundColor:"transparent",top:K.bar.top,width:v<parseInt(K.bar.width,10)?void 0:K.bar.width},className:"commandbar-dialog "+E,zIndex:Hn.Z_EDITOR,getContainer:G,mask:e.state.onboardingState.isActive,onClose:e.onClose},J),e.state.showKeyboardShortcutCheatsheet&&i.createElement(No,{visible:e.state.showKeyboardShortcutCheatsheet,setVisible:e.dispatch.setShowKeyboardShortcutCheatsheet,commands:j(e.state.executionPathState.options),availableCommands:e.state.executionPathState.options.map(e=>e.command?e.command:void 0),categories:e.state.categories}))}},Xo={primary:c()("rgb(174, 177, 221)"),background:c()("rgba(36, 35, 41, 0.98)"),font:c()("rgba(255,255,255,0.85)"),fontFamily:"Avenir Next, proxima-nova, sans-serif"},Yo=(Jo=Xo,{...Jo,fontSecondary:c()("#808080")});var Jo;const qo=i.createContext(Yo);var $o=n(67493),Qo=n(34815),ea=n.n(Qo);const ta={organization:void 0,logo:"",themeSource:"",hackContextSettings:{},allCommands:[],context:{},callbacks:{},testMode:!1,isAdmin:!1,commandsLoaded:!1,visible:!1,options:[],steps:[new Xn(null)],simulation:!1,baseTheme:void 0,activeObjects:{}},na=(0,$o.Z)(Jt.available,(e,t)=>{if(1!==e.length||1!==t.length)return!1;const{visible:n,simulation:i,options:o,...a}=e[0],{visible:r,simulation:s,options:c,...l}=t[0];return Ae()(a,l)}),ia=(e,t)=>{var n,i,o;let a=e;switch(t.type){case"rollback":return ii((e=>{const{currentStep:t,currentStepIndex:n}=ui.currentStepAndIndex(e);if(void 0===t)return e;let i=e.steps.map((e,t)=>t===n?e.undo():t===n-1?e.setCompleted(!1).undo():e);return i[n-1]instanceof Xn&&(i=[new Xn(null)]),{...e,steps:i}})(e));case"update":return t.updatedState;case"fulfill":return ni(e);case"rebase":return ii(e);case"reset":return a={...e,steps:[new Xn(null)]},{...a,options:na(a)};case"fulfillAndRebase":return ii(ni(e));case"updateFulfillAndRebase":return ii(ni({...e,steps:t.updatedState.steps}));case"setVisible":return t.visible?{...e,visible:t.visible,options:na(e)}:{...e,visible:t.visible,steps:[new Xn(null)]};case"setIsAdmin":return t.isAdmin&&L.Z.isAdmin(),{...e,isAdmin:t.isAdmin};case"addCommand":return a={...e,allCommands:[...e.allCommands,t.command]},{...a};case"removeCommand":return a={...e,allCommands:e.allCommands.filter(e=>e.name!==t.commandName)},{...a};case"setCommands":let r=[...e.allCommands.filter(e=>"programmatic"===e.source),...t.commands];if(e.isAdmin){r=[...(t.commands,[]),...r]}return a={...e,allCommands:r,commandsLoaded:!0},{...a,options:e.visible?na(a):e.options};case"setHackContextSettings":return a={...e,hackContextSettings:{...e.hackContextSettings,...t.hackContextSettings}},{...a,options:e.visible?na(a):e.options};case"setOrganization":return a={...e,organization:t.organization,logo:null!==(n=null===(i=t.organization)||void 0===i?void 0:i.icon)&&void 0!==n?n:"",themeSource:t.metadata.themeSource,hackContextSettings:{...e.hackContextSettings,...t.organization.resource_options}},{...a};case"setLogo":return{...e,logo:null!==(o=null===t||void 0===t?void 0:t.logo)&&void 0!==o?o:""};case"setContext":return Ae()(e.context,t.context)?e:(a={...e,context:t.context},{...a,options:e.visible?na(a):e.options});case"addContext":const s={...e.context,...t.context};return Ae()(e.context,s)?e:(a={...e,context:s},{...a,options:e.visible?na(a):e.options});case"removeContext":const c={...e.context};return delete c[t.toRemove],Ae()(e.context,c)?e:(a={...e,context:c},{...a,options:e.visible?na(a):e.options});case"addCallbacks":const l={...e.callbacks,...t.callbacks};return Ae()(e.callbacks,l)?e:(a={...e,callbacks:l},{...a,options:e.visible?na(a):e.options});case"removeCallback":const d={...e.callbacks};return delete d[t.toRemove],Ae()(e.callbacks,d)?e:(a={...e,callbacks:d},{...a,options:e.visible?na(a):e.options});case"setTestMode":return a={...e,testMode:t.testMode},t.testMode?f.Z.set("testMode","1"):f.Z.remove("testMode"),{...a,options:Jt.available(a)};case"setBaseTheme":{const{payload:n}=t;return{...e,baseTheme:n,themeSource:t.metadata.themeSource}}case"setActiveObject":const{objectLabel:u,contextKey:h,categoryName:m}=t;return{...e,activeObjects:{...e.activeObjects,[h]:{objectLabel:u,contextKey:h,categoryName:m}}};case"clearActiveObject":const p={...e.activeObjects};return delete p[t.contextKey],{...e,activeObjects:p};case"UTIL_setContextState":const g=t.context?{...e.context,...t.context}:e.context,v=t.callbacks?{...e.callbacks,...t.callbacks}:e.callbacks,b=t.hackContextSettings?ea()(e.hackContextSettings,t.hackContextSettings):e.hackContextSettings;return Ae()(e.context,g)&&Ae()(e.callbacks,v)&&Ae()(e.hackContextSettings,b)?e:(a={...e,context:g,callbacks:v,hackContextSettings:b},{...a,options:e.visible?na(a):e.options});default:throw new Error("WRONG")}};var oa=n(37782),aa=n(67939),ra=n(12114),sa=n(50439),ca=n(52237);function la(e,t){const n=e.decode(t);return(0,sa.pipe)(n,ra.fold(e=>{const i=(0,aa.reporter)(n);i.join("; ").toString(),JSON.stringify(t),window.location.href;return Promise.reject(new Error(i.join("\n")))},e=>Promise.resolve(e)))}function da(e){var t;if("string"===typeof e)return e;if(e instanceof Error)return e.toString();return(null===(t=null===e||void 0===e?void 0:e.response)||void 0===t?void 0:t.data)||""}oa.type({id:oa.union([oa.number,oa.string])});function ua(e,t,n){return async(t,i,o)=>{try{const o=await ca.Z.post(n+"/",t);return i&&i(),await la(e,o.data)}catch(a){const e=da(a);return o&&o(JSON.stringify(e)),Promise.reject(e)}}}function ha(e,t){return async(n,i={},o)=>{try{const a=await ca.Z.get(`${t}/${n}/`,{params:i});return(null===o||void 0===o?void 0:o.onSuccess)&&o.onSuccess(),await la(e,a.data)}catch(a){const e=da(a);return(null===o||void 0===o?void 0:o.onError)&&(null===o||void 0===o||o.onError(JSON.stringify(e))),Promise.reject(e)}}}function ma(e,t){return async(e,n)=>{let i=[],o=t+"/";for(;null!==o;)try{const t=(await ca.Z.get(o)).data;t.hasOwnProperty("results")?i=i.concat(t.results):(i=t,o=null),o=t.hasOwnProperty("next")?new URL(t.next).pathname:null,e&&e()}catch(a){const e=da(a);n&&n(JSON.stringify(e)),o=null}return i}}function pa(e,t,n){return async(t,i,o)=>{try{const o=await ca.Z.patch(`${n}/${t.id}/`,t);return i&&i(),await la(e,o.data)}catch(a){const e=da(a);return o&&o(JSON.stringify(e)),Promise.reject(e)}}}function ga(e,t){return async(e,n,i)=>{try{await ca.Z.delete(`${t}/${e}/`);return n&&n(),Promise.resolve()}catch(o){const e=da(o);return i&&i(JSON.stringify(e)),Promise.reject(e)}}}function fa(e){let t="";return e&&Object.keys(e).forEach((n,i)=>{t=0===i?`?${n}=${e[n]}`:`${t}&${n}=${e[n]}`}),t=t.replace(/\+/g,"%2B"),t}function va(e,t,n){return async(i,o,a,r)=>{const s=fa(o);try{const o=await ca.Z.get(`${t}/${i}/${n}/${s}`);return a&&a(),await la(e,o.data)}catch(c){const e=da(c);return r&&r(JSON.stringify(e)),Promise.reject(e)}}}function ba(e,t,n,i){return async(t,o,a,r)=>{const s=fa(o);try{const o=await ca.Z.patch(`${n}/${t.id}/${i}/${s}`,t);return a&&a(),await la(e,o.data)}catch(c){const e=da(c);return r&&r(JSON.stringify(e)),Promise.reject(e)}}}const ya=oa.union([oa.literal("=="),oa.literal("!=")]),xa=oa.type({field:oa.string,operator:ya,value:oa.union([oa.string,oa.undefined])}),Sa=oa.intersection([oa.type({type:oa.literal("context"),value:oa.string,order_key:oa.number}),oa.partial({label:oa.string,chosen:oa.union([oa.string,oa.number]),selected:oa.array(oa.any),input_type:oa.string,preselected_key:oa.string,label_field:oa.string,availability_condition:oa.array(xa),loaded:oa.array(oa.any),allow_create:oa.boolean,allow_create_label:oa.string})]),Ca=oa.intersection([oa.type({type:oa.literal("set"),value:oa.union([oa.array(oa.string),oa.array(oa.number)]),order_key:oa.number}),oa.partial({label:oa.string,chosen:oa.union([oa.string,oa.number]),selected:oa.array(oa.any),input_type:oa.string,preselected_key:oa.string,label_field:oa.string,availability_condition:oa.array(xa),loaded:oa.array(oa.any),allow_create:oa.boolean,allow_create_label:oa.string})]),Ea=oa.intersection([oa.type({type:oa.literal("provided"),value:oa.union([oa.literal("text"),oa.literal("time")]),order_key:oa.number}),oa.partial({label:oa.string,chosen:oa.union([oa.string,oa.number]),selected:oa.array(oa.any),input_type:oa.string,preselected_key:oa.string,label_field:oa.string,availability_condition:oa.array(xa),loaded:oa.array(oa.any),dateTimeArgumentTypeId:oa.number,allow_create:oa.boolean,allow_create_label:oa.string})]),wa=oa.intersection([oa.type({type:oa.literal("dependent"),value:oa.string,order_key:oa.number}),oa.partial({label:oa.string,chosen:oa.union([oa.string,oa.number]),selected:oa.array(oa.any),input_type:oa.string,preselected_key:oa.string,label_field:oa.string,availability_condition:oa.array(xa),loaded:oa.array(oa.any),allow_create:oa.boolean,allow_create_label:oa.string})]),ka=oa.intersection([oa.type({type:oa.literal("function"),value:oa.string,order_key:oa.number}),oa.partial({label:oa.string,chosen:oa.union([oa.string,oa.number]),selected:oa.array(oa.any),input_type:oa.string,preselected_key:oa.string,label_field:oa.string,availability_condition:oa.array(xa),loaded:oa.array(oa.any),allow_create:oa.boolean,allow_create_label:oa.string})]),Ta=oa.union([Sa,Ca,Ea,wa,ka]),Ia=oa.record(oa.string,Ta),Da=(oa.intersection([oa.type({userDefinedName:oa.string,userDefinedValue:oa.string}),Ta]),oa.intersection([oa.type({}),oa.partial({commandType:oa.union([oa.literal("independent"),oa.literal("object"),oa.literal("help")]),object:oa.string,hoverTooltip:oa.boolean,operation:oa.union([oa.literal("router"),oa.literal("self"),oa.literal("blank"),oa.undefined])})])),Aa=oa.intersection([oa.type({type:oa.literal("admin"),value:oa.string}),Da]),_a=oa.intersection([oa.type({type:oa.literal("callback"),value:oa.string}),Da]),Pa=oa.intersection([oa.type({type:oa.literal("link"),value:oa.string}),Da]),Oa=oa.intersection([oa.type({type:oa.union([oa.literal("click"),oa.literal("clickBySelector"),oa.literal("clickByXpath")]),value:oa.array(oa.string)}),Da]),Ra=oa.intersection([oa.type({type:oa.literal("builtin"),value:oa.string}),Da]),La=oa.intersection([oa.type({type:oa.literal("webhook"),value:oa.string}),Da]),Na=oa.intersection([oa.type({type:oa.literal("script"),value:oa.string}),Da]),Ma=oa.union([Aa,_a,Pa,Oa,Ra,La,Na]),Ba=oa.intersection([oa.type({name:oa.string,template:oa.union([_a,Pa]),text:oa.string}),oa.partial({shortcut_mac:oa.array(oa.string),shortcut_win:oa.array(oa.string),tags:oa.array(oa.string),explanation:oa.string,sort_key:oa.union([oa.number,oa.null]),arguments:Ia,category:oa.union([oa.number,oa.null]),icon:oa.union([oa.string,oa.null]),celebrate:oa.union([oa.record(oa.string,oa.any),oa.null])})],"Command"),Ha=oa.intersection([oa.type({id:oa.number,organization:oa.union([oa.number,oa.string]),text:oa.string,arguments:Ia,template:Ma,tags:oa.array(oa.string),availability:oa.array(oa.string),recommend_conditions:oa.array(oa.string),availability_rules:oa.array(oa.any),recommend_rules:oa.array(oa.any),confirm:oa.string,shortcut:oa.array(oa.string),shortcut_mac:oa.array(oa.string),shortcut_win:oa.array(oa.string),explanation:oa.string,is_live:oa.boolean,category:oa.union([oa.number,oa.null]),sort_key:oa.union([oa.number,oa.null]),icon:oa.union([oa.string,oa.null]),celebrate:oa.union([oa.record(oa.string,oa.any),oa.null]),recommend_sort_key:oa.union([oa.number,oa.null])}),oa.partial({disabledReason:oa.string,source:oa.string,name:oa.string,last_available:oa.union([oa.string,oa.null]),modified:oa.string})],"Command");class za{}za.create=ua(Ha,0,"commands"),za.update=pa(Ha,0,"commands"),za.delete=ga(0,"commands"),za.validateFromClient=e=>la(Ba,e);const Fa=oa.intersection([oa.type({id:oa.number,organization:oa.union([oa.number,oa.string]),name:oa.string,sort_key:oa.union([oa.number,oa.null]),setting_hide_before_search:oa.boolean,setting_max_options_count:oa.union([oa.number,oa.null]),setting_pin_to_bottom:oa.boolean}),oa.partial({})],"CommandCategory");class Za{}Za.create=ua(Fa,0,"categories"),Za.update=pa(Fa,0,"categories"),Za.delete=ga(0,"categories");const Ua=oa.intersection([oa.type({id:oa.number,name:oa.string,organization:oa.string,value:oa.record(oa.string,oa.any)}),oa.partial({})],"Command");class Wa{}Wa.create=ua(Ua,0,"contexts"),Wa.update=pa(Ua,0,"contexts"),Wa.delete=ga(0,"contexts");const ja=oa.intersection([oa.type({id:oa.number,organization:oa.string,event:oa.string,nudge:oa.string,guidance:oa.string}),oa.partial({})],"Command");class Ka{}Ka.create=ua(ja,0,"guides"),Ka.update=pa(ja,0,"guides"),Ka.delete=ga(0,"guides");const Ga=oa.intersection([oa.type({id:oa.number,category:oa.string,description:oa.string,organization:oa.union([oa.string,oa.null]),meta:oa.record(oa.string,oa.any),tag:oa.string}),oa.partial({user_event:oa.boolean,command:oa.union([oa.number,oa.null]),end_user:oa.string,session:oa.string,created:oa.string})],"Event");pa(Ga,0,"events");const Va=oa.type({username:oa.string,organization:oa.string,usage:oa.record(oa.string,oa.number),has_access:oa.boolean,has_opened:oa.boolean,has_responded_to_survey:oa.boolean}),Xa=oa.partial({name:oa.string,search:oa.boolean,label_field:oa.string,useCategory:oa.boolean,showResources:oa.boolean,search_fields:oa.array(oa.string),auto_execute:oa.boolean,unfurl:oa.boolean,description_field:oa.string,icon:oa.string,sort_key:oa.number,max_options_count:oa.union([oa.number,oa.null]),sortFunction:oa.any,default_command_id:oa.union([oa.number,oa.undefined])}),Ya=oa.record(oa.string,Xa),Ja=oa.intersection([oa.type({id:oa.union([oa.number,oa.string]),name:oa.string,created:oa.string,launcher_type:oa.union([oa.literal("minimal"),oa.literal("alternate"),oa.literal("prompt"),oa.literal("none")]),launcher_position:oa.union([oa.literal("topRight"),oa.literal("topLeft"),oa.literal("bottomRight"),oa.literal("bottomLeft")]),show_launcher_recommendations:oa.boolean,recommendations_type:oa.union([oa.literal("None"),oa.literal("Custom"),oa.literal("Algorithm")]),launcher_offset_x:oa.number,launcher_offset_y:oa.number,theme:oa.object,icon:oa.string,icon_suggest:oa.string,icon_tutorial:oa.string,resource_options:Ya,should_show_onboarding:oa.boolean,last_snippet_request:oa.union([oa.string,oa.null]),last_snippet_request_in_production:oa.union([oa.string,oa.null]),branding:oa.string,custom_call_to_action:oa.string,search_fuzzy_threshold:oa.union([oa.number,oa.null]),show_skin_editor:oa.boolean,allow_event_handlers:oa.boolean,in_bar_feedback:oa.boolean}),oa.partial({})],"Organization"),qa=oa.type({id:oa.union([oa.number,oa.string]),uuid:oa.string,errors_72h:oa.number,suggestions_72h:oa.number,executions_total:oa.number,users_total:oa.number}),$a=oa.union([oa.literal("Client-Error"),oa.literal("Command execution"),oa.literal("Command suggestion"),oa.literal("Abandoned search"),oa.literal("Search miss")]),Qa=(oa.intersection([oa.type({id:oa.string,event_type:$a,start_time:oa.union([oa.number,oa.null]),end_time:oa.union([oa.number,oa.null]),command:oa.union([oa.number,oa.null])}),oa.partial({gibberish_filter_property:oa.string})]),oa.type({id:oa.string,integrations:oa.record(oa.string,oa.record(oa.string,oa.string))})),er=oa.type({analytics:oa.type({execution_limit:oa.number,deadend_limit:oa.number}),analytics_control:oa.type({silent_enabled:oa.boolean,allow_event_handlers:oa.boolean}),skins:oa.type({limit:oa.number,field_set:oa.union([oa.literal("pro"),oa.literal("basic")])}),deployment:oa.type({show_countdown_banner:oa.boolean}),view:oa.type({in_bar_feedback:oa.boolean}),end_user_limit:oa.number,user_seat_limit:oa.number});class tr{}var nr,ir,or,ar;tr.read=ha(Ja,"organizations"),tr.update=pa(Ja,0,"organizations"),tr.listCommands=e=>ma(0,`organizations/${e}/commands`)(),tr.listCommandCategories=e=>ma(0,`organizations/${e}/categories`)(),tr.listGuides=e=>ma(0,`organizations/${e}/guides`)(),tr.listContexts=e=>ma(0,`organizations/${e}/contexts`)(),tr.userHasAccess=(e,t)=>va(Va,"organizations","end_users")(e,{user:t}),tr.readHealth=va(qa,"organizations","health"),tr.readPaginatedEvents=(nr=ba((ir=Ga,oa.type({count:oa.number,next:oa.union([oa.string,oa.null]),previous:oa.union([oa.string,oa.null]),results:oa.array(ir)})),0,"organizations","events"),async(e,t)=>{let n="1";for(;null!==n&&void 0!==n;)if(n){const i=n.split("page=");i.length>1&&(n=i[1]);const o=await nr(e,{page:n});t(o.results),n=o.next}return Promise.resolve()}),tr.readInternal=va(Qa,"organizations","internal"),tr.updateInternal=ba(Qa,0,"organizations","internal"),tr.readSettings=(or=er,ar="settings",async(e={},t)=>{try{const n=await ca.Z.get(ar+"/",{params:e});return(null===t||void 0===t?void 0:t.onSuccess)&&t.onSuccess(),await la(or,n.data)}catch(n){const e=da(n);return(null===t||void 0===t?void 0:t.onError)&&(null===t||void 0===t||t.onError(JSON.stringify(e))),Promise.reject(e)}});var rr,sr,cr,lr,dr=n(12293);!function(e){e[e.OLD_ADD_CONTEXT=0]="OLD_ADD_CONTEXT",e[e.NEW_ADD_CONTEXT=1]="NEW_ADD_CONTEXT"}(rr||(rr={})),function(e){e[e.INVALID=0]="INVALID",e[e.OBJECT=1]="OBJECT",e[e.KEY=2]="KEY"}(sr||(sr={})),function(e){e[e.INVALID=0]="INVALID",e[e.FUNCTION=1]="FUNCTION",e[e.STATIC=2]="STATIC"}(cr||(cr={})),function(e){e[e.INVALID=0]="INVALID",e[e.NONE=1]="NONE",e[e.OBJECT=2]="OBJECT"}(lr||(lr={}));var ur=n(17656),hr=n(21764);const mr=[u.xo,u.ch,u.Ml,"addCallback","addCommand","addContext","addEventHandler","addRouter","boot","close","execute","isOpen","open","removeCallback","removeCommand","removeContext","setContext","setTheme","shareCallbacks","shareContext","shutdown"];function pr(e,t){const n=(0,hr.V)();if(!function(e){var t;return!0===(null===(t=e)||void 0===t?void 0:t[u.UV])}(n)){const n=(0,d.Kb)();return n[u.Lr]=e,void(n[u.Dk]=t)}dr.Z.info("initializing client SDK...");const i=n,o=e=>{i[u.Tc]=e,L.Z.setActive(!0),Nn.session.start(i[u.sK].session)},a={addCallback(e,t){e.startsWith("commandbar-")?dr.Z.warn("callback name is reserved"):i[u.Dk].executionPathDispatch({type:"addCallbacks",callbacks:{[e]:t}})},addCallbacks(e){Object.keys(e).find(e=>e.includes("commandbar-"))?dr.Z.warn("One or more of the callback names are reserved."):i[u.Dk].executionPathDispatch({type:"addCallbacks",callbacks:e})},async addCommand(e){await za.validateFromClient(e);const t={text:e.text,template:e.template,name:e.name,tags:e.tags||[],shortcut_mac:e.shortcut_mac||[],shortcut_win:e.shortcut_win||[],explanation:e.explanation||"",sort_key:e.sort_key||null,arguments:e.arguments||{},availability:[],recommend_conditions:[],availability_rules:[],recommend_rules:[],confirm:"",shortcut:[],is_live:!0,source:"programmatic",id:Math.random(),organization:-1,category:e.category||null,icon:e.icon||null,celebrate:e.celebrate||null,recommend_sort_key:null};i[u.Dk].executionPathDispatch({type:"addCommand",command:{...t}})},addContext(e,t,n){var o;const a=null===(r=e)||void 0===r?sr.INVALID:"object"===typeof r?sr.OBJECT:"string"===typeof r?sr.KEY:sr.INVALID;var r;const s="function"===typeof t?cr.FUNCTION:cr.STATIC;var c;const l=((e,t,n)=>{if(e===sr.INVALID||t===cr.INVALID||n===lr.INVALID)return"Invalid use of addContext";switch(e){case sr.OBJECT:return rr.OLD_ADD_CONTEXT;case sr.KEY:return rr.NEW_ADD_CONTEXT}})(a,s,null===(c=n)||void 0===c||"object"===typeof c&&0===Object.keys(c).length?lr.NONE:"object"===typeof c?lr.OBJECT:lr.INVALID);let d={};const h={};let m,p={};switch(l){case rr.OLD_ADD_CONTEXT:return d=e,void i[u.Dk].executionPathDispatch({type:"addContext",context:d});case rr.NEW_ADD_CONTEXT:const a=e,r=a.replace(/\s+/g,"");switch(s){case cr.STATIC:d[a]=t;break;case cr.FUNCTION:h["commandbar-initialvalue-"+r]=t,d[a]=[]}if(null!==n&&void 0!==n&&null!==(o=n.searchOptions)&&void 0!==o&&o.searchFunction){var g;const e=null===n||void 0===n||null===(g=n.searchOptions)||void 0===g?void 0:g.searchFunction;"function"!==typeof e&&dr.Z.error("CustomSearchFunction is not a function"),m="commandbar-search-"+r,h[m]=e}const c={"renderOptions.descriptionKey":"description_field","renderOptions.labelKey":"label_field","renderOptions.defaultIcon":"icon","quickFindOptions.quickFind":"search","quickFindOptions.unfurl":"unfurl","quickFindOptions.autoExecute":"auto_execute","quickFindOptions.categoryName":"name","searchOptions.fields":"search_fields","searchOptions.sortFunction":"sortFunction"},f={};return Object.keys(c).forEach(e=>{const t=c[e],i=C()(n,e);void 0!==i&&(f[t]=i)}),Object.keys(f).length>0&&(p={[a]:f}),void i[u.Dk].executionPathDispatch({type:"UTIL_setContextState",callbacks:h,context:d,hackContextSettings:p});default:return void dr.Z.error(l,e,t,n)}},addEventHandler(e){tr.read(i[u.sK].uuid).then(t=>{null!==t&&void 0!==t&&t.allow_event_handlers?i[u.Dk].executionPathDispatch({type:"addCallbacks",callbacks:{"commandbar-event-handler":e}}):dr.Z.warn("Event handlers are only available for enterprise customers. Please contact CommandBar.")})},addRouter(e){i[u.Dk].executionPathDispatch({type:"addCallbacks",callbacks:{"commandbar-router":e}})},addSearch(e,t){const n="commandbar-search-"+e.replace(/\s+/g,"");i[u.Dk].executionPathDispatch({type:"addCallbacks",callbacks:{[n]:t}})},async boot(e,t){if(void 0===i[u.sK].uuid)throw new Error("CommandBar: Organization ID is undefined. Call config() to set the organization ID before calling boot().");let n,a={};if(e?"string"===typeof e?(n=e,a={...t}):"object"===typeof e?(({id:n,...a}=e),n=null===e||void 0===e?void 0:e.id):dr.Z.error("Boot parameter should be a string or key-value pair"):n=void 0,i[u.Dk].executionPathDispatch({type:"addContext",context:{...a,id:n}}),i[u.Dk].setActive(!0),i[u.Jh]={...t},!n||i[u.Tc]!==n)if(n){try{if("10d7dc04"!==i[u.sK].uuid){const e=await tr.userHasAccess(i[u.sK].uuid,n);i[u.Dk].setEndUser(e)}}catch(r){}o(n),L.Z.identify({user_attributes:JSON.stringify({...a,id:n})})}else o(void 0)},clearActiveObject(e){i[u.Dk].executionPathDispatch({type:"clearActiveObject",contextKey:e})},close(){zo(i[u.Lr],i[u.Dk])},execute(e){let t;if("number"===typeof e?t=i[u.Lr].executionPathState.allCommands.find(t=>t.id===e):"string"===typeof e&&(t=i[u.Lr].executionPathState.allCommands.find(t=>t.name===e)),t){return!Zo(t,i[u.Lr],i[u.Dk],void 0,()=>{dr.Z.error(`Command with id ${e} is unavailable.`)})}dr.Z.error(`Command with id=${e} wasn't found.`)},isOpen:()=>i[u.Lr].executionPathState.visible,onboard(){i[u.Dk].onboardingDispatch({type:"Boot"}),i[u.Dk].onboardingDispatch({type:"Start",data:{trigger:"client-api"}}),i[u.Dk].executionPathDispatch({type:"setVisible",visible:!0})},open(e,t){Ho(i[u.Lr],i[u.Dk],On.PROGRAMMATIC,{startingInput:e,categoryFilterID:null===t||void 0===t?void 0:t.categoryFilter})},removeCallback(e){i[u.Dk].executionPathDispatch({type:"removeCallback",toRemove:e})},removeCommand(e){i[u.Dk].executionPathDispatch({type:"removeCommand",commandName:e})},removeContext(e){i[u.Dk].executionPathDispatch({type:"removeContext",toRemove:e})},setActiveObject:(e,t,n)=>"string"!==typeof e||"string"!==typeof t&&!Array.isArray(t)?(dr.Z.error("Arguments for setActiveObject are of the wrong type."),!1):(i[u.Dk].executionPathDispatch({type:"setActiveObject",contextKey:e,objectLabel:t,categoryName:n}),!0),setContext(e,t){void 0!==t?null!==t&&void 0!==t&&t.useCustom&&null!==t&&void 0!==t&&t.customID?f.Z.set("customcontext",t.customID):null!==t&&void 0!==t&&t.useCustom&&f.Z.remove("customcontext"):f.Z.remove("customcontext"),i[u.Dk].executionPathDispatch({type:"setContext",context:e})},setTheme(e){i[u.AX]=e,i[u.Dk].executionPathDispatch({type:"setBaseTheme",payload:e,metadata:{themeSource:"setThemeFunction"}})},shareCallbacks:()=>i[u.Lr].executionPathState.callbacks,shareContext:()=>i[u.Lr].executionPathState.context,shutdown(){i[u.Dk].setActive(!1),L.Z.setActive(!1),i[u.Tc]=void 0,i[u.Dk].executionPathDispatch({type:"setContext",context:{}})},updateContextSettings(e,t){i[u.Dk].executionPathDispatch({type:"setHackContextSettings",hackContextSettings:{[e]:{search:!1,...t}}})},[u.Ut]:void 0,[u.j6](e){i[u.sK].uuid=e,ca.Z.defaults.baseURL=i[u.sK].api||"https://api.commandbar.com",i[u.Sq]()},async[u.Sq](){var e,t;const n=null===(e=window)||void 0===e||null===(t=e.CommandBarProxy)||void 0===t?void 0:t._access;if(n){ca.Z.defaults.headers.Authorization="JWT "+n;const{success:e,user:t}=await ca.Z.get("/auth/current/").then(e=>({success:!0,user:e.data,error:void 0})).catch(e=>{var t,n,i;return{success:!1,error:null!==(t=null===e||void 0===e||null===(n=e.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.detail)&&void 0!==t?t:"Invalid.",user:void 0}});if(e||(ca.Z.defaults.headers.Authorization=null,window.CommandBarProxy._access=""),(null===t||void 0===t?void 0:t.organization)===i[u.sK].uuid){i[u.Dk].executionPathDispatch({type:"setIsAdmin",isAdmin:!0});const e=!!f.Z.get("testMode","");i[u.Dk].executionPathDispatch({type:"setTestMode",testMode:e})}else i[u.Dk].executionPathDispatch({type:"setIsAdmin",isAdmin:!1})}else i[u.Dk].executionPathDispatch({type:"setIsAdmin",isAdmin:!1});tr.listCommands(i[u.sK].uuid).then(e=>{e.sort(Se),Fo(i[u.Dk],e)}),tr.listCommandCategories(i[u.sK].uuid).then(e=>i[u.Dk].setCategories(e)),tr.read(i[u.sK].uuid).then(e=>{i[u.Dk].executionPathDispatch({type:"setOrganization",organization:e,metadata:{themeSource:"initial_load"}})})},[u.sK]:{api:"",editor:"",proxy:"",session:"",uuid:"",...n[u.sK]},[u.Dk]:t,[u.ie](){if(n[u.eQ])return;i.shutdown(),Object.keys(n).forEach(e=>{const t=n[e];(0,ur.Wf)(t)&&(0,ur.B9)(t),delete n[e]});const e=()=>dr.Z.warn("attempted to dispatch after disposing sdk"),t={};Object.keys(i[u.Dk]).forEach(n=>{t[n]=e}),i[u.Dk]=t,n[u.eQ]=!0,Object.assign(window,{CommandBar:void 0})},[u.eQ]:!1,[u.Jh]:void 0,[u.UV]:!1,[u.fd](){var e;const t=i[u.sK];if(!t||!t.api||!t.uuid||!t.proxy)return void dr.Z.warn("configuration details are missing; cannot open editor");if(document.getElementById("commandbar-proxy-wrapper"))return void dr.Z.warn("proxy wrapper not present; cannot open editor");let n="",o=null!==(e=null===t||void 0===t?void 0:t.api)&&void 0!==e?e:"https://api.commandbar.com";"https://frames-proxy-prod.commandbar.com"!==t.proxy&&(n="?source="+t.proxy,t.proxy.includes("localhost")&&(o="http://localhost:8000"));const a=`${o}/latest_aux/${t.uuid}${n}`,r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=a,a.includes("localhost")&&(r.crossOrigin="anonymous");const s=document.getElementsByTagName("script")[0];s.parentNode&&s.parentNode.insertBefore(r,s)},[u.a_]:{...n[u.a_]},[u.Lw]:!1,[u.AX]:void 0,[u.TW](){tr.listCommands(i[u.sK].uuid).then(e=>{e.sort(Se),Fo(i[u.Dk],e)}),tr.listCommandCategories(i[u.sK].uuid).then(e=>i[u.Dk].setCategories(e))},[u.Po](){i[u.AX]=void 0,tr.read(i[u.sK].uuid).then(e=>{i[u.Dk].executionPathDispatch({type:"setOrganization",organization:e,metadata:{themeSource:"reload_organization"}})})},[u.WJ](e,t){L.Z.track(e,{...t,user_event:!0})},[u._4]:E.m.get(),[u.i4]:"",[u.xo](e){i[u.Dk].executionPathDispatch({type:"setVisible",visible:!0}),i[u.Dk].setDashboard(e)},[u.wh](e){i[u.Lr].executionPathState.isAdmin&&i[u.Dk].setPreviewMode(e)},[u.oK](e){i[u.Lr].executionPathState.isAdmin&&i[u.Dk].executionPathDispatch({type:"setTestMode",testMode:e})},[u.ch](e,t){let n=i[u.Lr].guides.find(t=>t.event===e);void 0!==n&&(t&&(n={...n,preview:!0}),i[u.Dk].setActiveGuide(n))},[u.Ml](e,t){i[u.ch](e,t)},[u.Lr]:e,[u.Tc]:""};mr.forEach(e=>{const t=a;t[e]=gr(String(e),t[e])}),Object.assign(i,a);const r=n[u.uF],s=e=>{const t=r.findIndex(t=>(null===t||void 0===t?void 0:t[0])===e);t<0||(i[e](...r[t].slice(1)),r.splice(t,1))};s(u.j6),s("boot");for(let l=0;l<r.length;l++){const e=r[l][0];if(!(e in i)){var c;null===(c=i[u._4])||void 0===c||c.exception(`CommandBar SDK method ${String(e)} is not defined.`);continue}const t=r[l];t.shift(),i[e](...t)}r.length=0}const gr=(e,t)=>(...n)=>{f.Z.get("editor","")&&(window.CommandBarLogs=window.CommandBarLogs||[],window.CommandBarLogs.push({name:e,args:n,url:window.location.href,time:Date.now()}));try{return t(...n)}catch(i){E.m.get().exception(m.j.API,i,{name:e})}},fr=()=>{const[e,t]=i.useState(!1),[n,o]=i.useState(!1),[a,r]=i.useState(!1),[s,c]=i.useState(!1),l=i.useRef(void 0),h=i.useRef(!1);i.useEffect(()=>()=>{h.current=!0},[]),i.useEffect(()=>{a&&(c(!0),l&&clearTimeout(l.current),l.current=setTimeout(()=>{if(h.current)return console.warn("attempted to set state after unmount");c(!1)},1e3))},[a]);const[m,p]=i.useState(void 0),[g,v]=i.useReducer(ia,ta,()=>ta),[b,y]=i.useReducer(vn,fn,()=>fn),x=Pn;i.useEffect(()=>{g.commandsLoaded?r(!1):r(!0)},[g.commandsLoaded]);const[S,C]=i.useState(""),[E,w]=i.useState(void 0),[k,T]=i.useState(void 0),[I,D]=i.useState(void 0),[A,_]=i.useState([]),[P,O]=i.useState([]),[R,L]=i.useState({id:-1,organization:"",event:"",nudge:"",guidance:"",preview:!1}),N=i.useRef(null),[M,B]=i.useState(!1),H={"commandbar-builtin-shortcuts":()=>{B(!M)},"commandbar-noop":function(e){alert("This is a demo command!\n\nYou entered:\n\n"+JSON.stringify(e,null,2))}};i.useEffect(()=>{v({type:"addCallbacks",callbacks:H})},[]),i.useEffect(()=>{void 0===k&&""!==S&&g.allCommands.length>0&&(C(""),v({type:"reset"}))},[k]),i.useEffect(()=>{f.Z.get("editor","")&&(0,d.Kb)()[u.fd]()},[]),i.useEffect(()=>{g.isAdmin&&(g.testMode?f.Z.set("testMode",!0):f.Z.remove("testMode"))},[g.testMode]);i.useMemo(()=>{const e=hi.lastStep(g);return!("execute"!==e.type||!e.triggeredByShortcut)},[g.steps]);const z={loading:a||s,inputText:S,dashboard:k,emptyMessage:I,refContainer:N,previewMode:e,active:n,guides:A,activeGuide:R,showKeyboardShortcutCheatsheet:M,categories:P,endUser:m,onboardingState:b,executionPathState:g,searchFilter:E},F={setLoading:r,setInputText:C,setDashboard:T,setEmptyMessage:D,setPreviewMode:t,setActive:o,setGuides:_,setActiveGuide:L,setShowKeyboardShortcutCheatsheet:B,setCategories:O,setEndUser:p,onboardingDispatch:y,executionPathDispatch:v,search:x,setSearchFilter:w};return pr(z,F),{state:z,dispatch:F}};var vr=n(48014),br=n.n(vr);const yr=e=>{if(0===e.length)return"";const[t]=(e=>0===e.length?[!0,"ok"]:["then","then1","then2"].includes(e[0])||["then","then1","then2"].includes(e[e.length-1])?[!1,"shortcuts should not start or end with 'then'"]:"shift"===e[e.length-1]?[!1,"shortcuts should not end with shift"]:JSON.stringify(e)===JSON.stringify(["alt","shift"])||JSON.stringify(e)===JSON.stringify(["ctrl","option"])?[!1,"this is a browser protected accessibility shortcut"]:[!0,"ok"])(e);if(!t)return"";return e.join("+").split(/\+then\d?\+/).join(" ")},xr=e=>{const t=["click","clickBySelector","clickByXpath"].includes(e.template.type)&&e.template.hoverTooltip&&1===e.template.value.length,n=H();let i=!1;return[B.MAC].includes(n)?i=e.shortcut_mac.length>0:[B.WINDOWS,B.LINUX].includes(n)&&(i=e.shortcut_win.length>0),t&&i},Sr=e=>{const t=(e=>{const t=_(e);let n;return"xpath"===t?n=O(e):"css"===t&&(n=P(e)),n})(e.template.value[0]);if(t){const n=H();let i="";[B.MAC].includes(n)?i=yr(e.shortcut_mac):[B.WINDOWS,B.LINUX].includes(n)&&(i=yr(e.shortcut_win)),t.addEventListener("mouseout",Er),t.addEventListener("mouseenter",(function(){const n=document.getElementsByClassName("commandbar-shortcut-tooltip");for(;n.length>0;){var o,a;null===(o=n[0])||void 0===o||null===(a=o.parentNode)||void 0===a||a.removeChild(n[0])}const r=document.createElement("div"),[s,c]=wr(t,e);r.style.top=s,r.style.left=c,r.innerHTML=`<div>${e.text}<span class=commandbar-shortcut-tooltip-tag>${i}</span></div>`,r.className="commandbar-shortcut-tooltip",document.body.appendChild(r),setTimeout(()=>{Cr(r)},5e3)}),!1)}},Cr=e=>{e.className="commandbar-shortcut-tooltip-remove",setTimeout(()=>{e.remove()},300)},Er=()=>{const e=document.getElementsByClassName("commandbar-shortcut-tooltip");for(;e.length>0;){const t=e[0];Cr(t)}},wr=(e,t)=>{const n=window.scrollY+e.getBoundingClientRect().top,i=window.scrollY+e.getBoundingClientRect().bottom,o=window.scrollX+e.getBoundingClientRect().left,a=window.scrollX+e.getBoundingClientRect().right,r=e.offsetWidth,s=e.offsetHeight,c=window.innerWidth,l=window.innerHeight,d=H();let u="";[B.MAC].includes(d)?u=yr(t.shortcut_mac):[B.WINDOWS,B.LINUX].includes(d)&&(u=yr(t.shortcut_win));const h=7*(t.text.length+u.length)+24;let m;m=r/c<s/l?o<c/2&&!(a+h>c)||o-h<0?"right":"left":n<l/2&&!(i+28>l)||n-28<0?"bottom":"top";const p=r/2-h/2,g=s/2-14;let f="0px",v="0px";switch(m){case"right":f=n+g+"px",v=o+r+"px";break;case"left":f=n+g+"px",v=o-h+"px";break;case"top":f=n-28+"px",v=o+p+"px";break;case"bottom":f=n+s+"px",v=o+p+"px"}return[f,v]},kr=(e,t)=>{const n=e.executionPathState.allCommands;br().reset();const i=H();[B.MAC,B.WINDOWS,B.LINUX].includes(i)&&n.map(n=>{const o=i===B.MAC?n.shortcut_mac:n.shortcut_win;if(0===o.length)return null;const a=yr(o);return xr(n)&&Sr(n),br().bind(a,()=>Zo(n,e,t,()=>{(0,Bn.h)("commandbar-shortcut-executed",{detail:{keys:a}})},()=>Nn.unavailableShortcut(o,n))),null})},Tr=(e,t)=>{const n=i.useRef(!1);i.useEffect(()=>{n.current?e():n.current=!0},t)};var Ir;!function(e){e[e.MAC=0]="MAC",e[e.IOS=1]="IOS",e[e.WINDOWS=2]="WINDOWS",e[e.ANDROID=3]="ANDROID",e[e.LINUX=4]="LINUX"}(Ir||(Ir={}));const Dr=()=>{const e=window.navigator.userAgent,t=window.navigator.platform;let n=Ir.MAC;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)?n=Ir.MAC:-1!==["iPhone","iPad","iPod"].indexOf(t)?n=Ir.IOS:-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)?n=Ir.WINDOWS:/Android/.test(e)?n=Ir.ANDROID:!n&&/Linux/.test(t)&&(n=Ir.LINUX),n},Ar=e=>[Ir.WINDOWS,Ir.ANDROID,Ir.LINUX].includes(Dr())?e.ctrlKey:e.metaKey,_r=()=>i.useMemo(()=>({getEventTrigger:Ar,triggerKey:[Ir.WINDOWS,Ir.ANDROID,Ir.LINUX].includes(Dr())?"Ctrl":"⌘",os:Dr(),isMobile:!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}),[]),Pr=(e,t,{trigger:n=!0,shift:o=!1,override:a=!1,useCtrl:r=!1,useCapture:s=!1,preventDefault:c=!0,stopPropagation:l=!0}={})=>{const{getEventTrigger:d}=_r();i.useEffect(()=>{const i=i=>{const s=!n||(r?i.ctrlKey:d(i));let u;u=o?i.key===e&&s&&i.shiftKey:i.key===e&&s&&!i.shiftKey,u&&!a&&(c&&i.preventDefault(),l&&i.stopPropagation(),t(i))};return document.addEventListener("keydown",i,s),()=>{document.removeEventListener("keydown",i,s)}})};var Or=n(2211),Rr=n.n(Or);const Lr={primary:"rgb(174, 177, 221)",background:"rgba(255,255,255, 1.0)",fontColor:"rgba(0,0,0,0.85)",fontFamily:"Avenir Next, proxima-nova, sans-serif",fontSize:"14px"},Nr=e=>t=>{const n=Lr[e];let i=Rr()(n);if(t)try{i=Rr()(t)}catch{}return i},Mr=e=>t=>t||Lr[e],Br=e=>e+"px",Hr=e=>({base:{...{primary:e.primary.css(),background:e.background.css(),fontColor:e.fontColor.css(),fontFamily:e.fontFamily,fontSize:Br(e.fontSize)}},main:{background:e.background.css(),borderRadius:Br(8),borderColors:e.fontColor.alpha(.05).css(),boxShadow:"rgba(0, 0, 0, 0.35) 0px 10px 30px",fontFamily:e.fontFamily,fontSize:Br(e.fontSize),color:e.fontColor.css()},bar:{top:"15%",width:"675px",menuHeight:"350px"},menu:{borderRadius:"0px",border:"none",marginTop:"0px"},optionList:{paddingTop:"0px",paddingBottom:"0px",spaceBetweenCategories:"0px",marginTop:"0px",marginBottom:"0px"},placeholder:{color:e.fontColor.alpha(.25).css(),fontFamily:e.fontFamily,fontSize:Br(1.3*e.fontSize)},input:{color:e.fontColor.css(),caretColor:e.primary.alpha(.6).css(),fontFamily:e.fontFamily,fontSize:Br(1.3*e.fontSize),borderBottom:"1px solid "+e.fontColor.alpha(.05).css(),background:"none",paddingLeft:"25px",paddingRight:"10px",paddingTop:"25px",paddingBottom:"25px",border:"none",borderRadius:"0px"},option:{color:e.fontColor.alpha(.7).css(),iconColor:"",iconOpacity:"40%",spaceBetweenIconAndLabel:"18px",iconDisplay:"",labelFontWeight:400,background:e.background.css(),borderColor:e.fontColor.alpha(.01).css(),fontFamily:e.fontFamily,fontSize:Br(e.fontSize),minHeight:"43px",paddingLeft:"18px",paddingRight:"18px",paddingTop:"0px",paddingBottom:"0px",marginLeft:"0px",marginRight:"0px",descriptionFontSize:"11px",descriptionMarginTop:"-3px",descriptionColor:e.fontColor.alpha(.6).css(),borderRadius:"0px",breadcrumbsFontSize:"10px",breadcrumbsMarginBottom:"1px",breadcrumbsColor:e.fontColor.alpha(.6).css(),breadcrumbsFontWeight:400},optionSelected:{color:e.fontColor.css(),iconColor:"",iconSize:Br(1.3*e.fontSize),iconOpacity:"100%",background:e.fontColor.alpha(.05).css(),borderColor:e.fontColor.alpha(.01).css(),borderHighlight:e.primary.css(),fontFamily:e.fontFamily,fontSize:Br(e.fontSize),descriptionColor:e.fontColor.alpha(.7).css(),breadcrumbsColor:e.fontColor.alpha(.7).css()},optionDisabled:{color:e.fontColor.css(),background:e.background.css()},categoryHeader:{color:e.fontColor.alpha(.7).css(),background:e.fontColor.alpha(.05).css(),fontSize:Br(.85*e.fontSize),paddingLeft:"20px",paddingRight:"20px",paddingTop:"5px",paddingBottom:"5px",opacity:"1.0",fontWeight:600,lineHeight:1,borderTop:"1px solid rgba(0,0,0,0.1)"},keyboardShortcuts:{color:e.fontColor.css(),background:e.fontColor.alpha(.1).css(),fontSize:Br(.85*e.fontSize),borderRadius:Br(2),borderColor:"transparent",highlight:Rr()(e.primary).alpha(.8).css(),paddingTop:"4px",paddingBottom:"4px",paddingLeft:"7px",paddingRight:"7px"},textSearchMatch:{textDecoration:e.primary+" solid underline",fontWeight:400,emphasisFontWeight:500,textUnderlinePosition:"auto",emphasisTextUnderlinePosition:"under"},searchableFieldMatch:{color:e.fontColor.css(),background:e.fontColor.alpha(.1).css(),paddingTop:"0px",paddingBottom:"0px",paddingLeft:"3px",paddingRight:"3px",marginRight:"4px",marginLeft:"0px",borderRadius:"2px",lineHeight:"1.4"},blocks:{background:e.background.css(),color:e.fontColor.css(),border:"1px solid "+e.primary.css(),paddingTop:"2px",paddingBottom:"2px",paddingRight:"4px",paddingLeft:"4px",fontSize:"12px",fontWeight:500},blocksContainer:{paddingTop:"7px",paddingBottom:"0px",paddingLeft:"7px",paddingRight:"7px"},instruction:{fontColor:e.background.css(),background:e.fontColor.alpha(.6).css()},footer:{background:"linear-gradient(0deg, rgba(0,0,0,0.05), transparent)",paddingLeft:"16px",paddingRight:"16px",paddingTop:"6px",paddingBottom:"6px",borderTop:`1px ${e.fontColor.alpha(.05).css()} solid`}}),zr=(Hr({primary:Rr()(Lr.primary),background:Rr()(Lr.background),fontColor:Rr()(Lr.fontColor),fontFamily:Lr.fontFamily,fontSize:parseInt(Lr.fontSize,10)}),e=>{var t,n,i,o,a;const r={primary:Nr("primary")(null===(t=null===e||void 0===e?void 0:e.base)||void 0===t?void 0:t.primary),background:Nr("background")(null===(n=null===e||void 0===e?void 0:e.base)||void 0===n?void 0:n.background),fontColor:Nr("fontColor")(null===(i=null===e||void 0===e?void 0:e.base)||void 0===i?void 0:i.fontColor),fontFamily:Mr("fontFamily")(null===(o=null===e||void 0===e?void 0:e.base)||void 0===o?void 0:o.fontFamily),fontSize:parseInt(Mr("fontSize")(null===(a=null===e||void 0===e?void 0:e.base)||void 0===a?void 0:a.fontSize),10)},s=Hr(r);return Fr(e,s)}),Fr=(e,t)=>{const n=JSON.parse(JSON.stringify(t));return Object.keys(n).forEach(t=>{Object.keys(n[t]).forEach(i=>{var o;const a=null===(o=null===e||void 0===e?void 0:e[t])||void 0===o?void 0:o[i];a&&(n[t][i]=a)})}),n},Zr=oa.intersection([oa.type({id:oa.string,slug:oa.string,name:oa.string,default:oa.boolean,skin:oa.any,organization:oa.string}),oa.partial({logo:oa.union([oa.string,oa.null])})],"Skin");oa.partial({});class Ur{}Ur.list=ma(0,"skins"),Ur.read=ha(Zr,"skins"),Ur.update=pa(Zr,0,"skins"),Ur.create=ua(Zr,0,"skins"),Ur.delete=ga(0,"skins");const Wr={dark:{background:"rgb(36,35,41)",fontColor:"rgba(255,255,255,0.85)"},light:{background:"rgba(255,255,255, 1.0)",fontColor:"rgba(0,0,0,0.85)"}},jr=e=>{const[t,n]=i.useState(!1),{userTheme:o,baseTheme:a,themeSource:r,organization:s}=e,[l,d]=i.useState(void 0),[u,h]=(0,i.useState)(""),m=async()=>{if(["light","dark"].includes(a)){var t,n,i,r,u;const e={...Wr[a],primary:null!==(t=null===o||void 0===o||null===(n=o.base)||void 0===n?void 0:n.primary)&&void 0!==t?t:null===l||void 0===l||null===(i=l.base)||void 0===i?void 0:i.primary,fontFamily:null!==(r=null===o||void 0===o||null===(u=o.base)||void 0===u?void 0:u.fontFamily)&&void 0!==r?r:"Avenir Next, proxima-nova, sans-serif"};d(zr({...o,base:e}))}else if(/^#([0-9A-F]{3}){1,2}$/i.test(a)){var h,m,p,g,f;const e=(b=a,c().contrast(b,"rgba(255,255,255,0.85)")>4.5?"rgba(255,255,255,0.85)":"rgba(0,0,0,0.85)"),t={background:a,fontColor:e,primary:null!==(h=null===o||void 0===o||null===(m=o.base)||void 0===m?void 0:m.primary)&&void 0!==h?h:null===l||void 0===l||null===(p=l.base)||void 0===p?void 0:p.primary,fontFamily:null!==(g=null===o||void 0===o||null===(f=o.base)||void 0===f?void 0:f.fontFamily)&&void 0!==g?g:"Avenir Next, proxima-nova, sans-serif"};d(zr({...o,base:t}))}else{if(!s)return;if("reset"===a)return;try{var v;const t=await Ur.read(null!==a&&void 0!==a?a:"",{org:s.id.toString()});d(zr(t.skin)),e.setLogo(null!==(v=null===t||void 0===t?void 0:t.logo)&&void 0!==v?v:"")}catch(y){console.error(`Theme slug ${a} not found.`)}}var b};return i.useEffect(()=>{a?m():void 0!==o&&d(zr(o))},[o,a,r]),(0,i.useEffect)(()=>{h(r)},[r]),(0,i.useEffect)(()=>{a&&!t&&"setThemeFunction"===u&&m()},[u,r,a]),i.useEffect(()=>{t||n(!0)},[l,t]),{userTheme:e.userTheme,theme:l}};var Kr=n(9783);const Gr={INTERCOM:{offsets:{minimal:[66,-10],alternate:[64,-1]},selectors:[".intercom-launcher-frame",".intercom-lightweight-app","#intercom-frame",".intercom-launcher"]},DRIFT:{offsets:{minimal:[84,1],alternate:[85,9]},selectors:["#drift-widget","#drift-widget-container"]},HUBSPOT:{offsets:{minimal:[58,-15],alternate:[61,-6]},selectors:["#hubspot-messages-iframe-container"]}},Vr=(e,t)=>{const[n,o]=i.useState(t.launcher_offset_x),[a,r]=i.useState(t.launcher_offset_y),s=(e,n)=>!!e&&("bottomRight"===n.launcher_position&&(0===n.launcher_offset_x&&0===n.launcher_offset_y&&!!["minimal","alternate"].includes(t.launcher_type)));i.useEffect(()=>{setTimeout(()=>{((e,n)=>{if(!s(e,n))return;let i=[0,0];Object.keys(Gr).map(e=>Gr[e].selectors.map(t=>{if(document.querySelector(t)){var o,a;const t=null===(o=Gr[e])||void 0===o||null===(a=o.offsets)||void 0===a?void 0:a[n.launcher_type];t&&(i=t)}return null}));const[a,c]=i;0===a&&0===c||tr.update({...t,launcher_offset_x:a,launcher_offset_y:c}).then(e=>{o(e.launcher_offset_x),r(e.launcher_offset_y)})})(e,t)},500)},[e]),i.useEffect(()=>{o(t.launcher_offset_x),r(t.launcher_offset_y)},[t.launcher_offset_x,t.launcher_offset_y]);const c=35+n,l=35+a,d={zIndex:Hn.Z_LAUNCHER,position:"fixed",userSelect:"none"};let u={};switch(t.launcher_position){case"topRight":u={top:l,right:c};break;case"topLeft":u={top:l,left:c};break;case"bottomRight":u={bottom:l,right:c};break;case"bottomLeft":u={bottom:l,left:c}}return{...d,...u}};var Xr,Yr;function Jr(){return(Jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function qr({title:e,titleId:t,...n},o){return i.createElement("svg",Jr({xmlns:"http://www.w3.org/2000/svg",width:"512.000000pt",height:"512.000000pt",viewBox:"0 0 512.000000 512.000000",preserveAspectRatio:"xMidYMid meet",ref:o,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,Xr||(Xr=i.createElement("metadata",null,"\nCreated by potrace 1.16, written by Peter Selinger 2001-2019\n")),Yr||(Yr=i.createElement("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",stroke:"none"},i.createElement("path",{d:"M2845 4207 c-331 -386 -934 -1091 -1340 -1565 -407 -475 -741 -868 -743 -873 -2 -5 314 -9 777 -9 l781 0 0 -22 c0 -12 -34 -357 -75 -767 -42 -409 -74 -748 -73 -753 3 -9 2179 2572 2186 2592 2 6 -299 10 -823 10 -704 0 -826 2 -822 14 53 139 737 2061 735 2067 -2 4 -273 -309 -603 -694z"}))))}const $r=i.forwardRef(qr);var Qr;function es(){return(es=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ts({title:e,titleId:t,...n},o){return i.createElement("svg",es({viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",ref:o,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,Qr||(Qr=i.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",transform:"matrix(1, 0, 0, 1, -0.220732, 2.334804)"},i.createElement("g",{id:"signoff/1",transform:"translate(-1058.000000, -197.000000)",fill:"#ffffff"},i.createElement("g",{id:"Group-11",transform:"translate(332.000000, 172.000000)"},i.createElement("g",{id:"Group-10"},i.createElement("g",{id:"logo/flag/white",transform:"translate(726.000000, 25.000000)"},i.createElement("path",{d:"M3.68769314,32.1739219 C1.64973907,32.1783433 -0.00441283978,33.8399127 8.84403159e-06,35.8773027 C0.00398835946,37.9151349 1.66565714,39.56963 3.7036112,39.5652086 C5.74156527,39.5607871 7.39571719,37.8996599 7.3912955,35.8618277 C7.38687382,33.8239956 5.72564721,32.1695005 3.68769314,32.1739219",id:"Fill-20"}),i.createElement("path",{d:"M43.6833724,19.1025189 L25.5035453,24.923246 L25.4744784,11.2748385 L42.2217845,5.89803589 L38.3984027,13.9820428 L43.6833724,19.1025189 Z M22.1018505,18.867373 L4.29251797,24.572256 L4.26345107,10.9056939 L22.0727836,5.21118492 L22.1018505,18.867373 Z M48.2668319,0.434782609 L25.4666694,7.72992666 L25.4514852,0.5597039 L0.869565217,8.43406778 L0.913816318,29.216821 L22.1092257,22.4243879 L22.1248437,29.5652174 L50,20.6249161 L42.4265543,13.2874112 L48.2668319,0.434782609 Z",id:"Fill-22"}))))))))}const ns=i.forwardRef(ts),{css:is,keyframes:os}=(0,Kr.Z)({key:"commandbar-launcher",container:document.getElementById("commandbar")||void 0}),as=e=>{const t=t=>(0,l.tZ)("span",{className:is`
          background-color: ${c()(e).alpha(.2).css()};
          border-radius: 2px;
          font-size: 12px;
          padding: 3px 5px;
          color: ${e};
        `},t.children);return(0,l.tZ)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",lineHeight:1,height:"100%"}},(0,l.tZ)(t,null,F()),"  ",(0,l.tZ)(t,null,"K"))},rs=e=>{var t,n,i,o;const a=Vr(e.isAdmin,e.organization),{theme:r}=(0,ee.Fg)(),s=null===(t=r.base)||void 0===t?void 0:t.primary;let d=null===(n=r.main)||void 0===n?void 0:n.background;const u=null===(i=r.main)||void 0===i?void 0:i.fontFamily,h=null===(o=r.main)||void 0===o?void 0:o.color;let m=0;const p=os`
  0% {
    transform: scale(0.06);
  }
  100% {
    transform: scale(1);
  }
`;let g=(0,l.tZ)("div",null);switch(e.organization.launcher_type){case"none":return null;case"minimal":let t=r.main.background;try{t=c()(r.main.background).alpha(.98).css()}catch{}let n=(0,l.tZ)($r,{id:"bolt",width:"26px",height:"26px",fill:s,style:{transition:"all .3s ease-in-out",verticalAlign:"baseline"}});"f7aa22b3"===e.organization.id&&(n=(0,l.tZ)(ns,{id:"clubhouse",width:"26px",height:"26px",style:{transition:"all .3s ease-in-out",verticalAlign:"baseline",transform:"translate(2px, 2px)"}}),d="#6515dd",t="#6515dd"),m=50,g=(0,l.tZ)("div",{ref:e.launcherRef,className:"commandbar-launcher",style:a},(0,l.tZ)("div",{className:is`
              padding: 9px 10px;
              color: ${h};
              background-color: ${d};
              border-radius: 27px;
              box-shadow: rgba(0, 0, 0, 0.06) 0px 1px 6px 0px, rgba(0, 0, 0, 0.16) 0px 2px 32px 0px;
              font-family: ${u};
              line-height: 1;
              transition: all 0.2s ease-in-out;
              animation: ${p} 0.25s ease-out;
              &:hover {
                background-color: ${t};
                cursor: pointer;
                transform: scale(1.3);
              }
            `,onClick:e.onClick,onMouseEnter:e.onHover},n));break;case"alternate":m=70,g=(0,l.tZ)("div",{ref:e.launcherRef,className:"commandbar-launcher",style:a},(0,l.tZ)("div",{"data-testid":"launcher",className:is`
              display: flex;
              justify-content: space-around;
              padding: 10px 8px;
              color: ${h};
              background-color: ${d};
              border-radius: 4px;
              box-shadow: 6px 8px 14px 0px rgba(0, 0, 0, 0.22);
              font-size: 13px;
              font-family: ${u};
              min-width: ${m}px;
              transition: all 0.3s ease-in-out;
              line-height: 1;
              cursor: pointer;
              animation: ${p} 0.25s ease-out;

              &:hover {
                box-shadow: 2px 2px 2px 0px rgba(0, 0, 0, 0.16);
                color: ${h};
                cursor: pointer;
                transition: all 0.3s ease-in-out;
                transform: scale(1.1);

                #bolt {
                  transform: scale(1.2);
                  transition: all 0.3s ease-in-out;
                }
              }
            `,onClick:e.onClick,onMouseEnter:e.onHover},(0,l.tZ)("div",{style:{display:"flex",alignItems:"center",padding:"4px 9px 4px 0px"}},(0,l.tZ)($r,{id:"bolt",width:"14px",height:"14px",fill:s,style:{transition:"all .3s ease-in-out",verticalAlign:"baseline",lineHeight:1}})),(0,l.tZ)("div",null,as(s))));break;case"prompt":m=150,g=(0,l.tZ)("div",{ref:e.launcherRef,className:"commandbar-launcher",style:a},(0,l.tZ)("div",{className:is`
              display: flex;
              justify-content: space-between;
              padding: 4px 8px;
              color: #8792a2;
              background-color: #f7fafc;
              border-radius: 4px;
              box-shadow: 4px 5px 10px 0px rgba(0, 0, 0, 0.16);
              font-size: 13px;
              font-family: ${u};
              min-width: ${m}px;
              transition: all 0.3s ease-in-out;
              line-height: 2;
              cursor: pointer;

              &:hover {
                box-shadow: 2px 2px 2px 0px rgba(0, 0, 0, 0.16);
                color: #697386;
                cursor: pointer;
                transition: all 0.3s ease-in-out;

                #bolt {
                  transform: scale(1.3);
                  transition: all 0.3s ease-in-out;
                }
              }
            `,onClick:e.onClick,onMouseEnter:e.onHover},(0,l.tZ)("div",{style:{padding:"1px 4px 0px 0px"}},(0,l.tZ)($r,{id:"bolt",width:"14px",height:"14px",fill:s,style:{transition:"all .3s ease-in-out",verticalAlign:"baseline"}})),(0,l.tZ)("div",null,"Find anything"),(0,l.tZ)("div",{style:{flexGrow:1}}),as(s)))}return g},ss=e=>{i.useEffect(()=>{(0,Bn.h)("commandbar-launcher-ready",{})},[]);const t=i.useRef(null),n=i.useCallback(()=>{},[]);return"none"===e.organization.launcher_type?(0,l.tZ)("div",null):(0,l.tZ)("span",null,(0,l.tZ)(rs,{isAdmin:e.isAdmin,onClick:()=>{e.toggle()},onHover:n,organization:e.organization,launcherRef:t}))};e=n.hmd(e);const cs=(0,o.wU)(e)(e=>{const t=h(),{state:n,dispatch:o}=fr(),{executionPathState:{organization:a,themeSource:r,baseTheme:s}}=n,c=jr({userTheme:null===a||void 0===a?void 0:a.theme,baseTheme:s,themeSource:r,organization:a,setLogo:e=>{o.executionPathDispatch({type:"setLogo",logo:e})}});(0,i.useEffect)(()=>{y.setOrganization(a)},[a]),i.useEffect(()=>{kr(n,o)},[n.executionPathState.allCommands,n.executionPathState.organization]),i.useEffect(()=>{if(n.executionPathState.options.length>0)try{const e=new URLSearchParams(window.location.search);if(e.has("CommandBar")){const t=e.get("CommandBar")||void 0;Ho(n,o,On.URL,{startingInput:t})}}catch(e){}},[n.executionPathState.options]);const p=()=>{Nn.session.end(n.onboardingState)};i.useEffect(()=>(window.addEventListener("beforeunload",p),()=>window.removeEventListener("beforeunload",p)),[n.onboardingState.isActive,n.onboardingState.currentStepIndex]);Tr(()=>{n.active&&null!==n.refContainer.current&&(n.executionPathState.visible?n.refContainer.current.focus():n.refContainer.current.blur())},[n.executionPathState.visible]),(0,i.useEffect)(()=>{n.executionPathState.visible&&(0,Bn.h)("CommandBar.opened",{detail:{open:!0}})},[n.executionPathState.visible]);const g=()=>{zo(n,o)};i.useEffect(()=>{const e=e=>{var t;const i=null===(t=e.target)||void 0===t?void 0:t.parentNode;if(i&&"commandbar__input"===i.className&&"Escape"===e.key){const{currentStepIndex:t}=hi.currentStepAndIndex(n.executionPathState),i=hi.lastStep(n.executionPathState);if(e.preventDefault(),e.stopPropagation(),0===t)g();else if("execute"===i.type&&i.triggeredByShortcut)g();else{var a,r;o.executionPathDispatch({type:"rollback"}),null===(a=n.refContainer)||void 0===a||null===(r=a.current)||void 0===r||r.onInputChange("",void 0)}}},t=e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.parentNode;n&&"commandbar__input"===n.className&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation())};return document.addEventListener("keyup",e,!0),document.addEventListener("keydown",t,!0),document.addEventListener("keypress",t,!0),()=>{document.removeEventListener("keyup",e,!0),document.removeEventListener("keydown",t,!0),document.removeEventListener("keypress",t,!0)}},[n.executionPathState.steps]);const f=e=>{n.active&&(n.executionPathState.visible?g():Ho(n,o,e))};let v;Pr("k",e=>{!(()=>{try{return"undefined"!=typeof window.getSelection&&(window.getSelection()||"").toString().length>0}catch(e){return E.m.get().exception(m.j.BAR_OPEN,e),!1}})()&&n.active&&(e.stopPropagation(),e.preventDefault(),n.onboardingState.isActive&&n.executionPathState.visible?o.onboardingDispatch({type:"CMDK"}):(f(On.KEYBOARD),(0,Bn.h)("commandbar-shortcut-executed",{detail:{keys:("ctrl"===F().toLowerCase()?"ctrl":"command")+"+k"}})))},{useCapture:!0,stopPropagation:!1,preventDefault:!1}),Pr("k",()=>o.executionPathDispatch({type:"rollback"}),{shift:!0});const b=()=>f(On.LAUNCHER);return n.executionPathState.organization&&(v=i.createElement("div",null,i.createElement(ss,{isAdmin:n.executionPathState.isAdmin,organization:n.executionPathState.organization,toggle:b}))),i.useEffect(()=>{if(n.active){var e;const i=(0,d.Kb)();t.setUserScope({configuration:i[u.sK],organization:n.executionPathState.organization,organizationId:i[u.sK].uuid,organizationName:null===(e=n.executionPathState.organization)||void 0===e?void 0:e.name,session:i[u.sK].session,userId:i[u.Tc]})}},[n.active,n.executionPathState.organization]),void 0===c.theme?null:i.createElement(l.nq,{value:e.emotion.cache},i.createElement(ee.f6,{theme:c},i.createElement(qo.Provider,{value:Yo},n.active?i.createElement("div",null,i.createElement(Vo,{state:n,dispatch:o,onClose:g}),v,i.createElement(Fn,null)):null)))})},83894:(e,t,n)=>{"use strict";n.d(t,{u:()=>p,Z:()=>C});var i=n(25276),o=n(52237),a=n(49178),r=n(66046),s=n(21764),c=n(3538),l=n(8962);let d=!1,u=!1,h=[];const m=()=>{if(!d)return!1;return!0},p=()=>{var e;const t=(0,s.V)(),n=null===(e=t[l.a_])||void 0===e?void 0:e.silent;var i;void 0===n&&a.m.get().breadcrumb({message:"Silent mode configuration is undefined",data:{configuration:t[l.sK],org:null===(i=t[l.sK])||void 0===i?void 0:i.uuid}});return!1!==n};var g;!function(e){e.Track="t",e.Identify="i",e.Log="l",e.Availability="a",e.Error="e"}(g||(g={}));const f=e=>{a.m.get().breadcrumb({category:"identify",message:"Identify",data:e}),(m()||"294a5b63"===(0,c.Kb)()[l.sK].uuid)&&b(g.Identify,"Identify",e,!0)},v=[{internal:"Abandoned search",external:"abandoned_search"},{internal:"Command suggestion",external:"command_suggestion"},{internal:"Command execution",external:"command_execution"},{internal:"Admin command execution",external:"admin_command_execution"},{internal:"New search",external:"opened"},{internal:"Exited",external:"closed"},{internal:"Client-Error",external:"client_error"}],b=(e,t,n,i)=>{var o;console.debug("onEvent:",e);const a=(0,c.Kb)()[l.Jh]||{};p()||y(e,t,n,i);const r=t&&(null===(o=v.find(e=>e.internal===t))||void 0===o?void 0:o.external);if(r){var s;const e=null===(s=(0,c.Kb)().shareCallbacks())||void 0===s?void 0:s["commandbar-event-handler"];e&&e(r,{...n,userAttributes:a})}},y=(e,t,n,i)=>{x(e,t,n),(h.length>=5||i)&&S()},x=(e,t,n)=>{var o,a,r,s,d,m;const p=u?"admin":i.Z.get("adm","")?"likely-admin":"end_user",g="string"===typeof(0,c.Kb)()[l.Tc]?(0,c.Kb)()[l.Tc]:null,f={context:{page:{path:null===(o=window.location)||void 0===o?void 0:o.pathname,title:null===(a=document)||void 0===a?void 0:a.title,url:null===(r=window.location)||void 0===r?void 0:r.href,search:null===(s=window.location)||void 0===s?void 0:s.search},userAgent:null===(d=navigator)||void 0===d?void 0:d.userAgent,groupId:(0,c.Kb)()[l.sK].uuid,cbSource:(0,c.Kb)()[l.sK],release:null!==(m={NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_COMMANDBAR_BUILD:"bundle",REACT_APP_API_URL:"https://api.commandbar.com",REACT_APP_BUILD_TARGET:"stable",REACT_APP_EDITOR_URL:"",REACT_APP_FRAME_NAME:"CommandBar",REACT_APP_NPM_VERSION:"",REACT_APP_RELEASE:"0bd07bf75e286870484835f996c7c538dc10af44\n",REACT_APP_PROXY_URL:""}.REACT_APP_SENTRY_ENVIRONMENT)&&void 0!==m?m:""},userType:p,type:e,attrs:n,name:t,id:g,session:(0,c.Kb)()[l.sK].session,search:(0,c.Kb)()[l.i4]};h.push(f)},S=()=>{const e=JSON.stringify({events:h,organization:(0,c.Kb)()[l.sK].uuid,id:(0,c.Kb)()[l.Tc]});h=[],o.Z.post("/t/",e)},C={track:(e,t,n)=>{a.m.get().breadcrumb({category:"track",message:e,data:t}),m()&&b(g.Track,e,t,n)},log:(e,t,n)=>{a.m.get().breadcrumb({category:"log",message:e,data:t}),m()&&b(g.Log,e,t,n)},identify:f,error:function(e,t){if((0,r.i)(e)){const n=e.startsWith("Internal")?"Internal-Error":"Client-Error";b(g.Error,n,{description:e,...t},!0)}},isAdmin:()=>{u=!0,i.Z.set("adm",!0),f({isAdmin:!0})},setActive:e=>{d=e},availability:e=>{const t={commands:e};a.m.get().breadcrumb({category:"availability",message:"Calculate availability",data:t}),m()&&!p()&&y(g.Availability,void 0,t)}}},66046:(e,t,n)=>{"use strict";let i;n.d(t,{j:()=>i,i:()=>a}),function(e){e.API="Internal-API-error",e.EXECUTION="Internal-execution-error",e.UNKNOWN="Internal-unknown-error",e.FILTER="Internal-filter-error",e.SIMULATE_FAILED="Failed simulate",e.CALLBACK="Client-callback-error",e.CLICK="Client-click-error",e.DASHBOARD="Client-dashboard-error",e.LINK="Client-link-error",e.CONTEXT="Client-context-error",e.MENU="Internal-menu-height-error",e.BAR_OPEN="Internal-bar-open-error"}(i||(i={}));const o=Object.values(i),a=e=>-1!==o.indexOf(e)},49178:(e,t,n)=>{"use strict";n.d(t,{m:()=>h});var i=n(84794),o=n(98250),a=n(9252),r=n(83894),s=n(34729),c=n(66046),l=n(8962),d=n(21764);const u=()=>{throw new Error("not implemented")};class h extends class{constructor(){this._disposed=!1,this.breadcrumb=u}dispose(){this._disposed=!0}}{static get(){return this.initialize(!1)}static initialize(e){const t=(0,d.V)();let n=t[l._4];return void 0!==n&&n instanceof h||(n=new h(e),t[l._4]=n),n}constructor(e=!0){super(),this.client=void 0,this.history=void 0,this.hub=void 0,this.history=[];const t=e?[/^https?:\/\/.*\.?commandbar.com/]:[/^webpack-internal/,/^https?:\/\/.*\.?commandbar.com/];let n="stable";"dev"!==n&&window.location.href.includes("localhost")&&(n="customer-dev__"+n);const c=new i.R({allowUrls:t,attachStacktrace:!0,autoSessionTracking:!0,beforeSend:(t,n)=>(n&&n.originalException&&r.Z.error("string"===typeof n.originalException?n.originalException:n.originalException.message,t.extra),!e||(0,r.u)()?(e||(this.history.push({event:t,hint:n}),this.history=this.history.slice(-100)),null):t),debug:!e,defaultIntegrations:!1,denyUrls:[/pagead\/js/i,/graph\.facebook\.com/i,/connect\.facebook\.net\/en_US\/all\.js/i,/eatdifferent\.com\.woopra-ns\.com/i,/static\.woopra\.com\/js\/woopra\.js/i,/extensions\//i,/^chrome:\/\//i,/127\.0\.0\.1:4001\/isrunning/i,/webappstoolbarba\.texthelp\.com\//i,/metrics\.itunes\.apple\.com\.edgesuite\.net\//i],dsn:"https://ebf252b62885436e858a66d157aee9ea@o451734.ingest.sentry.io/5608348",environment:n,ignoreErrors:["top.GLOBALS","originalCreateNotification","canvas.contentDocument","MyApp_RemoveAllHighlights","http://tt.epicplay.com","Can't find variable: ZiteReader","jigsaw is not defined","ComboSearch is not defined","http://loading.retry.widdit.com/","atomicFindClose","fb_xd_fragment","bmi_SafeAddOnload","EBCallBackMessageReceived","conduitPage","_avast_submit"],integrations:[new o.jK.InboundFilters,new o.jK.FunctionToString,new o.jK.LinkedErrors,new o.jK.UserAgent,new o.jK.Dedupe],maxBreadcrumbs:300,release:"dev"});this.client=c,this.hub=new a.Xb(c),this.breadcrumb=this.hub.addBreadcrumb.bind(this.hub);const l=(0,s.qY)();null!==l&&this.hub.configureScope(e=>{e.setTag("is_customer_dev",window.location.href.includes("localhost")),e.setTag("os",l.os),e.setTag("browser",l.name),e.setTag("browser version",l.version),e.setTag("browser type",l.type),e.setContext("browser",null!==l&&void 0!==l?l:{}),e.setContext("site",window.location),e.setContext("allowUrls",{urls:t.toString()})})}dispose(){this.client.close(),super.dispose()}exception(e,t,n){const i="string"===typeof e?e:void 0,o=t instanceof Error&&t||e instanceof Error&&e||void 0,a=void 0!==n||t instanceof Error?n:t,r=void 0===i?o:new Error(i);(0,c.i)(i)&&console.error("CB error",i,o),this.hub.withScope(e=>{if(a)try{const{tags:t,...n}=a;t&&"object"===typeof t&&e.setTags(t),e.setExtras(n)}catch(r){e.setExtras(a)}this.hub.captureException(r,{originalException:o})})}setUserScope(e){this.hub.configureScope(t=>{t.setContext("configuration",e.configuration),t.setContext("organization",e.organization||null),t.setTag("organization",e.organizationId),t.setTag("organization_name",e.organizationName),t.setTag("session",e.session),t.setUser({cb_organization_name:e.organizationName,cb_organization:e.organizationId,cb_session:e.session,id:e.userId})})}}},39753:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CommandBarContainer:()=>y,default:()=>E,init:()=>x});n(78929),n(49110);var i=n(25458),o=n(25233),a=n(91182),r=n(86479);const s=()=>{Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{value:function(e=1,t=[]){for(const n of this)n instanceof Array&&e>0?n.flat(e-1,t):t.push(n);return t}})};var c=n(49178);class l extends i.Component{constructor(...e){super(...e),this.state={hasError:!1,errorMessage:"",stacktrace:void 0}}static getDerivedStateFromError(e){return{hasError:!0,errorMessage:e.message,stacktrace:e.stack}}componentDidCatch(e,t){c.m.get().exception(e,t)}render(){return this.props.children}}const d=l;var u=n(3538),h=n(21764),m=n(17656),p=n(8962),g=n(12293);const f=e=>{const t=localStorage.getItem("commandbar.lc");if(!t&&e&&"10d7dc04"===e)return{api:"https://api-cu.commandbar.com",commandbar:"__local__",proxy:"https://frames-proxy-prod.commandbar.com",editor:"https://frames-editor-prod.commandbar.com"};switch(t){case"prod":return{api:"https://api.commandbar.com",commandbar:"__local__",proxy:"https://frames-proxy-prod.commandbar.com",editor:"https://frames-editor-prod.commandbar.com"};case"labs":return{api:"https://api-labs.commandbar.com",commandbar:"__local__",proxy:"https://frames-proxy-labs.commandbar.com",editor:"https://frames-editor-labs.commandbar.com"};case"branch":return{api:"https://api-branch.commandbar.com",commandbar:"__local__",proxy:"https://frames-proxy-branch.commandbar.com",editor:"https://frames-editor-branch.commandbar.com"};case"branch2":return{api:"https://api-labs.commandbar.com",commandbar:"__local__",proxy:"https://frames-proxy-branch2.commandbar.com",editor:"https://frames-editor-branch2.commandbar.com"};case"stress":return{api:"https://api-stress.commandbar.com",commandbar:"__local__",proxy:"https://frames-proxy-labs.commandbar.com",editor:"https://frames-editor-labs.commandbar.com"};case"local":return{api:"https://api.commandbar.com",commandbar:"__local__",proxy:"http://localhost:3002",editor:"http://localhost:3003"};case"test":case"local-dev":return{api:"http://localhost:8000",commandbar:"__local__",proxy:"http://localhost:3002",editor:"http://localhost:3003"};case"local-docker":return{api:"https://api.commandbar.com",commandbar:"__local__",proxy:"http://localhost:5002",editor:"http://localhost:5003"};case"local-dev-docker":return{api:"http://localhost:8000",commandbar:"__local__",proxy:"http://localhost:5002",editor:"http://localhost:5003"};default:return{api:"https://api.commandbar.com",commandbar:"__local__",proxy:"https://frames-proxy-prod.commandbar.com",editor:"https://frames-editor-prod.commandbar.com"}}},v=e=>{var t,n;const i=(()=>{const e=Math.pow(10,12);return Math.floor(e+9*Math.random()*e).toString()})();e[p.sK]={session:i,uuid:null===(t=e[p.sK])||void 0===t?void 0:t.uuid,...f(null===(n=e[p.sK])||void 0===n?void 0:n.uuid)}},b=()=>{g.Z.blue("[CommandBar] Loading...");const e=(0,h.V)();c.m.initialize();const t=(()=>{let e=document.getElementById("commandbar-wrapper"),t=document.getElementById("commandbar");return e||(e=document.createElement("div"),e.setAttribute("id","commandbar-wrapper"),e.setAttribute("data-commandbar","1"),document.body.appendChild(e)),t||(t=document.createElement("div"),t.setAttribute("id","commandbar"),t.setAttribute("data-commandbar","1"),e.appendChild(t)),t})();return v(e),t};s(),(0,h.V)(),c.m.initialize();const y=e=>{const[t,n]=i.useState(void 0);return(0,i.useEffect)(()=>()=>{(0,m.B9)((0,u.Kb)()),b()},[]),(0,i.useEffect)(()=>{(0,u.Kb)()[p.j6](e.orgID)},[e.orgID]),(0,i.useEffect)(()=>{(0,h.V)()[p.a_]={name:e.orgName,...(0,h.V)()[p.a_]}},[e.orgName]),(0,i.useEffect)(()=>{e.userID&&(0,u.Kb)().boot(e.userID)},[e.userID]),(0,i.useEffect)(()=>{n((0,r.Z)({key:"commandbar",container:document.getElementById("commandbar")}))},[n]),t?i.createElement(d,null,i.createElement(a.Z,{emotion:t})):null},x=async(e,t)=>{var n,a;const r=b(),s=null!==(n=null===(a=(0,h.V)()[p.sK])||void 0===a?void 0:a.api)&&void 0!==n?n:"https://api.commandbar.com";return!0===await fetch(`${s}/organizations/${e}/p`).then(e=>e.json()).then(e=>e).catch(()=>!1)?(o.render(i.createElement(y,{orgID:e,orgName:t}),r),r):void console.error("This organization is not yet authorized. Please message the CommandBar team.")};{var S,C;const e=(0,h.V)(),t=null===(S=e[p.sK])||void 0===S?void 0:S.uuid,n=null===(C=e[p.a_])||void 0===C?void 0:C.name,a={orgID:"42424242",orgName:"test-org",userID:"test-user"};void 0===t?(console.warn("CommandBar configuration is missing!"),a.orgID=""):(a.orgID=t,a.orgName=n,a.userID=void 0),a.orgID||console.warn("CommandBar org ID is invalid; please contact CommandBar for assistance.",a.orgID);const r=b();o.render(i.createElement(y,a),r)}const E=x},3538:(e,t,n)=>{"use strict";function i(){return window.CommandBar}n.d(t,{Kb:()=>i})},21764:(e,t,n)=>{"use strict";n.d(t,{V:()=>a});var i=n(17656),o=n(8962);function a(){const e=window.CommandBar;return((0,i.nF)(e)||"boolean"!==typeof e[o.UV])&&function(){var e;const t=window.CommandBar,n=window.CommandBar;let i,a;Array.isArray(null===t||void 0===t?void 0:t.q)||"string"===typeof(null===t||void 0===t?void 0:t.uid)?(i=null===t||void 0===t?void 0:t.uid,a=null===t||void 0===t?void 0:t.q):(i=null===(e=null===n||void 0===n?void 0:n[o.sK])||void 0===e?void 0:e.uuid,a=null===n||void 0===n?void 0:n[o.uF]);const r={[o.sK]:{uuid:"string"===typeof i?i:""},[o.eQ]:!1,[o.UV]:!0,[o.uF]:Array.isArray(a)?a:[],[o.el]:()=>r};window.CommandBar=new Proxy(r,{get:function(e,t){return((e,t)=>t in e)(r,t)?r[t]:function(){const e=Array.prototype.slice.call(arguments);e.unshift(t),r[o.uF].push(e)}}})}(),window.CommandBar[o.el]()}},8962:(e,t,n)=>{"use strict";n.d(t,{Ut:()=>i,sK:()=>o,j6:()=>a,Sq:()=>r,Dk:()=>s,ie:()=>c,eQ:()=>l,Jh:()=>d,UV:()=>u,fd:()=>h,a_:()=>m,Lw:()=>p,AX:()=>g,uF:()=>f,TW:()=>v,Po:()=>b,WJ:()=>y,_4:()=>x,i4:()=>S,xo:()=>C,wh:()=>E,oK:()=>w,ch:()=>k,Ml:()=>T,Lr:()=>I,el:()=>D,Tc:()=>A});const i=Symbol.for("CommandBar::access"),o=Symbol.for("CommandBar::configuration"),a=Symbol.for("CommandBar::configure"),r=Symbol.for("CommandBar::configUser"),s=Symbol.for("CommandBar::dispatch"),c=Symbol.for("CommandBar::dispose"),l=Symbol.for("CommandBar::disposed"),d=Symbol.for("CommandBar::eventMeta"),u=Symbol.for("CommandBar::isProxy"),h=Symbol.for("CommandBar::loadEditor"),m=Symbol.for("CommandBar::orgConfig"),p=Symbol.for("CommandBar::perf"),g=Symbol.for("CommandBar::programmaticTheme"),f=Symbol.for("CommandBar::queue"),v=Symbol.for("CommandBar::reloadCommands"),b=Symbol.for("CommandBar::reloadOrganization"),y=Symbol.for("CommandBar::report"),x=Symbol.for("CommandBar::reporter"),S=Symbol.for("CommandBar::search"),C=Symbol.for("CommandBar::setDashboard"),E=Symbol.for("CommandBar::setPreviewMode"),w=Symbol.for("CommandBar::setTestMode"),k=Symbol.for("CommandBar::showGuide"),T=Symbol.for("CommandBar::showMessage"),I=Symbol.for("CommandBar::state"),D=Symbol.for("CommandBar::unwrap"),A=Symbol.for("CommandBar::user")},52237:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(27256),o=n.n(i),a=n(25276),r=n(12293),s=n(3097),c=n(21764),l=n(8962);const d=(()=>{var e;let t=null===(e=(0,c.V)()[l.sK])||void 0===e?void 0:e.api;if(void 0===t){const e=new URL(window.location.href).searchParams.get("api");t=e||"https://api.commandbar.com"}return r.Z.blue("[target]",t),t})(),u=()=>window.location.pathname.startsWith("/login/"),h=(()=>{const e=a.Z.get("access","");return e?"JWT "+e:null})(),m=o().create({baseURL:d,headers:{Authorization:h,"Content-Type":"application/json",accept:"application/json"}});m.interceptors.response.use(e=>e,e=>{var t,n,i,o,c,l,d;r.Z.red("@ Axios Error",e,e.config);const h=e.config,p=null!==(t="CommandBar")?t:"",g=["CommandBar","Proxy"].includes(p);if(401===(null===(n=null===e||void 0===e?void 0:e.response)||void 0===n?void 0:n.status)&&("/auth/refresh/"===h.url||"/auth/basic/"===h.url))return g||u()||(window.location.href="/login/"),Promise.reject(e);if(401===(null===(i=null===e||void 0===e?void 0:e.response)||void 0===i?void 0:i.status)){let t="";if(t=g?null===(c=null===(o=window)||void 0===o?void 0:o.CommandBarProxy)||void 0===c?void 0:c._refresh:a.Z.get("refresh",""),t){const n=JSON.parse(atob(t.split(".")[1])),i=Math.ceil(Date.now()/1e3);return n.exp>i?m.post("/auth/refresh/",{refresh:t}).then(e=>{if(r.Z.blue("@ RESET TOKENS"),g?(window.CommandBarProxy._access=e.data.access,window.CommandBarProxy._refresh=e.data.refresh):(a.Z.set("access",e.data.access),a.Z.set("refresh",e.data.refresh)),m.defaults.headers.Authorization="JWT "+e.data.access,h.headers.Authorization="JWT "+e.data.access,!g)try{const e={};(0,s.Z)("CB_EDITOR_SYNC",{detail:e})}catch(t){}return m(h)}).catch(e=>{console.log(e)}):(console.error("Refresh token is expired",n.exp,i),a.Z.remove("refresh"),g||u()||(window.location.href="/login/"),Promise.reject(e))}return console.error("Refresh token not available."),g||u()||(window.location.href="/login/"),Promise.reject(e)}return Promise.reject(null!==(d=null===(l=null===e||void 0===e?void 0:e.response)||void 0===l?void 0:l.data)&&void 0!==d?d:"Something went wrong.")});const p=m},17656:(e,t,n)=>{"use strict";n.d(t,{Wf:()=>r,nF:()=>s,B9:()=>c});var i=n(8962);const o=e=>void 0!==e&&void 0!==e.dispose,a=e=>void 0!==e&&void 0!==e[i.ie],r=e=>void 0===e||o(e)||a(e),s=e=>void 0===e||o(e)&&!0===e._disposed||a(e)&&!0===e[i.eQ];function c(e){void 0!==e&&(a(e)?e[i.ie]():e.dispose())}},25276:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const i="CommandBar".toLowerCase();let o="commandbar."+i;["commandbar","proxy"].includes(i)&&(o="commandbar");const a={set:(e,t)=>{try{return localStorage.setItem(`${o}.${e}`,t.toString()),t}catch(n){return""}},get:(e,t)=>{let n;try{n=localStorage.getItem(`${o}.${e}`)}catch(i){n=null}return null===n?t:"false"!==n&&("true"===n||(+n?+n:n))},remove:e=>{try{return void localStorage.removeItem(`${o}.${e}`)}catch(t){return}}}},12293:(e,t,n)=>{"use strict";var i;n.d(t,{Z:()=>d});let o=!1,a=o&&!0;if(!o)try{const e=localStorage.getItem("commandbar.debug");"1"===e?(o=!0,a=!1):"2"===e&&(o=!0,a=!0)}catch(u){}const r=null!==(i="CommandBar")?i:"_WIDGET_",s=` [${r.toUpperCase()}] `,c="%c"+s,l=o?console.log.bind(window.console,c,"background: lightgrey; color: black; display: block;"):()=>{},d={debug:o?console.debug.bind(window.console,s):()=>{},log:l,info:o?console.info.bind(window.console,s):()=>{},warn:o?console.warn.bind(window.console,s):()=>{},error:o?console.error.bind(window.console,s):()=>{},red:o?console.log.bind(window.console,c,"background: red; color: white; display: block;"):()=>{},green:o?console.log.bind(window.console,c,"background: green; color: white; display: block;"):()=>{},blue:o?console.log.bind(window.console,c,"background: blue; color: white; display: block;"):()=>{},orange:o?console.log.bind(window.console,c,"background: orange; color: white; display: block;"):()=>{},yellow:o?console.log.bind(window.console,c,"background: yellow; color: white; display: block;"):()=>{},purple:o?console.log.bind(window.console,c,"background: purple; color: white; display: block;"):()=>{},black:o?console.log.bind(window.console,c,"background: black; color: white; display: block;"):()=>{},portalsend:a?console.log.bind(window.console,`%c ###SEND [${r.toUpperCase()}] `,"background: darkcyan; color: black; display: block;"):()=>{},portalreceive:a?console.log.bind(window.console,`%c ###RECEIVE  [${r.toUpperCase()}] `,"background: steelblue; color: black; display: block;"):()=>{}}},3097:(e,t,n)=>{"use strict";function i(e,t,n=!1,i=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,i,t),document.dispatchEvent(o),o}n.d(t,{h:()=>i,Z:()=>o});const o=i}},e=>{"use strict";return e.O(0,[824],()=>{return t=39753,e(e.s=t);var t}),e.O()}])}));
