
.toc--sidebar {
  align-self: flex-start;
  position: sticky;
  z-index: 1;

  @media (max-width: $layout-tablet) {
    flex: auto;
    top: 96px;
    width: 100%;
    max-width: 100%;
    margin-left: 16px;
    margin-right: 16px;
    margin-bottom: 16px;
    z-index: 999;
  }

  @media (min-width: $layout-tablet) { 
    --offset-top: 136px;
    --offset-bottom: 20px;
    top: var(--offset-top);
  }

  .toc--container {
    border-radius: 4px;
    border: solid 1px #e7e9ec;

    @media (max-width: $layout-tablet) {
      display: grid;
      grid-template-rows: auto 1fr auto;
      max-height: calc(100vh - var(--offset-top) - var(--offset-bottom));
      box-shadow: 0 2px 8px 0 rgba(44, 44, 44, 0.16);
      background-color: #ffffff;
    }
  }

  .toc--title {
    border-bottom: 1px solid #e7e9ec;
    padding: 8px 16px;
  }

  .toc--links {
    overflow-y: auto;
    padding: 8px 0;

    a,
    .toc--link {
      transition: color 0.15s ease, background-color 0.15s ease;
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      color: #6f777c;

      &:hover,
      &.is-active,
      &.is-current {
        color: $navyBlue;
      }

      &:hover,
      &.is-current {
        text-decoration: none;
        background-color: $softblue;
      }
    }
  }

  .toc--link.level-one,
  .toc-hugo__folder-one > nav > ul > li > a {
    @include title();
    text-transform: uppercase;
    padding: 8px 8px 8px 16px;
  }

  .toc--link.level-two,
  .toc-hugo__folder-one > nav > ul > li > ul > li > a,
  .toc-hugo__folder-two > nav > ul > li > a {
    @include title();
    padding: 8px 8px 8px 32px;
  }

  .toc--link.level-three,
  .toc-hugo__folder-one > nav > ul > li > ul > li > ul > li > a,
  .toc-hugo__folder-two > nav > ul > li > ul > li > a,
  .toc-hugo__folder-three > nav > ul > li > a {
    @include text();
    padding: 8px 8px 8px 48px;

    &.is-current {
      font-weight: 600;
    }
  }

  .toc--link.level-four,
  .toc-hugo__folder-two > nav > ul > li > ul > li > ul > li > a,
  .toc-hugo__folder-three > nav > ul > li > ul > li > a {
    @include text();
    padding: 8px 8px 8px 64px;

    &.is-current {
      font-weight: 600;
    }
  }
}

.dropdown-btn {
  font-size: inherit;
  width: 100%;
  text-align: left;
  background-color: transparent;

  > div {
    display: flex;
    align-items: center;
  }

  &.hide .caret {
    transform: rotate(0deg);
  }

  .caret {
    margin-left: auto;
    width: 15px;
    transform: rotate(-180deg);
    transition: transform 0.3s ease;

    &.rotate {
      transform: rotate(-180deg);
    }
  }
}

.dropdown-options {
  max-height: calc(100vh - 300px);
	overflow: hidden;
  transition: max-height 0.25s ease;

  &.hide {
    max-height: 0 !important;
    padding: 0;
  }
}